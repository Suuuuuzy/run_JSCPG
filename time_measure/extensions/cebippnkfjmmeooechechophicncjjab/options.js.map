{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/DomainBlock.ts","webpack:///./src/lib/WebExtensions.ts","webpack:///./src/options.ts"],"names":[],"mappings":"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","file":"options.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/options.ts\");\n","import \"./lib/WebExtensions\";\n\nexport class DomainBlock {\n\tpublic constructor() {\n\t\tthis.list = [];\n\t\tthis.load(() => {\n\t\t\tthis.enable();\n\t\t});\n\t}\n\n\tprivate lastClick: number = 0;\n\tpublic toggle() {\n\t\tif (this.isEnable()) {\n\t\t\tthis.disable();\n\t\t} else {\n\t\t\tthis.enable();\n\t\t}\n\t\tif (this.lastClick + 1000 > (new Date()).getTime()) {\n\t\t\tbrowser.tabs.create({\n\t\t\t\turl: browser.runtime.getURL(\"options.html\")\n\t\t\t});\n\t\t}\n\t\tthis.lastClick = (new Date()).getTime();\n\t}\n\n\tprivate list: string[];\n\tpublic getList(): string[] {\n\t\treturn this.list.concat();\n\t}\n\n\tpublic reset() {\n\t\tthis.list = [];\n\t}\n\n\tpublic append(domains: string[]) {\n\t\tlet alllist: string[] = this.list.concat(domains);\n\t\tlet newlist: string[] = [];\n\t\tfor (let i = 0; i < alllist.length; i++) {\n\t\t\tif (alllist[i] === \"\") continue;\n\t\t\tlet j = 0;\n\t\t\tfor (j = 0; j < newlist.length; j++) {\n\t\t\t\tif (alllist[i] === newlist[j]) break;\n\t\t\t}\n\t\t\tif (j == newlist.length) newlist.push(alllist[i]);\n\t\t}\n\t\tthis.list = newlist;\n\t}\n\n\tpublic remove(domains: string[]) {\n\t\tlet newlist: string[] = [];\n\t\tfor (let i = 0; i < this.list.length; i++) {\n\t\t\tlet j = 0;\n\t\t\tfor (j = 0; j < domains.length; j++) {\n\t\t\t\tif (this.list[i] === domains[j]) break;\n\t\t\t}\n\t\t\tif (j == domains.length) newlist.push(this.list[i]);\n\t\t}\n\t\tthis.list = newlist;\n\t}\n\n\tpublic load(callback: Function) {\n\t\tbrowser.storage.local.get([\"domain\"],\n\t\t\t(config) => {\n\t\t\t\tlet domainlist = [];\n\t\t\t\tif (typeof config[\"domain\"] === \"object\" && typeof config[\"domain\"].length === \"number\" && typeof config[\"domain\"].join === \"function\") {\n\t\t\t\t\tdomainlist = config[\"domain\"];\n\t\t\t\t}\n\t\t\t\tthis.list = domainlist;\n\t\t\t\tcallback();\n\t\t\t}\n\t\t);\n\t}\n\n\n\tprivate callbackval = { cancel: true };\n\tprivate blockingFunc = (details: chrome.webRequest.WebRequestBodyDetails) => {\n\t\treturn this.callbackval;\n\t};\n\n\tpublic isEnable(): boolean {\n\t\treturn browser.webRequest.onBeforeRequest.hasListener(this.blockingFunc);\n\t}\n\n\tpublic disable() {\n\t\tif (this.isEnable()) {\n\t\t\tbrowser.webRequest.onBeforeRequest.removeListener(this.blockingFunc);\n\t\t\tbrowser.browserAction.setBadgeText({ text: \"OFF\" });\n\t\t}\n\t}\n\n\tpublic enable() {\n\t\tthis.disable();\n\n\t\tlet filter: chrome.webRequest.RequestFilter = {\n\t\t\turls: [\"http://demo.demo.demo.demo/\"],\n\t\t\t// types: [\"main_frame\", \"sub_frame\", \"stylesheet\", \"script\", \"image\", \"object\", \"xmlhttprequest\", \"xbl\", \"xslt\", \"ping\", \"beacon\", \"xml_dtd\", \"font\", \"media\", \"websocket\", \"csp_report\", \"imageset\", \"web_manifest\", \"other\"]\n\t\t};\n\n\t\tfor (let i = 0; i < this.list.length; i++) {\n\t\t\tvar turl = this.list[i];\n\t\t\tif (turl.indexOf(\"/\") < 0) {\n\t\t\t\tturl = turl + \"/\";\n\t\t\t}\n\t\t\tfilter.urls.push(\"http://*.\" + turl + \"*\");\n\t\t\tfilter.urls.push(\"https://*.\" + turl + \"*\");\n\t\t}\n\n\t\tbrowser.webRequest.onBeforeRequest.addListener(\n\t\t\tthis.blockingFunc,\n\t\t\tfilter,\n\t\t\t[\"blocking\"]\n\t\t);\n\t\tbrowser.browserAction.setBadgeText({ text: \"ON\" });\n\t}\n\n\tpublic save() {\n\t\tbrowser.storage.local.set({ \"domain\": this.list });\n\t}\n}\n\nexport class LiveHttpLogger {\n\tpublic constructor() {\n\t\tthis.disable();\n\t}\n\n\tprivate liveLoggerTargetList: Window[] = [];\n\tpublic addTarget(target: Window) {\n\t\tthis.removeTarget(target);\n\t\tthis.liveLoggerTargetList.push(target);\n\t}\n\tpublic removeTarget(target: Window) {\n\t\tlet wins: Window[] = [];\n\t\tfor (const l of this.liveLoggerTargetList) {\n\t\t\tif (target != l) wins.push(l);\n\t\t}\n\t\tthis.liveLoggerTargetList = wins;\n\t\tif (this.liveLoggerTargetList.length == 0) {\n\t\t\tthis.disable();\n\t\t}\n\t}\n\n\tprivate liveLoggerFunc = (details: chrome.webRequest.WebRequestHeadersDetails) => {\n\t\tconst copy = this.liveLoggerTargetList.concat();\n\t\tfor (const target of copy) {\n\t\t\ttry {\n\t\t\t\ttarget.postMessage(details.url, \"*\");\n\t\t\t} catch (e) {\n\t\t\t\tthis.removeTarget(target);\n\t\t\t}\n\t\t}\n\t\tif (copy.length == 0) {\n\t\t\tthis.disable();\n\t\t}\n\t};\n\n\n\tpublic isEnable(): boolean {\n\t\treturn browser.webRequest.onSendHeaders.hasListener(this.liveLoggerFunc);\n\t}\n\n\tpublic disable() {\n\t\tif (this.isEnable()) {\n\t\t\tbrowser.webRequest.onBeforeRequest.removeListener(this.liveLoggerFunc);\n\t\t}\n\t\tbrowser.browserAction.setBadgeBackgroundColor({ color: \"#0000FF\" });\n\t}\n\n\tpublic enable() {\n\t\tif (!this.isEnable()) {\n\t\t\tbrowser.webRequest.onSendHeaders.addListener(\n\t\t\t\tthis.liveLoggerFunc,\n\t\t\t\t{\n\t\t\t\t\turls: [\"<all_urls>\"]\n\t\t\t\t},\n\t\t\t\t[\"requestHeaders\"]\n\t\t\t);\n\t\t}\n\t\tbrowser.browserAction.setBadgeBackgroundColor({ color: \"#AA0000\" });\n\t}\n}","\ndeclare global {\n    var browser: typeof chrome;\n}\n\nwindow.browser = window.chrome;\n\nexport { };\n","import \"./lib/WebExtensions\";\nimport \"./DomainBlock\";\n\ndocument.addEventListener('DOMContentLoaded', () => {\n\tnew DomainBlockOptions();\n\tnew LiveHttpOptions();\n});\n\nclass DomainBlockOptions {\n\tprivate FormDomain: HTMLTextAreaElement;\n\n\tconstructor() {\n\t\tthis.FormDomain = <HTMLTextAreaElement>document.getElementById(\"domain\");\n\n\t\tconst ButtonSave = <HTMLButtonElement>document.getElementById(\"save\");\n\t\tButtonSave.addEventListener('click', () => { this.saveclick(); });\n\n\t\tconst ButtonClear = <HTMLButtonElement>document.getElementById(\"clear\");\n\t\tButtonClear.addEventListener('click', () => { this.saveclick(); });\n\n\t\tbrowser.runtime.getBackgroundPage((backgroundWindow) => {\n\t\t\tif (!backgroundWindow) return;\n\t\t\tthis.FormDomain.value = backgroundWindow.DomainBlock.getList().join(\"\\n\");\n\t\t});\n\n\n\t}\n\n\tpublic saveclick() {\n\t\tlet domaintext = this.FormDomain.value;\n\t\tlet domainlist = domaintext.split(\"\\n\");\n\t\tbrowser.runtime.getBackgroundPage((backgroundWindow) => {\n\t\t\tif (!backgroundWindow) return;\n\t\t\tbackgroundWindow.DomainBlock.reset();\n\t\t\tbackgroundWindow.DomainBlock.append(domainlist);\n\t\t\tbackgroundWindow.DomainBlock.save();\n\t\t\tbackgroundWindow.DomainBlock.enable();\n\t\t});\n\t}\n}\n\nclass LiveHttpOptions {\n\n\tconstructor() {\n\t\tconst FormDomain = <HTMLTextAreaElement>document.getElementById(\"domain\");\n\t\tbrowser.runtime.getBackgroundPage((backgroundWindow) => {\n\t\t\tif (!backgroundWindow) return;\n\t\t\tbackgroundWindow.LiveHttpLogger.addTarget(window);\n\t\t\tbackgroundWindow.LiveHttpLogger.enable();\n\t\t});\n\t\twindow.addEventListener(\"beforeunload\", () => {\n\t\t\tbrowser.runtime.getBackgroundPage((backgroundWindow) => {\n\t\t\t\tif (!backgroundWindow) return;\n\t\t\t\tbackgroundWindow.LiveHttpLogger.removeTarget(window);\n\t\t\t});\n\t\t});\n\t\tconst LiveList = <HTMLDivElement>document.getElementById(\"live\");\n\t\twindow.addEventListener(\"message\", (ev: MessageEvent) => {\n\t\t\tlet log: string = ev.data;\n\t\t\tconst div = document.createElement(\"div\");\n\t\t\tdiv.classList.add(\"url\");\n\t\t\tconst add = document.createElement(\"button\");\n\t\t\tadd.appendChild(document.createTextNode(\"Add\"));\n\t\t\tadd.addEventListener(\"click\", () => {\n\t\t\t\tconst url = new URL(log);\n\t\t\t\tFormDomain.value = url.hostname + \"\\n\" + FormDomain.value;\n\t\t\t}, false);\n\t\t\tdiv.appendChild(add);\n\t\t\tdiv.appendChild(document.createTextNode(log));\n\t\t\tLiveList.appendChild(div);\n\t\t}, false);\n\n\t\tconst Clear = <HTMLButtonElement>document.getElementById(\"clear\");\n\t\tClear.addEventListener(\"click\", () => {\n\t\t\twhile (LiveList.firstChild) LiveList.removeChild(LiveList.firstChild);\n\t\t}, false);\n\t}\n\n}"],"sourceRoot":""}