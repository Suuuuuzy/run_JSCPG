webpackJsonp([0],[function(e,t,n){n(70),window.onload=function(){window.njs=n(71),window.jQuery=window.$=n(75),$("body").append('<iframe id="iframe" src="webapp.html" width="100%" height="100%" frameborder="none" scrolling="yes"></iframe>');var e=n(77);new e}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){e.exports=n.p+"index.html"},,,,,,,function(module,exports,__webpack_require__){var nclass=__webpack_require__(73),rpc=__webpack_require__(78),RpcBus=__webpack_require__(107),Service=__webpack_require__(108),PostMessageSocket=__webpack_require__(111),InitializeRamsService=__webpack_require__(112);module.exports=nclass.extend({initialize:function(){this.init()},init:function(){var njf1=njs.njen(this,arguments);e:for(;;)switch(njf1.cp){case 0:njf1._bus=new RpcBus,njf1._bus.SetupSessionRoles({"javad.ns.service":["public"],"javad.ns.system-backend":["public"]}),njf1._port=8800,njf1._service=new Service(function(){return new rpc.localTransport(njf1._bus)},{port:njf1._port}),njf1._iframe=document.getElementById("iframe"),njf1._pmsocket=new PostMessageSocket,njf1._pmsocket.SetTarget(njf1._iframe.contentWindow),njf1._socket=new rpc.vsock.SocketPM(njf1._pmsocket,"mainChannel"),njf1._remoteTransport=new rpc.remoteTransport(njf1._socket,njf1._bus),njf1._remoteTransport.SetAuthenticationMethod(function(e,t){e.roles=["system"]}),njf1.pc(1,null,InitializeRamsService,[njf1._bus,njf1._port]);case 1:with(njf1)if((rv1=f.apply(c,a))==njs.NJSUS)return fh;if(njf1._initResult=njf1.rv1,0!==njf1._initResult)return void console.error("init server error",njf1._initResult);break e}}})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){var nclass=__webpack_require__(73),util=__webpack_require__(74),vsock=__webpack_require__(81),LocalTransport=__webpack_require__(83),Bus=nclass.extend({initialize:function(){this.register=[],this.watchers=[],this.sessionRoles={},this.config={allowSetServiceFromAnyone:!1,allowSessionSetupRoles:!1}},Setup:function(e){util.extend(this.config,e)},SetupSessionRoles:function(e){util.extend(this.sessionRoles,e)},checkAccess:function(e,t){var n=this.localTransport(e)?["system"]:e.roles||[],r=this.sessionRoles[t.name]||[],i=this.config.allowSessionSetupRoles?t.roles||[]:[];if(i.indexOf("public")>=0||r.indexOf("public")>=0)return!0;for(var s=0;s<n.length;s++){var o=n[s];if(r.indexOf(o)>=0||i.indexOf(o)>=0)return!0}return!1},matchSessionRecord:function(e,t){var n=e.name==t.name;return n&&t.uid&&(n=e.uid==t.uid),n},localTransport:function(e){return e instanceof LocalTransport},clearTransportRegister:function(e){for(var t=[],n=0;n<this.register.length;n++)e!=this.register[n].transport&&t.push(this.register[n]);this.register=t},waitWatcher:function(watcher){var njf1=njs.njen(this,arguments,"watcher");e:for(;;)try{switch(njf1.cp){case 0:njf1._error=!1,njf1.ecp=1,njf1.pc(3,njf1._watcher.notifier,"wait",[3e4]);case 3:with(njf1)if((rv3=f.apply(c,a))==njs.NJSUS)return fh;njf1.cp=2;break;case 1:njf1.ecp=null,njf1.thr=!1,njf1._ex=njf1.ex,njf1._error=!0,njf1.cp=2;break;case 2:return njf1._error}}catch(ex){njf1.doex(ex)}},processWatchers:function(e){for(var t=0;t<this.watchers.length;t++){var n=this.watchers[t],r=this.matchSessionRecord(e,n.sid);r&&n.notifier()}},List:function(e){if(!e)return[];for(var t=[],n=0;n<this.register.length;n++){var r=this.register[n];this.checkAccess(e,r)&&t.push({name:r.name,uid:r.uid,info:r.info||{},description:r.description})}return t},UpdateService:function(e,t){this.clearTransportRegister(e);for(var n in t){var r=this.localTransport(e);this.register.push({transport:e,local:r,name:n,uid:t[n].uid,info:t[n].info,description:t[n].description}),this.processWatchers({name:n,uid:t[n].uid})}},WatchSession:function(transport,sid){var njf1=njs.njen(this,arguments,"transport","sid");e:for(;;)switch(njf1.cp){case 0:for(njf1._fromLocal=this.localTransport(njf1._transport),njf1._i=0;njf1._i<this.register.length;njf1._i++)if(njf1._record=this.register[njf1._i],njf1._matched=this.matchSessionRecord(njf1._record,njf1._sid),njf1._matched)return!0;njf1._watcher={sid:njf1._sid,notifier:new njs.EventNotifier},this.watchers.push(njf1._watcher),njf1.pc(1,this,"waitWatcher",[njf1._watcher]);case 1:with(njf1)if((rv1=f.apply(c,a))==njs.NJSUS)return fh;return njf1._timeout=njf1.rv1,njf1._index=this.watchers.indexOf(njf1._watcher),njf1._index>=0&&this.watchers.splice(njf1._index,1),njf1._found=!njf1._timeout,njf1._found}},Open:function(transport,sid){var njf1=njs.njen(this,arguments,"transport","sid");e:for(;;)switch(njf1.cp){case 0:njf1._fromLocal=this.localTransport(njf1._transport),njf1._i=0;case 2:njf1.cp=njf1._i<this.register.length?3:4;break;case 3:njf1._record=this.register[njf1._i],njf1._matched=this.matchSessionRecord(njf1._record,njf1._sid),njf1.cp=njf1._matched?5:6;break;case 5:if(!this.checkAccess(njf1._transport,njf1._record))throw new Error("Access denied");njf1.cp=njf1._fromLocal&&njf1._record.local?7:8;break;case 7:njf1.pc(10,njf1._transport,"GetUserInfo",[]);case 10:with(njf1)if((rv10=f.apply(c,a))==njs.NJSUS)return fh;njf1.pc(11,njf1._record.transport,"GetSessionObject",[njf1._sid,njf1.rv10]);case 11:with(njf1)if((rv11=f.apply(c,a))==njs.NJSUS)return fh;return njf1.rv11;case 8:njf1.pc(12,njf1._transport,"GetUserInfo",[]);case 12:with(njf1)if((rv12=f.apply(c,a))==njs.NJSUS)return fh;njf1.pc(13,njf1._record.transport,"GetSocket",[njf1._sid,njf1.rv12]);case 13:with(njf1)if((rv13=f.apply(c,a))==njs.NJSUS)return fh;return njf1._socket=njf1.rv13,njf1._fromLocal||njf1._record.local||(njf1._socket=vsock.twistWires(njf1._socket)),njf1._socket;case 9:njf1.cp=6;break;case 6:case 1:njf1._i++,njf1.cp=2;break;case 4:throw new Error("Session was not found on the bus")}}});module.exports=Bus},function(module,exports,__webpack_require__){var nclass=__webpack_require__(73),ServiceInterface=__webpack_require__(109);module.exports=nclass.extend({includes:__webpack_require__(82),initialize:function(e,t){console.log("Initializing System Backend Service..."),this.transportConstructor=e,this.info=t,this.start()},start:function(){var njf1=njs.njen(this,arguments);e:for(;;)switch(njf1.cp){case 0:njf1._that=this,njf1.pc(1,this,"transportConstructor",[]);case 1:with(njf1)if((rv1=f.apply(c,a))==njs.NJSUS)return fh;njf1._transport=njf1.rv1,njf1._transport.SetupService({"javad.ns.system-backend":{description:"JAVAD RAMS System Backend Service",construct:function(){return new ServiceInterface(njf1._that)}}});break e}}})},function(module,exports,__webpack_require__){var rpc=__webpack_require__(78),getIps=__webpack_require__(110);module.exports=rpc.serviceObject.extend({initialize:function(e){this.service=e},GetIps:function(){var njf1=njs.njen(this,arguments);e:for(;;)switch(njf1.cp){case 0:njf1.pc(1,null,getIps,[]);case 1:with(njf1)if((rv1=f.apply(c,a))==njs.NJSUS)return fh;return njf1.rv1}},GetPort:function(){return this.service.info.port},onDestroy:function(e){}})},function(module,exports,__webpack_require__){var ipaddr=__webpack_require__(105);module.exports=function(){var njf1=njs.njen(this,arguments);e:for(;;)switch(njf1.cp){case 0:njf1._ips=[],njf1.cp=chrome.system?1:2;break;case 1:njf1.pc(3,njs.async,"Task",[chrome.system.network,chrome.system.network.getNetworkInterfaces]);case 3:with(njf1)if((rv3=f.apply(c,a))==njs.NJSUS)return fh;for(njf1._interfaces=njf1.rv3,njf1._i=0;njf1._i<njf1._interfaces.length;njf1._i++)njf1._infc=njf1._interfaces[njf1._i],njf1._ip=njf1._infc.address,ipaddr.isValid(njf1._ip)&&(njf1._ipv6=ipaddr.parse(njf1._infc.address),"ipv4"==njf1._ipv6.kind()&&njf1._ips.push(njf1._ip),"ipv6"==njf1._ipv6.kind()&&njf1._ipv6.isIPv4MappedAddress()&&(njf1._ip=njf1._ipv6.toIPv4Address().toString(),njf1._ips.push(njf1._ip)));njf1.cp=2;break;case 2:return njf1._ips}}},,function(module,exports,__webpack_require__){var rpc=__webpack_require__(78),pb=__webpack_require__(113),protoRpc=__webpack_require__(120),nsRpcHandler=__webpack_require__(122),RamsService=__webpack_require__(123),GetProto=__webpack_require__(128);module.exports=function(bus,port){var njf1=njs.njen(this,arguments,"bus","port");e:for(;;)switch(njf1.cp){case 0:njf1._ramsService=new RamsService(function(){return new rpc.localTransport(njf1._bus)}),njf1._proto=GetProto(pb),njf1._HttpServer=__webpack_require__(132),njf1._httpServer=new njf1._HttpServer({port:njf1._port,handlers:{"/":function(e,t,n){n.send(200,"JAVAD RAMS Mobile Server")},"/api/service/nsserviceclient/":protoRpc.createCustomWebHandler({rpcProto:njf1._proto.rpcMessages,serviceConstructors:{NsServiceListener:function(e){var t=new nsRpcHandler(njf1._proto.builder,e,function(){njf1._ramsService.HandleIncoming(t)});return t}}})}}),njf1.pc(1,njf1._httpServer,"Initialize",[]);case 1:with(njf1)if((rv1=f.apply(c,a))==njs.NJSUS)return fh;return njf1.rv1}}},function(e,t,n){var r,i,s;(function(e,o){!function(e,a){n(115).amd?(i=[n(116)],r=a,s="function"==typeof r?r.apply(t,i):r,!(void 0!==s&&(o.exports=s))):"object"==typeof o&&o&&o.exports?o.exports=a(n(116),!0):(e.dcodeIO=e.dcodeIO||{}).ProtoBuf=a(e.dcodeIO.ByteBuffer)}(this,function(t,r){"use strict";var i={};return i.ByteBuffer=t,i.Long=t.Long||null,i.VERSION="5.0.1",i.WIRE_TYPES={},i.WIRE_TYPES.VARINT=0,i.WIRE_TYPES.BITS64=1,i.WIRE_TYPES.LDELIM=2,i.WIRE_TYPES.STARTGROUP=3,i.WIRE_TYPES.ENDGROUP=4,i.WIRE_TYPES.BITS32=5,i.PACKABLE_WIRE_TYPES=[i.WIRE_TYPES.VARINT,i.WIRE_TYPES.BITS64,i.WIRE_TYPES.BITS32],i.TYPES={int32:{name:"int32",wireType:i.WIRE_TYPES.VARINT,defaultValue:0},uint32:{name:"uint32",wireType:i.WIRE_TYPES.VARINT,defaultValue:0},sint32:{name:"sint32",wireType:i.WIRE_TYPES.VARINT,defaultValue:0},int64:{name:"int64",wireType:i.WIRE_TYPES.VARINT,defaultValue:i.Long?i.Long.ZERO:void 0},uint64:{name:"uint64",wireType:i.WIRE_TYPES.VARINT,defaultValue:i.Long?i.Long.UZERO:void 0},sint64:{name:"sint64",wireType:i.WIRE_TYPES.VARINT,defaultValue:i.Long?i.Long.ZERO:void 0},bool:{name:"bool",wireType:i.WIRE_TYPES.VARINT,defaultValue:!1},"double":{name:"double",wireType:i.WIRE_TYPES.BITS64,defaultValue:0},string:{name:"string",wireType:i.WIRE_TYPES.LDELIM,defaultValue:""},bytes:{name:"bytes",wireType:i.WIRE_TYPES.LDELIM,defaultValue:null},fixed32:{name:"fixed32",wireType:i.WIRE_TYPES.BITS32,defaultValue:0},sfixed32:{name:"sfixed32",wireType:i.WIRE_TYPES.BITS32,defaultValue:0},fixed64:{name:"fixed64",wireType:i.WIRE_TYPES.BITS64,defaultValue:i.Long?i.Long.UZERO:void 0},sfixed64:{name:"sfixed64",wireType:i.WIRE_TYPES.BITS64,defaultValue:i.Long?i.Long.ZERO:void 0},"float":{name:"float",wireType:i.WIRE_TYPES.BITS32,defaultValue:0},"enum":{name:"enum",wireType:i.WIRE_TYPES.VARINT,defaultValue:0},message:{name:"message",wireType:i.WIRE_TYPES.LDELIM,defaultValue:null},group:{name:"group",wireType:i.WIRE_TYPES.STARTGROUP,defaultValue:null}},i.MAP_KEY_TYPES=[i.TYPES.int32,i.TYPES.sint32,i.TYPES.sfixed32,i.TYPES.uint32,i.TYPES.fixed32,i.TYPES.int64,i.TYPES.sint64,i.TYPES.sfixed64,i.TYPES.uint64,i.TYPES.fixed64,i.TYPES.bool,i.TYPES.string,i.TYPES.bytes],i.ID_MIN=1,i.ID_MAX=536870911,i.convertFieldsToCamelCase=!1,i.populateAccessors=!0,i.populateDefaults=!0,i.Util=function(){var t={};return t.IS_NODE=!("object"!=typeof e||e+""!="[object process]"||e.browser),t.XHR=function(){for(var e=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],t=null,n=0;n<e.length;n++){try{t=e[n]()}catch(r){continue}break}if(!t)throw Error("XMLHttpRequest is not supported");return t},t.fetch=function(e,r){if(r&&"function"!=typeof r&&(r=null),t.IS_NODE){var i=n(118);if(r)i.readFile(e,function(e,t){r(e?null:""+t)});else try{return i.readFileSync(e)}catch(s){return null}}else{var o=t.XHR();if(o.open("GET",e,!!r),o.setRequestHeader("Accept","text/plain"),"function"==typeof o.overrideMimeType&&o.overrideMimeType("text/plain"),!r)return o.send(null),200==o.status||0==o.status&&"string"==typeof o.responseText?o.responseText:null;if(o.onreadystatechange=function(){4==o.readyState&&r(200==o.status||0==o.status&&"string"==typeof o.responseText?o.responseText:null)},4==o.readyState)return;o.send(null)}},t.toCamelCase=function(e){return e.replace(/_([a-zA-Z])/g,function(e,t){return t.toUpperCase()})},t}(),i.Lang={DELIM:/[\s\{\}=;:\[\],'"\(\)<>]/g,RULE:/^(?:required|optional|repeated|map)$/,TYPE:/^(?:double|float|int32|uint32|sint32|int64|uint64|sint64|fixed32|sfixed32|fixed64|sfixed64|bool|string|bytes)$/,NAME:/^[a-zA-Z_][a-zA-Z_0-9]*$/,TYPEDEF:/^[a-zA-Z][a-zA-Z_0-9]*$/,TYPEREF:/^(?:\.?[a-zA-Z_][a-zA-Z_0-9]*)+$/,FQTYPEREF:/^(?:\.[a-zA-Z][a-zA-Z_0-9]*)+$/,NUMBER:/^-?(?:[1-9][0-9]*|0|0[xX][0-9a-fA-F]+|0[0-7]+|([0-9]*(\.[0-9]*)?([Ee][+-]?[0-9]+)?)|inf|nan)$/,NUMBER_DEC:/^(?:[1-9][0-9]*|0)$/,NUMBER_HEX:/^0[xX][0-9a-fA-F]+$/,NUMBER_OCT:/^0[0-7]+$/,NUMBER_FLT:/^([0-9]*(\.[0-9]*)?([Ee][+-]?[0-9]+)?|inf|nan)$/,BOOL:/^(?:true|false)$/i,ID:/^(?:[1-9][0-9]*|0|0[xX][0-9a-fA-F]+|0[0-7]+)$/,NEGID:/^\-?(?:[1-9][0-9]*|0|0[xX][0-9a-fA-F]+|0[0-7]+)$/,WHITESPACE:/\s/,STRING:/(?:"([^"\\]*(?:\\.[^"\\]*)*)")|(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g,STRING_DQ:/(?:"([^"\\]*(?:\\.[^"\\]*)*)")/g,STRING_SQ:/(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g},i.DotProto=function(e,t){function n(e,n){var r=-1,i=1;if("-"==e.charAt(0)&&(i=-1,e=e.substring(1)),t.NUMBER_DEC.test(e))r=parseInt(e);else if(t.NUMBER_HEX.test(e))r=parseInt(e.substring(2),16);else{if(!t.NUMBER_OCT.test(e))throw Error("illegal id value: "+(0>i?"-":"")+e);r=parseInt(e.substring(1),8)}if(r=i*r|0,!n&&0>r)throw Error("illegal id value: "+(0>i?"-":"")+e);return r}function r(e){var n=1;if("-"==e.charAt(0)&&(n=-1,e=e.substring(1)),t.NUMBER_DEC.test(e))return n*parseInt(e,10);if(t.NUMBER_HEX.test(e))return n*parseInt(e.substring(2),16);if(t.NUMBER_OCT.test(e))return n*parseInt(e.substring(1),8);if("inf"===e)return n*(1/0);if("nan"===e)return NaN;if(t.NUMBER_FLT.test(e))return n*parseFloat(e);throw Error("illegal number value: "+(0>n?"-":"")+e)}function i(e,t,n){"undefined"==typeof e[t]?e[t]=n:(Array.isArray(e[t])||(e[t]=[e[t]]),e[t].push(n))}var s={},o=function(e){this.source=e+"",this.index=0,this.line=1,this.stack=[],this._stringOpen=null},a=o.prototype;a._readString=function(){var e='"'===this._stringOpen?t.STRING_DQ:t.STRING_SQ;e.lastIndex=this.index-1;var n=e.exec(this.source);if(!n)throw Error("unterminated string");return this.index=e.lastIndex,this.stack.push(this._stringOpen),this._stringOpen=null,n[1]},a.next=function(){if(this.stack.length>0)return this.stack.shift();if(this.index>=this.source.length)return null;if(null!==this._stringOpen)return this._readString();var e,n,r;do{for(e=!1;t.WHITESPACE.test(r=this.source.charAt(this.index));)if("\n"===r&&++this.line,++this.index===this.source.length)return null;if("/"===this.source.charAt(this.index))if(++this.index,"/"===this.source.charAt(this.index)){for(;"\n"!==this.source.charAt(++this.index);)if(this.index==this.source.length)return null;++this.index,++this.line,e=!0}else{if("*"!==(r=this.source.charAt(this.index)))return"/";do{if("\n"===r&&++this.line,++this.index===this.source.length)return null;n=r,r=this.source.charAt(this.index)}while("*"!==n||"/"!==r);++this.index,e=!0}}while(e);if(this.index===this.source.length)return null;var i=this.index;t.DELIM.lastIndex=0;var s=t.DELIM.test(this.source.charAt(i++));if(!s)for(;i<this.source.length&&!t.DELIM.test(this.source.charAt(i));)++i;var o=this.source.substring(this.index,this.index=i);return'"'!==o&&"'"!==o||(this._stringOpen=o),o},a.peek=function(){if(0===this.stack.length){var e=this.next();if(null===e)return null;this.stack.push(e)}return this.stack[0]},a.skip=function(e){var t=this.next();if(t!==e)throw Error("illegal '"+t+"', '"+e+"' expected")},a.omit=function(e){return this.peek()===e?(this.next(),!0):!1},a.toString=function(){return"Tokenizer ("+this.index+"/"+this.source.length+" at line "+this.line+")"},s.Tokenizer=o;var f=function(e){this.tn=new o(e),this.proto3=!1},h=f.prototype;return h.parse=function(){var e,n,r={name:"[ROOT]","package":null,messages:[],enums:[],imports:[],options:{},services:[]},i=!0;try{for(;e=this.tn.next();)switch(e){case"package":if(!i||null!==r.package)throw Error("unexpected 'package'");if(e=this.tn.next(),!t.TYPEREF.test(e))throw Error("illegal package name: "+e);this.tn.skip(";"),r.package=e;break;case"import":if(!i)throw Error("unexpected 'import'");e=this.tn.peek(),("public"===e||(n="weak"===e))&&this.tn.next(),e=this._readString(),this.tn.skip(";"),n||r.imports.push(e);break;case"syntax":if(!i)throw Error("unexpected 'syntax'");this.tn.skip("="),"proto3"===(r.syntax=this._readString())&&(this.proto3=!0),this.tn.skip(";");break;case"message":this._parseMessage(r,null),i=!1;break;case"enum":this._parseEnum(r),i=!1;break;case"option":this._parseOption(r);break;case"service":this._parseService(r);break;case"extend":this._parseExtend(r);break;default:throw Error("unexpected '"+e+"'")}}catch(s){throw s.message="Parse error at line "+this.tn.line+": "+s.message,s}return delete r.name,r},f.parse=function(e){return new f(e).parse()},h._readString=function(){var e,t,n="";do{if(t=this.tn.next(),"'"!==t&&'"'!==t)throw Error("illegal string delimiter: "+t);n+=this.tn.next(),this.tn.skip(t),e=this.tn.peek()}while('"'===e||'"'===e);return n},h._readValue=function(e){var n=this.tn.peek();if('"'===n||"'"===n)return this._readString();if(this.tn.next(),t.NUMBER.test(n))return r(n);if(t.BOOL.test(n))return"true"===n.toLowerCase();if(e&&t.TYPEREF.test(n))return n;throw Error("illegal value: "+n)},h._parseOption=function(e,n){var r=this.tn.next(),i=!1;if("("===r&&(i=!0,r=this.tn.next()),!t.TYPEREF.test(r))throw Error("illegal option name: "+r);var s=r;i&&(this.tn.skip(")"),s="("+s+")",r=this.tn.peek(),t.FQTYPEREF.test(r)&&(s+=r,this.tn.next())),this.tn.skip("="),this._parseOptionValue(e,s),n||this.tn.skip(";")},h._parseOptionValue=function(e,n){var r=this.tn.peek();if("{"!==r)i(e.options,n,this._readValue(!0));else for(this.tn.skip("{");"}"!==(r=this.tn.next());){if(!t.NAME.test(r))throw Error("illegal option name: "+n+"."+r);this.tn.omit(":")?i(e.options,n+"."+r,this._readValue(!0)):this._parseOptionValue(e,n+"."+r)}},h._parseService=function(e){var n=this.tn.next();if(!t.NAME.test(n))throw Error("illegal service name at line "+this.tn.line+": "+n);var r=n,i={name:r,rpc:{},options:{}};for(this.tn.skip("{");"}"!==(n=this.tn.next());)if("option"===n)this._parseOption(i);else{if("rpc"!==n)throw Error("illegal service token: "+n);this._parseServiceRPC(i)}this.tn.omit(";"),e.services.push(i)},h._parseServiceRPC=function(e){var n="rpc",r=this.tn.next();if(!t.NAME.test(r))throw Error("illegal rpc service method name: "+r);var i=r,s={request:null,response:null,request_stream:!1,response_stream:!1,options:{}};if(this.tn.skip("("),r=this.tn.next(),"stream"===r.toLowerCase()&&(s.request_stream=!0,r=this.tn.next()),!t.TYPEREF.test(r))throw Error("illegal rpc service request type: "+r);if(s.request=r,this.tn.skip(")"),r=this.tn.next(),"returns"!==r.toLowerCase())throw Error("illegal rpc service request type delimiter: "+r);if(this.tn.skip("("),r=this.tn.next(),"stream"===r.toLowerCase()&&(s.response_stream=!0,r=this.tn.next()),s.response=r,this.tn.skip(")"),r=this.tn.peek(),"{"===r){for(this.tn.next();"}"!==(r=this.tn.next());){if("option"!==r)throw Error("illegal rpc service token: "+r);this._parseOption(s)}this.tn.omit(";")}else this.tn.skip(";");"undefined"==typeof e[n]&&(e[n]={}),e[n][i]=s},h._parseMessage=function(e,r){var i=!!r,s=this.tn.next(),o={name:"",fields:[],enums:[],messages:[],options:{},services:[],oneofs:{}};if(!t.NAME.test(s))throw Error("illegal "+(i?"group":"message")+" name: "+s);for(o.name=s,i&&(this.tn.skip("="),r.id=n(this.tn.next()),o.isGroup=!0),s=this.tn.peek(),"["===s&&r&&this._parseFieldOptions(r),this.tn.skip("{");"}"!==(s=this.tn.next());)if(t.RULE.test(s))this._parseMessageField(o,s);else if("oneof"===s)this._parseMessageOneOf(o);else if("enum"===s)this._parseEnum(o);else if("message"===s)this._parseMessage(o);else if("option"===s)this._parseOption(o);else if("service"===s)this._parseService(o);else if("extensions"===s)o.extensions=this._parseExtensionRanges();else if("reserved"===s)this._parseIgnored();else if("extend"===s)this._parseExtend(o);else{if(!t.TYPEREF.test(s))throw Error("illegal message token: "+s);if(!this.proto3)throw Error("illegal field rule: "+s);this._parseMessageField(o,"optional",s)}return this.tn.omit(";"),e.messages.push(o),o},h._parseIgnored=function(){for(;";"!==this.tn.peek();)this.tn.next();this.tn.skip(";")},h._parseMessageField=function(e,r,i){if(!t.RULE.test(r))throw Error("illegal message field rule: "+r);var s,o={rule:r,type:"",name:"",options:{},id:0};if("map"===r){if(i)throw Error("illegal type: "+i);if(this.tn.skip("<"),s=this.tn.next(),!t.TYPE.test(s)&&!t.TYPEREF.test(s))throw Error("illegal message field type: "+s);if(o.keytype=s,this.tn.skip(","),s=this.tn.next(),!t.TYPE.test(s)&&!t.TYPEREF.test(s))throw Error("illegal message field: "+s);if(o.type=s,this.tn.skip(">"),s=this.tn.next(),!t.NAME.test(s))throw Error("illegal message field name: "+s);o.name=s,this.tn.skip("="),o.id=n(this.tn.next()),s=this.tn.peek(),"["===s&&this._parseFieldOptions(o),this.tn.skip(";")}else if(i="undefined"!=typeof i?i:this.tn.next(),"group"===i){var a=this._parseMessage(e,o);if(!/^[A-Z]/.test(a.name))throw Error("illegal group name: "+a.name);o.type=a.name,o.name=a.name.toLowerCase(),this.tn.omit(";")}else{if(!t.TYPE.test(i)&&!t.TYPEREF.test(i))throw Error("illegal message field type: "+i);if(o.type=i,s=this.tn.next(),!t.NAME.test(s))throw Error("illegal message field name: "+s);o.name=s,this.tn.skip("="),o.id=n(this.tn.next()),s=this.tn.peek(),"["===s&&this._parseFieldOptions(o),this.tn.skip(";")}return e.fields.push(o),o},h._parseMessageOneOf=function(e){var n=this.tn.next();if(!t.NAME.test(n))throw Error("illegal oneof name: "+n);var r,i=n,s=[];for(this.tn.skip("{");"}"!==(n=this.tn.next());)r=this._parseMessageField(e,"optional",n),r.oneof=i,s.push(r.id);this.tn.omit(";"),e.oneofs[i]=s},h._parseFieldOptions=function(e){this.tn.skip("[");for(var t,n=!0;"]"!==(t=this.tn.peek());)n||this.tn.skip(","),this._parseOption(e,!0),n=!1;this.tn.next()},h._parseEnum=function(e){var r={name:"",values:[],options:{}},i=this.tn.next();if(!t.NAME.test(i))throw Error("illegal name: "+i);for(r.name=i,this.tn.skip("{");"}"!==(i=this.tn.next());)if("option"===i)this._parseOption(r);else{if(!t.NAME.test(i))throw Error("illegal name: "+i);this.tn.skip("=");var s={name:i,id:n(this.tn.next(),!0)};i=this.tn.peek(),"["===i&&this._parseFieldOptions({options:{}}),this.tn.skip(";"),r.values.push(s)}this.tn.omit(";"),e.enums.push(r)},h._parseExtensionRanges=function(){var t,n,i,s=[];do{for(n=[];;){switch(t=this.tn.next()){case"min":i=e.ID_MIN;break;case"max":i=e.ID_MAX;break;default:i=r(t)}if(n.push(i),2===n.length)break;if("to"!==this.tn.peek()){n.push(i);break}this.tn.next()}s.push(n)}while(this.tn.omit(","));return this.tn.skip(";"),s},h._parseExtend=function(e){var n=this.tn.next();if(!t.TYPEREF.test(n))throw Error("illegal extend reference: "+n);var r={ref:n,fields:[]};for(this.tn.skip("{");"}"!==(n=this.tn.next());)if(t.RULE.test(n))this._parseMessageField(r,n);else{if(!t.TYPEREF.test(n))throw Error("illegal extend token: "+n);if(!this.proto3)throw Error("illegal field rule: "+n);this._parseMessageField(r,"optional",n)}return this.tn.omit(";"),e.messages.push(r),r},h.toString=function(){return"Parser at line "+this.tn.line},s.Parser=f,s}(i,i.Lang),i.Reflect=function(e){function n(n){if("string"==typeof n&&(n=e.TYPES[n]),"undefined"==typeof n.defaultValue)throw Error("default value for type "+n.name+" is not supported");return n==e.TYPES.bytes?new t(0):n.defaultValue}function r(t,n){if(t&&"number"==typeof t.low&&"number"==typeof t.high&&"boolean"==typeof t.unsigned&&t.low===t.low&&t.high===t.high)return new e.Long(t.low,t.high,"undefined"==typeof n?t.unsigned:n);if("string"==typeof t)return e.Long.fromString(t,n||!1,10);if("number"==typeof t)return e.Long.fromNumber(t,n||!1);throw Error("not convertible to Long")}function i(t,n){var r=n.readVarint32(),s=7&r,o=r>>>3;switch(s){case e.WIRE_TYPES.VARINT:do r=n.readUint8();while(128===(128&r));break;case e.WIRE_TYPES.BITS64:n.offset+=8;break;case e.WIRE_TYPES.LDELIM:r=n.readVarint32(),n.offset+=r;break;case e.WIRE_TYPES.STARTGROUP:i(o,n);break;case e.WIRE_TYPES.ENDGROUP:if(o===t)return!1;throw Error("Illegal GROUPEND after unknown group: "+o+" ("+t+" expected)");case e.WIRE_TYPES.BITS32:n.offset+=4;break;default:throw Error("Illegal wire type in unknown group "+t+": "+s)}return!0}var s={},o=function(e,t,n){this.builder=e,this.parent=t,this.name=n,this.className},a=o.prototype;a.fqn=function(){for(var e=this.name,t=this;;){if(t=t.parent,null==t)break;e=t.name+"."+e}return e},a.toString=function(e){return(e?this.className+" ":"")+this.fqn()},a.build=function(){throw Error(this.toString(!0)+" cannot be built directly")},s.T=o;var f=function(e,t,n,r,i){o.call(this,e,t,n),this.className="Namespace",this.children=[],this.options=r||{},this.syntax=i||"proto2"},h=f.prototype=Object.create(o.prototype);h.getChildren=function(e){if(e=e||null,null==e)return this.children.slice();for(var t=[],n=0,r=this.children.length;r>n;++n)this.children[n]instanceof e&&t.push(this.children[n]);return t},h.addChild=function(e){var t;if(t=this.getChild(e.name))if(t instanceof u.Field&&t.name!==t.originalName&&null===this.getChild(t.originalName))t.name=t.originalName;else{if(!(e instanceof u.Field&&e.name!==e.originalName&&null===this.getChild(e.originalName)))throw Error("Duplicate name in namespace "+this.toString(!0)+": "+e.name);e.name=e.originalName}this.children.push(e)},h.getChild=function(e){for(var t="number"==typeof e?"id":"name",n=0,r=this.children.length;r>n;++n)if(this.children[n][t]===e)return this.children[n];return null},h.resolve=function(e,t){var n="string"==typeof e?e.split("."):e,r=this,i=0;if(""===n[i]){for(;null!==r.parent;)r=r.parent;i++}var o;do{do{if(!(r instanceof s.Namespace)){r=null;break}if(o=r.getChild(n[i]),!o||!(o instanceof s.T)||t&&!(o instanceof s.Namespace)){r=null;break}r=o,i++}while(i<n.length);if(null!=r)break;if(null!==this.parent)return this.parent.resolve(e,t)}while(null!=r);return r},h.qn=function(e){var t=[],n=e;do t.unshift(n.name),n=n.parent;while(null!==n);for(var r=1;r<=t.length;r++){var i=t.slice(t.length-r);if(e===this.resolve(i,e instanceof s.Namespace))return i.join(".")}return e.fqn()},h.build=function(){for(var e,t={},n=this.children,r=0,i=n.length;i>r;++r)e=n[r],e instanceof f&&(t[e.name]=e.build());return Object.defineProperty&&Object.defineProperty(t,"$options",{value:this.buildOpt()}),t},h.buildOpt=function(){for(var e={},t=Object.keys(this.options),n=0,r=t.length;r>n;++n){var i=t[n],s=this.options[t[n]];e[i]=s}return e},h.getOption=function(e){return"undefined"==typeof e?this.options:"undefined"!=typeof this.options[e]?this.options[e]:null},s.Namespace=f;var c=function(t,n,r,i){if(this.type=t,this.resolvedType=n,this.isMapKey=r,this.syntax=i,r&&e.MAP_KEY_TYPES.indexOf(t)<0)throw Error("Invalid map key type: "+t.name)},l=c.prototype;c.defaultFieldValue=n,l.verifyValue=function(n){function i(e,t){throw Error("Illegal value for "+s.toString(!0)+" of type "+s.type.name+": "+e+" ("+t+")")}var s=this;switch(this.type){case e.TYPES.int32:case e.TYPES.sint32:case e.TYPES.sfixed32:return("number"!=typeof n||n===n&&n%1!==0)&&i(typeof n,"not an integer"),n>4294967295?0|n:n;case e.TYPES.uint32:case e.TYPES.fixed32:return("number"!=typeof n||n===n&&n%1!==0)&&i(typeof n,"not an integer"),0>n?n>>>0:n;case e.TYPES.int64:case e.TYPES.sint64:case e.TYPES.sfixed64:if(e.Long)try{return r(n,!1)}catch(o){i(typeof n,o.message)}else i(typeof n,"requires Long.js");case e.TYPES.uint64:case e.TYPES.fixed64:if(e.Long)try{return r(n,!0)}catch(o){i(typeof n,o.message)}else i(typeof n,"requires Long.js");case e.TYPES.bool:return"boolean"!=typeof n&&i(typeof n,"not a boolean"),n;case e.TYPES.float:case e.TYPES.double:return"number"!=typeof n&&i(typeof n,"not a number"),n;case e.TYPES.string:return"string"==typeof n||n&&n instanceof String||i(typeof n,"not a string"),""+n;case e.TYPES.bytes:return t.isByteBuffer(n)?n:t.wrap(n,"base64");case e.TYPES.enum:var a=this.resolvedType.getChildren(e.Reflect.Enum.Value);for(h=0;h<a.length;h++){if(a[h].name==n)return a[h].id;if(a[h].id==n)return a[h].id}if("proto3"===this.syntax)return("number"!=typeof n||n===n&&n%1!==0)&&i(typeof n,"not an integer"),(n>4294967295||0>n)&&i(typeof n,"not in range for uint32"),n;i(n,"not a valid enum value");case e.TYPES.group:case e.TYPES.message:if(n&&"object"==typeof n||i(typeof n,"object expected"),n instanceof this.resolvedType.clazz)return n;if(n instanceof e.Builder.Message){var f={};for(var h in n)n.hasOwnProperty(h)&&(f[h]=n[h]);n=f}return new this.resolvedType.clazz(n)}throw Error("[INTERNAL] Illegal value for "+this.toString(!0)+": "+n+" (undefined type "+this.type+")")},l.calculateLength=function(n,r){if(null===r)return 0;var i;switch(this.type){case e.TYPES.int32:return 0>r?t.calculateVarint64(r):t.calculateVarint32(r);case e.TYPES.uint32:return t.calculateVarint32(r);case e.TYPES.sint32:return t.calculateVarint32(t.zigZagEncode32(r));case e.TYPES.fixed32:case e.TYPES.sfixed32:case e.TYPES.float:return 4;case e.TYPES.int64:case e.TYPES.uint64:return t.calculateVarint64(r);case e.TYPES.sint64:return t.calculateVarint64(t.zigZagEncode64(r));case e.TYPES.fixed64:case e.TYPES.sfixed64:return 8;case e.TYPES.bool:return 1;case e.TYPES.enum:return t.calculateVarint32(r);case e.TYPES.double:return 8;case e.TYPES.string:return i=t.calculateUTF8Bytes(r),t.calculateVarint32(i)+i;case e.TYPES.bytes:if(r.remaining()<0)throw Error("Illegal value for "+this.toString(!0)+": "+r.remaining()+" bytes remaining");return t.calculateVarint32(r.remaining())+r.remaining();case e.TYPES.message:return i=this.resolvedType.calculate(r),t.calculateVarint32(i)+i;case e.TYPES.group:return i=this.resolvedType.calculate(r),i+t.calculateVarint32(n<<3|e.WIRE_TYPES.ENDGROUP)}throw Error("[INTERNAL] Illegal value to encode in "+this.toString(!0)+": "+r+" (unknown type)")},l.encodeValue=function(n,r,i){if(null===r)return i;switch(this.type){case e.TYPES.int32:0>r?i.writeVarint64(r):i.writeVarint32(r);break;case e.TYPES.uint32:i.writeVarint32(r);break;case e.TYPES.sint32:i.writeVarint32ZigZag(r);break;case e.TYPES.fixed32:i.writeUint32(r);break;case e.TYPES.sfixed32:i.writeInt32(r);break;case e.TYPES.int64:case e.TYPES.uint64:i.writeVarint64(r);break;case e.TYPES.sint64:i.writeVarint64ZigZag(r);break;case e.TYPES.fixed64:i.writeUint64(r);break;case e.TYPES.sfixed64:i.writeInt64(r);break;case e.TYPES.bool:"string"==typeof r?i.writeVarint32("false"===r.toLowerCase()?0:!!r):i.writeVarint32(r?1:0);break;case e.TYPES.enum:i.writeVarint32(r);break;case e.TYPES.float:i.writeFloat32(r);break;case e.TYPES.double:i.writeFloat64(r);break;case e.TYPES.string:i.writeVString(r);break;case e.TYPES.bytes:if(r.remaining()<0)throw Error("Illegal value for "+this.toString(!0)+": "+r.remaining()+" bytes remaining");var s=r.offset;i.writeVarint32(r.remaining()),i.append(r),r.offset=s;break;case e.TYPES.message:var o=(new t).LE();this.resolvedType.encode(r,o),i.writeVarint32(o.offset),i.append(o.flip());break;case e.TYPES.group:this.resolvedType.encode(r,i),i.writeVarint32(n<<3|e.WIRE_TYPES.ENDGROUP);break;default:throw Error("[INTERNAL] Illegal value to encode in "+this.toString(!0)+": "+r+" (unknown type)")}return i},l.decode=function(t,n,r){if(n!=this.type.wireType)throw Error("Unexpected wire type for element");var i,s;switch(this.type){case e.TYPES.int32:return 0|t.readVarint32();case e.TYPES.uint32:return t.readVarint32()>>>0;case e.TYPES.sint32:return 0|t.readVarint32ZigZag();case e.TYPES.fixed32:return t.readUint32()>>>0;case e.TYPES.sfixed32:return 0|t.readInt32();case e.TYPES.int64:return t.readVarint64();case e.TYPES.uint64:return t.readVarint64().toUnsigned();case e.TYPES.sint64:return t.readVarint64ZigZag();case e.TYPES.fixed64:
return t.readUint64();case e.TYPES.sfixed64:return t.readInt64();case e.TYPES.bool:return!!t.readVarint32();case e.TYPES.enum:return t.readVarint32();case e.TYPES.float:return t.readFloat();case e.TYPES.double:return t.readDouble();case e.TYPES.string:return t.readVString();case e.TYPES.bytes:if(s=t.readVarint32(),t.remaining()<s)throw Error("Illegal number of bytes for "+this.toString(!0)+": "+s+" required but got only "+t.remaining());return i=t.clone(),i.limit=i.offset+s,t.offset+=s,i;case e.TYPES.message:return s=t.readVarint32(),this.resolvedType.decode(t,s);case e.TYPES.group:return this.resolvedType.decode(t,-1,r)}throw Error("[INTERNAL] Illegal decode type")},l.valueFromString=function(n){if(!this.isMapKey)throw Error("valueFromString() called on non-map-key element");switch(this.type){case e.TYPES.int32:case e.TYPES.sint32:case e.TYPES.sfixed32:case e.TYPES.uint32:case e.TYPES.fixed32:return this.verifyValue(parseInt(n));case e.TYPES.int64:case e.TYPES.sint64:case e.TYPES.sfixed64:case e.TYPES.uint64:case e.TYPES.fixed64:return this.verifyValue(n);case e.TYPES.bool:return"true"===n;case e.TYPES.string:return this.verifyValue(n);case e.TYPES.bytes:return t.fromBinary(n)}},l.valueToString=function(t){if(!this.isMapKey)throw Error("valueToString() called on non-map-key element");return this.type===e.TYPES.bytes?t.toString("binary"):t.toString()},s.Element=c;var u=function(e,t,n,r,i,s){f.call(this,e,t,n,r,s),this.className="Message",this.extensions=void 0,this.clazz=null,this.isGroup=!!i,this._fields=null,this._fieldsById=null,this._fieldsByName=null},p=u.prototype=Object.create(f.prototype);p.build=function(n){if(this.clazz&&!n)return this.clazz;var r=function(e,n){function r(n,i,s,o){if(null===n||"object"!=typeof n){if(o&&o instanceof e.Reflect.Enum){var a=e.Reflect.Enum.getName(o.object,n);if(null!==a)return a}return n}if(t.isByteBuffer(n))return i?n.toBase64():n.toBuffer();if(e.Long.isLong(n))return s?n.toString():e.Long.fromValue(n);var f;if(Array.isArray(n))return f=[],n.forEach(function(e,t){f[t]=r(e,i,s,o)}),f;if(f={},n instanceof e.Map){for(var h=n.entries(),c=h.next();!c.done;c=h.next())f[n.keyElem.valueToString(c.value[0])]=r(c.value[1],i,s,n.valueElem.resolvedType);return f}var l=n.$type,u=void 0;for(var p in n)n.hasOwnProperty(p)&&(l&&(u=l.getChild(p))?f[p]=r(n[p],i,s,u.resolvedType):f[p]=r(n[p],i,s));return f}var i=n.getChildren(e.Reflect.Message.Field),s=n.getChildren(e.Reflect.Message.OneOf),o=function(r,a){e.Builder.Message.call(this);for(var f=0,h=s.length;h>f;++f)this[s[f].name]=null;for(f=0,h=i.length;h>f;++f){var c=i[f];this[c.name]=c.repeated?[]:c.map?new e.Map(c):null,!c.required&&"proto3"!==n.syntax||null===c.defaultValue||(this[c.name]=c.defaultValue)}if(arguments.length>0){var l;if(1!==arguments.length||null===r||"object"!=typeof r||!("function"!=typeof r.encode||r instanceof o)||Array.isArray(r)||r instanceof e.Map||t.isByteBuffer(r)||r instanceof ArrayBuffer||e.Long&&r instanceof e.Long)for(f=0,h=arguments.length;h>f;++f)"undefined"!=typeof(l=arguments[f])&&this.$set(i[f].name,l);else this.$set(r)}},a=o.prototype=Object.create(e.Builder.Message.prototype);a.add=function(t,r,i){var s=n._fieldsByName[t];if(!i){if(!s)throw Error(this+"#"+t+" is undefined");if(!(s instanceof e.Reflect.Message.Field))throw Error(this+"#"+t+" is not a field: "+s.toString(!0));if(!s.repeated)throw Error(this+"#"+t+" is not a repeated field");r=s.verifyValue(r,!0)}return null===this[t]&&(this[t]=[]),this[t].push(r),this},a.$add=a.add,a.set=function(t,r,i){if(t&&"object"==typeof t){i=r;for(var s in t)t.hasOwnProperty(s)&&"undefined"!=typeof(r=t[s])&&this.$set(s,r,i);return this}var o=n._fieldsByName[t];if(i)this[t]=r;else{if(!o)throw Error(this+"#"+t+" is not a field: undefined");if(!(o instanceof e.Reflect.Message.Field))throw Error(this+"#"+t+" is not a field: "+o.toString(!0));this[o.name]=r=o.verifyValue(r)}if(o&&o.oneof){var a=this[o.oneof.name];null!==r?(null!==a&&a!==o.name&&(this[a]=null),this[o.oneof.name]=o.name):a===t&&(this[o.oneof.name]=null)}return this},a.$set=a.set,a.get=function(t,r){if(r)return this[t];var i=n._fieldsByName[t];if(!(i&&i instanceof e.Reflect.Message.Field))throw Error(this+"#"+t+" is not a field: undefined");if(!(i instanceof e.Reflect.Message.Field))throw Error(this+"#"+t+" is not a field: "+i.toString(!0));return this[i.name]},a.$get=a.get;for(var f=0;f<i.length;f++){var h=i[f];h instanceof e.Reflect.Message.ExtensionField||n.builder.options.populateAccessors&&function(e){var t=e.originalName.replace(/(_[a-zA-Z])/g,function(e){return e.toUpperCase().replace("_","")});t=t.substring(0,1).toUpperCase()+t.substring(1);var r=e.originalName.replace(/([A-Z])/g,function(e){return"_"+e}),i=function(t,n){return this[e.name]=n?t:e.verifyValue(t),this},s=function(){return this[e.name]};null===n.getChild("set"+t)&&(a["set"+t]=i),null===n.getChild("set_"+r)&&(a["set_"+r]=i),null===n.getChild("get"+t)&&(a["get"+t]=s),null===n.getChild("get_"+r)&&(a["get_"+r]=s)}(h)}a.encode=function(e,r){"boolean"==typeof e&&(r=e,e=void 0);var i=!1;e||(e=new t,i=!0);var s=e.littleEndian;try{return n.encode(this,e.LE(),r),(i?e.flip():e).LE(s)}catch(o){throw e.LE(s),o}},o.encode=function(e,t,n){return new o(e).encode(t,n)},a.calculate=function(){return n.calculate(this)},a.encodeDelimited=function(e,r){var i=!1;e||(e=new t,i=!0);var s=(new t).LE();return n.encode(this,s,r).flip(),e.writeVarint32(s.remaining()),e.append(s),i?e.flip():e},a.encodeAB=function(){try{return this.encode().toArrayBuffer()}catch(e){throw e.encoded&&(e.encoded=e.encoded.toArrayBuffer()),e}},a.toArrayBuffer=a.encodeAB,a.encodeNB=function(){try{return this.encode().toBuffer()}catch(e){throw e.encoded&&(e.encoded=e.encoded.toBuffer()),e}},a.toBuffer=a.encodeNB,a.encode64=function(){try{return this.encode().toBase64()}catch(e){throw e.encoded&&(e.encoded=e.encoded.toBase64()),e}},a.toBase64=a.encode64,a.encodeHex=function(){try{return this.encode().toHex()}catch(e){throw e.encoded&&(e.encoded=e.encoded.toHex()),e}},a.toHex=a.encodeHex,a.toRaw=function(e,t){return r(this,!!e,!!t,this.$type)},a.encodeJSON=function(){return JSON.stringify(r(this,!0,!0,this.$type))},o.decode=function(e,r,i){"string"==typeof r&&(i=r,r=-1),"string"==typeof e&&(e=t.wrap(e,i?i:"base64")),e=t.isByteBuffer(e)?e:t.wrap(e);var s=e.littleEndian;try{var o=n.decode(e.LE());return e.LE(s),o}catch(a){throw e.LE(s),a}},o.decodeDelimited=function(e,r){if("string"==typeof e&&(e=t.wrap(e,r?r:"base64")),e=t.isByteBuffer(e)?e:t.wrap(e),e.remaining()<1)return null;var i=e.offset,s=e.readVarint32();if(e.remaining()<s)return e.offset=i,null;try{var o=n.decode(e.slice(e.offset,e.offset+s).LE());return e.offset+=s,o}catch(a){throw e.offset+=s,a}},o.decode64=function(e){return o.decode(e,"base64")},o.decodeHex=function(e){return o.decode(e,"hex")},o.decodeJSON=function(e){return new o(JSON.parse(e))},a.toString=function(){return n.toString()};return Object.defineProperty&&(Object.defineProperty(o,"$options",{value:n.buildOpt()}),Object.defineProperty(a,"$options",{value:o.$options}),Object.defineProperty(o,"$type",{value:n}),Object.defineProperty(a,"$type",{value:n})),o}(e,this);this._fields=[],this._fieldsById={},this._fieldsByName={};for(var i,s=0,o=this.children.length;o>s;s++)if(i=this.children[s],i instanceof v||i instanceof u||i instanceof b){if(r.hasOwnProperty(i.name))throw Error("Illegal reflect child of "+this.toString(!0)+": "+i.toString(!0)+" cannot override static property '"+i.name+"'");r[i.name]=i.build()}else if(i instanceof u.Field)i.build(),this._fields.push(i),this._fieldsById[i.id]=i,this._fieldsByName[i.name]=i;else if(!(i instanceof u.OneOf||i instanceof m))throw Error("Illegal reflect child of "+this.toString(!0)+": "+this.children[s].toString(!0));return this.clazz=r},p.encode=function(e,t,n){for(var r,i,s=null,o=0,a=this._fields.length;a>o;++o)r=this._fields[o],i=e[r.name],r.required&&null===i?null===s&&(s=r):r.encode(n?i:r.verifyValue(i),t,e);if(null!==s){var f=Error("Missing at least one required field for "+this.toString(!0)+": "+s);throw f.encoded=t,f}return t},p.calculate=function(e){for(var t,n,r=0,i=0,s=this._fields.length;s>i;++i){if(t=this._fields[i],n=e[t.name],t.required&&null===n)throw Error("Missing at least one required field for "+this.toString(!0)+": "+t);r+=t.calculate(n,e)}return r},p.decode=function(t,n,r){n="number"==typeof n?n:-1;for(var s,o,a,f,h=t.offset,c=new this.clazz;t.offset<h+n||-1===n&&t.remaining()>0;){if(s=t.readVarint32(),o=7&s,a=s>>>3,o===e.WIRE_TYPES.ENDGROUP){if(a!==r)throw Error("Illegal group end indicator for "+this.toString(!0)+": "+a+" ("+(r?r+" expected":"not a group")+")");break}if(f=this._fieldsById[a]){if(f.repeated&&!f.options.packed)c[f.name].push(f.decode(o,t));else if(f.map){var l=f.decode(o,t);c[f.name].set(l[0],l[1])}else if(c[f.name]=f.decode(o,t),f.oneof){var u=c[f.oneof.name];null!==u&&u!==f.name&&(c[u]=null),c[f.oneof.name]=f.name}}else switch(o){case e.WIRE_TYPES.VARINT:t.readVarint32();break;case e.WIRE_TYPES.BITS32:t.offset+=4;break;case e.WIRE_TYPES.BITS64:t.offset+=8;break;case e.WIRE_TYPES.LDELIM:var p=t.readVarint32();t.offset+=p;break;case e.WIRE_TYPES.STARTGROUP:for(;i(a,t););break;default:throw Error("Illegal wire type for unknown field "+a+" in "+this.toString(!0)+"#decode: "+o)}}for(var d=0,g=this._fields.length;g>d;++d)if(f=this._fields[d],null===c[f.name])if("proto3"===this.syntax)c[f.name]=f.defaultValue;else{if(f.required){var y=Error("Missing at least one required field for "+this.toString(!0)+": "+f.name);throw y.decoded=c,y}e.populateDefaults&&null!==f.defaultValue&&(c[f.name]=f.defaultValue)}return c},s.Message=u;var d=function(t,n,r,i,s,a,f,h,c,l){o.call(this,t,n,a),this.className="Message.Field",this.required="required"===r,this.repeated="repeated"===r,this.map="map"===r,this.keyType=i||null,this.type=s,this.resolvedType=null,this.id=f,this.options=h||{},this.defaultValue=null,this.oneof=c||null,this.syntax=l||"proto2",this.originalName=this.name,this.element=null,this.keyElement=null,!this.builder.options.convertFieldsToCamelCase||this instanceof u.ExtensionField||(this.name=e.Util.toCamelCase(this.name))},g=d.prototype=Object.create(o.prototype);g.build=function(){this.element=new c(this.type,this.resolvedType,!1,this.syntax),this.map&&(this.keyElement=new c(this.keyType,void 0,!0,this.syntax)),"proto3"!==this.syntax||this.repeated||this.map?"undefined"!=typeof this.options.default&&(this.defaultValue=this.verifyValue(this.options.default)):this.defaultValue=c.defaultFieldValue(this.type)},g.verifyValue=function(t,n){function r(e,t){throw Error("Illegal value for "+i.toString(!0)+" of type "+i.type.name+": "+e+" ("+t+")")}n=n||!1;var i=this;if(null===t)return this.required&&r(typeof t,"required"),"proto3"===this.syntax&&this.type!==e.TYPES.message&&r(typeof t,"proto3 field without field presence cannot be null"),null;var s;if(this.repeated&&!n){Array.isArray(t)||(t=[t]);var o=[];for(s=0;s<t.length;s++)o.push(this.element.verifyValue(t[s]));return o}return this.map&&!n?t instanceof e.Map?t:(t instanceof Object||r(typeof t,"expected ProtoBuf.Map or raw object for map field"),new e.Map(this,t)):(!this.repeated&&Array.isArray(t)&&r(typeof t,"no array expected"),this.element.verifyValue(t))},g.hasWirePresence=function(t,n){if("proto3"!==this.syntax)return null!==t;if(this.oneof&&n[this.oneof.name]===this.name)return!0;switch(this.type){case e.TYPES.int32:case e.TYPES.sint32:case e.TYPES.sfixed32:case e.TYPES.uint32:case e.TYPES.fixed32:return 0!==t;case e.TYPES.int64:case e.TYPES.sint64:case e.TYPES.sfixed64:case e.TYPES.uint64:case e.TYPES.fixed64:return 0!==t.low||0!==t.high;case e.TYPES.bool:return t;case e.TYPES.float:case e.TYPES.double:return 0!==t;case e.TYPES.string:return t.length>0;case e.TYPES.bytes:return t.remaining()>0;case e.TYPES.enum:return 0!==t;case e.TYPES.message:return null!==t;default:return!0}},g.encode=function(n,r,i){if(null===this.type||"object"!=typeof this.type)throw Error("[INTERNAL] Unresolved type in "+this.toString(!0)+": "+this.type);if(null===n||this.repeated&&0==n.length)return r;try{if(this.repeated){var s;if(this.options.packed&&e.PACKABLE_WIRE_TYPES.indexOf(this.type.wireType)>=0){r.writeVarint32(this.id<<3|e.WIRE_TYPES.LDELIM),r.ensureCapacity(r.offset+=1);var o=r.offset;for(s=0;s<n.length;s++)this.element.encodeValue(this.id,n[s],r);var a=r.offset-o,f=t.calculateVarint32(a);if(f>1){var h=r.slice(o,r.offset);o+=f-1,r.offset=o,r.append(h)}r.writeVarint32(a,o-f)}else for(s=0;s<n.length;s++)r.writeVarint32(this.id<<3|this.type.wireType),this.element.encodeValue(this.id,n[s],r)}else this.map?n.forEach(function(n,i,s){var o=t.calculateVarint32(8|this.keyType.wireType)+this.keyElement.calculateLength(1,i)+t.calculateVarint32(16|this.type.wireType)+this.element.calculateLength(2,n);r.writeVarint32(this.id<<3|e.WIRE_TYPES.LDELIM),r.writeVarint32(o),r.writeVarint32(8|this.keyType.wireType),this.keyElement.encodeValue(1,i,r),r.writeVarint32(16|this.type.wireType),this.element.encodeValue(2,n,r)},this):this.hasWirePresence(n,i)&&(r.writeVarint32(this.id<<3|this.type.wireType),this.element.encodeValue(this.id,n,r))}catch(c){throw Error("Illegal value for "+this.toString(!0)+": "+n+" ("+c+")")}return r},g.calculate=function(n,r){if(n=this.verifyValue(n),null===this.type||"object"!=typeof this.type)throw Error("[INTERNAL] Unresolved type in "+this.toString(!0)+": "+this.type);if(null===n||this.repeated&&0==n.length)return 0;var i=0;try{if(this.repeated){var s,o;if(this.options.packed&&e.PACKABLE_WIRE_TYPES.indexOf(this.type.wireType)>=0){for(i+=t.calculateVarint32(this.id<<3|e.WIRE_TYPES.LDELIM),o=0,s=0;s<n.length;s++)o+=this.element.calculateLength(this.id,n[s]);i+=t.calculateVarint32(o),i+=o}else for(s=0;s<n.length;s++)i+=t.calculateVarint32(this.id<<3|this.type.wireType),i+=this.element.calculateLength(this.id,n[s])}else this.map?n.forEach(function(n,r,s){var o=t.calculateVarint32(8|this.keyType.wireType)+this.keyElement.calculateLength(1,r)+t.calculateVarint32(16|this.type.wireType)+this.element.calculateLength(2,n);i+=t.calculateVarint32(this.id<<3|e.WIRE_TYPES.LDELIM),i+=t.calculateVarint32(o),i+=o},this):this.hasWirePresence(n,r)&&(i+=t.calculateVarint32(this.id<<3|this.type.wireType),i+=this.element.calculateLength(this.id,n))}catch(a){throw Error("Illegal value for "+this.toString(!0)+": "+n+" ("+a+")")}return i},g.decode=function(t,n,r){var i,s,o=!this.map&&t==this.type.wireType||!r&&this.repeated&&this.options.packed&&t==e.WIRE_TYPES.LDELIM||this.map&&t==e.WIRE_TYPES.LDELIM;if(!o)throw Error("Illegal wire type for field "+this.toString(!0)+": "+t+" ("+this.type.wireType+" expected)");if(t==e.WIRE_TYPES.LDELIM&&this.repeated&&this.options.packed&&e.PACKABLE_WIRE_TYPES.indexOf(this.type.wireType)>=0&&!r){s=n.readVarint32(),s=n.offset+s;for(var a=[];n.offset<s;)a.push(this.decode(this.type.wireType,n,!0));return a}if(this.map){var f=c.defaultFieldValue(this.keyType);if(i=c.defaultFieldValue(this.type),s=n.readVarint32(),n.remaining()<s)throw Error("Illegal number of bytes for "+this.toString(!0)+": "+s+" required but got only "+n.remaining());var h=n.clone();for(h.limit=h.offset+s,n.offset+=s;h.remaining()>0;){var l=h.readVarint32();t=7&l;var u=l>>>3;if(1===u)f=this.keyElement.decode(h,t,u);else{if(2!==u)throw Error("Unexpected tag in map field key/value submessage");i=this.element.decode(h,t,u)}}return[f,i]}return this.element.decode(n,t,this.id)},s.Message.Field=d;var y=function(e,t,n,r,i,s,o){d.call(this,e,t,n,null,r,i,s,o),this.extension};y.prototype=Object.create(d.prototype),s.Message.ExtensionField=y;var j=function(e,t,n){o.call(this,e,t,n),this.fields=[]};s.Message.OneOf=j;var v=function(e,t,n,r,i){f.call(this,e,t,n,r,i),this.className="Enum",this.object=null};v.getName=function(e,t){for(var n,r=Object.keys(e),i=0;i<r.length;++i)if(e[n=r[i]]===t)return n;return null};var w=v.prototype=Object.create(f.prototype);w.build=function(t){if(this.object&&!t)return this.object;for(var n=new e.Builder.Enum,r=this.getChildren(v.Value),i=0,s=r.length;s>i;++i)n[r[i].name]=r[i].id;return Object.defineProperty&&Object.defineProperty(n,"$options",{value:this.buildOpt(),enumerable:!1}),this.object=n},s.Enum=v;var _=function(e,t,n,r){o.call(this,e,t,n),this.className="Enum.Value",this.id=r};_.prototype=Object.create(o.prototype),s.Enum.Value=_;var m=function(e,t,n,r){o.call(this,e,t,n),this.field=r};m.prototype=Object.create(o.prototype),s.Extension=m;var b=function(e,t,n,r){f.call(this,e,t,n,r),this.className="Service",this.clazz=null},E=b.prototype=Object.create(f.prototype);E.build=function(n){return this.clazz&&!n?this.clazz:this.clazz=function(e,n){for(var r=function(t){e.Builder.Service.call(this),this.rpcImpl=t||function(e,t,n){setTimeout(n.bind(this,Error("Not implemented, see: https://github.com/dcodeIO/ProtoBuf.js/wiki/Services")),0)}},i=r.prototype=Object.create(e.Builder.Service.prototype),s=n.getChildren(e.Reflect.Service.RPCMethod),o=0;o<s.length;o++)!function(e){i[e.name]=function(r,i){try{try{r=e.resolvedRequestType.clazz.decode(t.wrap(r))}catch(s){if(!(s instanceof TypeError))throw s}if(null===r||"object"!=typeof r)throw Error("Illegal arguments");r instanceof e.resolvedRequestType.clazz||(r=new e.resolvedRequestType.clazz(r)),this.rpcImpl(e.fqn(),r,function(t,r){if(t)return void i(t);null===r&&(r="");try{r=e.resolvedResponseType.clazz.decode(r)}catch(s){}return r&&r instanceof e.resolvedResponseType.clazz?void i(null,r):void i(Error("Illegal response type received in service method "+n.name+"#"+e.name))})}catch(s){setTimeout(i.bind(this,s),0)}},r[e.name]=function(t,n,i){new r(t)[e.name](n,i)},Object.defineProperty&&(Object.defineProperty(r[e.name],"$options",{value:e.buildOpt()}),Object.defineProperty(i[e.name],"$options",{value:r[e.name].$options}))}(s[o]);return Object.defineProperty&&(Object.defineProperty(r,"$options",{value:n.buildOpt()}),Object.defineProperty(i,"$options",{value:r.$options}),Object.defineProperty(r,"$type",{value:n}),Object.defineProperty(i,"$type",{value:n})),r}(e,this)},s.Service=b;var S=function(e,t,n,r){o.call(this,e,t,n),this.className="Service.Method",this.options=r||{}},T=S.prototype=Object.create(o.prototype);T.buildOpt=h.buildOpt,s.Service.Method=S;var k=function(e,t,n,r,i,s,o,a){S.call(this,e,t,n,a),this.className="Service.RPCMethod",this.requestName=r,this.responseName=i,this.requestStream=s,this.responseStream=o,this.resolvedRequestType=null,this.resolvedResponseType=null};return k.prototype=Object.create(S.prototype),s.Service.RPCMethod=k,s}(i),i.Builder=function(e,t,r){function i(e){e.messages&&e.messages.forEach(function(t){t.syntax=e.syntax,i(t)}),e.enums&&e.enums.forEach(function(t){t.syntax=e.syntax})}var s=function(e){this.ns=new r.Namespace(this,null,""),this.ptr=this.ns,this.resolved=!1,this.result=null,this.files={},this.importRoot=null,this.options=e||{}},o=s.prototype;return s.isMessage=function(e){return"string"!=typeof e.name?!1:"undefined"==typeof e.values&&"undefined"==typeof e.rpc},s.isMessageField=function(e){return"string"==typeof e.rule&&"string"==typeof e.name&&"string"==typeof e.type&&"undefined"!=typeof e.id},s.isEnum=function(e){return"string"!=typeof e.name?!1:!("undefined"==typeof e.values||!Array.isArray(e.values)||0===e.values.length)},s.isService=function(e){return!("string"!=typeof e.name||"object"!=typeof e.rpc||!e.rpc)},s.isExtend=function(e){return"string"==typeof e.ref},o.reset=function(){return this.ptr=this.ns,this},o.define=function(e){if("string"!=typeof e||!t.TYPEREF.test(e))throw Error("illegal namespace: "+e);return e.split(".").forEach(function(e){var t=this.ptr.getChild(e);null===t&&this.ptr.addChild(t=new r.Namespace(this,this.ptr,e)),this.ptr=t},this),this},o.create=function(t){if(!t)return this;if(Array.isArray(t)){if(0===t.length)return this;t=t.slice()}else t=[t];for(var n=[t];n.length>0;){if(t=n.pop(),!Array.isArray(t))throw Error("not a valid namespace: "+JSON.stringify(t));for(;t.length>0;){var i=t.shift();if(s.isMessage(i)){var o=new r.Message(this,this.ptr,i.name,i.options,i.isGroup,i.syntax),a={};i.oneofs&&Object.keys(i.oneofs).forEach(function(e){o.addChild(a[e]=new r.Message.OneOf(this,o,e))},this),i.fields&&i.fields.forEach(function(e){if(null!==o.getChild(0|e.id))throw Error("duplicate or invalid field id in "+o.name+": "+e.id);if(e.options&&"object"!=typeof e.options)throw Error("illegal field options in "+o.name+"#"+e.name);var t=null;if("string"==typeof e.oneof&&!(t=a[e.oneof]))throw Error("illegal oneof in "+o.name+"#"+e.name+": "+e.oneof);e=new r.Message.Field(this,o,e.rule,e.keytype,e.type,e.name,e.id,e.options,t,i.syntax),t&&t.fields.push(e),o.addChild(e)},this);var f=[];if(i.enums&&i.enums.forEach(function(e){f.push(e)}),i.messages&&i.messages.forEach(function(e){f.push(e)}),i.services&&i.services.forEach(function(e){f.push(e)}),i.extensions&&("number"==typeof i.extensions[0]?o.extensions=[i.extensions]:o.extensions=i.extensions),this.ptr.addChild(o),f.length>0){n.push(t),t=f,f=null,this.ptr=o,o=null;continue}f=null}else if(s.isEnum(i))o=new r.Enum(this,this.ptr,i.name,i.options,i.syntax),i.values.forEach(function(e){o.addChild(new r.Enum.Value(this,o,e.name,e.id))},this),this.ptr.addChild(o);else if(s.isService(i))o=new r.Service(this,this.ptr,i.name,i.options),Object.keys(i.rpc).forEach(function(e){var t=i.rpc[e];o.addChild(new r.Service.RPCMethod(this,o,e,t.request,t.response,!!t.request_stream,!!t.response_stream,t.options))},this),this.ptr.addChild(o);else{if(!s.isExtend(i))throw Error("not a valid definition: "+JSON.stringify(i));if(o=this.ptr.resolve(i.ref,!0))i.fields.forEach(function(t){if(null!==o.getChild(0|t.id))throw Error("duplicate extended field id in "+o.name+": "+t.id);if(o.extensions){var n=!1;if(o.extensions.forEach(function(e){t.id>=e[0]&&t.id<=e[1]&&(n=!0)}),!n)throw Error("illegal extended field id in "+o.name+": "+t.id+" (not within valid ranges)")}var i=t.name;this.options.convertFieldsToCamelCase&&(i=e.Util.toCamelCase(i));var s=new r.Message.ExtensionField(this,o,t.rule,t.type,this.ptr.fqn()+"."+i,t.id,t.options),a=new r.Extension(this,this.ptr,t.name,s);s.extension=a,this.ptr.addChild(a),o.addChild(s)},this);else if(!/\.?google\.protobuf\./.test(i.ref))throw Error("extended message "+i.ref+" is not defined")}i=null,o=null}t=null,this.ptr=this.ptr.parent}return this.resolved=!1,this.result=null,this},o.import=function(t,r){var s="/";if("string"==typeof r){if(e.Util.IS_NODE&&(r=n(119).resolve(r)),this.files[r]===!0)return this.reset();this.files[r]=!0}else if("object"==typeof r){var o=r.root;e.Util.IS_NODE&&(o=n(119).resolve(o)),(o.indexOf("\\")>=0||r.file.indexOf("\\")>=0)&&(s="\\");var a=o+s+r.file;if(this.files[a]===!0)return this.reset();this.files[a]=!0}if(t.imports&&t.imports.length>0){var f,h=!1;"object"==typeof r?(this.importRoot=r.root,h=!0,f=this.importRoot,r=r.file,(f.indexOf("\\")>=0||r.indexOf("\\")>=0)&&(s="\\")):"string"==typeof r?this.importRoot?f=this.importRoot:r.indexOf("/")>=0?(f=r.replace(/\/[^\/]*$/,""),""===f&&(f="/")):r.indexOf("\\")>=0?(f=r.replace(/\\[^\\]*$/,""),s="\\"):f=".":f=null;for(var c=0;c<t.imports.length;c++)if("string"==typeof t.imports[c]){if(!f)throw Error("cannot determine import root");var l=t.imports[c];if("google/protobuf/descriptor.proto"===l)continue;if(l=f+s+l,this.files[l]===!0)continue;/\.proto$/i.test(l)&&!e.DotProto&&(l=l.replace(/\.proto$/,".json"));var u=e.Util.fetch(l);if(null===u)throw Error("failed to import '"+l+"' in '"+r+"': file not found");/\.json$/i.test(l)?this.import(JSON.parse(u+""),l):this.import(e.DotProto.Parser.parse(u),l)}else r?/\.(\w+)$/.test(r)?this.import(t.imports[c],r.replace(/^(.+)\.(\w+)$/,function(e,t,n){return t+"_import"+c+"."+n})):this.import(t.imports[c],r+"_import"+c):this.import(t.imports[c]);h&&(this.importRoot=null)}t.package&&this.define(t.package),t.syntax&&i(t);var p=this.ptr;return t.options&&Object.keys(t.options).forEach(function(e){p.options[e]=t.options[e]}),t.messages&&(this.create(t.messages),this.ptr=p),t.enums&&(this.create(t.enums),this.ptr=p),t.services&&(this.create(t.services),this.ptr=p),t.extends&&this.create(t.extends),this.reset()},o.resolveAll=function(){var n;if(null==this.ptr||"object"==typeof this.ptr.type)return this;if(this.ptr instanceof r.Namespace)this.ptr.children.forEach(function(e){this.ptr=e,this.resolveAll()},this);else if(this.ptr instanceof r.Message.Field){if(t.TYPE.test(this.ptr.type))this.ptr.type=e.TYPES[this.ptr.type];else{if(!t.TYPEREF.test(this.ptr.type))throw Error("illegal type reference in "+this.ptr.toString(!0)+": "+this.ptr.type);if(n=(this.ptr instanceof r.Message.ExtensionField?this.ptr.extension.parent:this.ptr.parent).resolve(this.ptr.type,!0),!n)throw Error("unresolvable type reference in "+this.ptr.toString(!0)+": "+this.ptr.type);if(this.ptr.resolvedType=n,n instanceof r.Enum){if(this.ptr.type=e.TYPES.enum,"proto3"===this.ptr.syntax&&"proto3"!==n.syntax)throw Error("proto3 message cannot reference proto2 enum")}else{if(!(n instanceof r.Message))throw Error("illegal type reference in "+this.ptr.toString(!0)+": "+this.ptr.type);this.ptr.type=n.isGroup?e.TYPES.group:e.TYPES.message}}if(this.ptr.map){if(!t.TYPE.test(this.ptr.keyType))throw Error("illegal key type for map field in "+this.ptr.toString(!0)+": "+this.ptr.keyType);this.ptr.keyType=e.TYPES[this.ptr.keyType]}}else if(this.ptr instanceof e.Reflect.Service.Method){if(!(this.ptr instanceof e.Reflect.Service.RPCMethod))throw Error("illegal service type in "+this.ptr.toString(!0));if(n=this.ptr.parent.resolve(this.ptr.requestName,!0),!(n&&n instanceof e.Reflect.Message))throw Error("Illegal type reference in "+this.ptr.toString(!0)+": "+this.ptr.requestName);if(this.ptr.resolvedRequestType=n,n=this.ptr.parent.resolve(this.ptr.responseName,!0),!(n&&n instanceof e.Reflect.Message))throw Error("Illegal type reference in "+this.ptr.toString(!0)+": "+this.ptr.responseName);this.ptr.resolvedResponseType=n}else if(!(this.ptr instanceof e.Reflect.Message.OneOf||this.ptr instanceof e.Reflect.Extension||this.ptr instanceof e.Reflect.Enum.Value))throw Error("illegal object in namespace: "+typeof this.ptr+": "+this.ptr);return this.reset()},o.build=function(e){if(this.reset(),this.resolved||(this.resolveAll(),this.resolved=!0,this.result=null),null===this.result&&(this.result=this.ns.build()),!e)return this.result;for(var t="string"==typeof e?e.split("."):e,n=this.result,r=0;r<t.length;r++){if(!n[t[r]]){n=null;break}n=n[t[r]]}return n},o.lookup=function(e,t){return e?this.ns.resolve(e,t):this.ns},o.toString=function(){return"Builder"},s.Message=function(){},s.Enum=function(){},s.Service=function(){},s}(i,i.Lang,i.Reflect),i.Map=function(e,t){function n(e){var t=0;return{next:function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}}var r=function(e,n){if(!e.map)throw Error("field is not a map");if(this.field=e,this.keyElem=new t.Element(e.keyType,null,!0,e.syntax),this.valueElem=new t.Element(e.type,e.resolvedType,!1,e.syntax),this.map={},Object.defineProperty(this,"size",{get:function(){return Object.keys(this.map).length}}),n)for(var r=Object.keys(n),i=0;i<r.length;i++){var s=this.keyElem.valueFromString(r[i]),o=this.valueElem.verifyValue(n[r[i]]);this.map[this.keyElem.valueToString(s)]={key:s,value:o}}},i=r.prototype;return i.clear=function(){this.map={}},i.delete=function(e){var t=this.keyElem.valueToString(this.keyElem.verifyValue(e)),n=t in this.map;return delete this.map[t],n},i.entries=function(){for(var e,t=[],r=Object.keys(this.map),i=0;i<r.length;i++)t.push([(e=this.map[r[i]]).key,e.value]);return n(t)},i.keys=function(){for(var e=[],t=Object.keys(this.map),r=0;r<t.length;r++)e.push(this.map[t[r]].key);return n(e)},i.values=function(){for(var e=[],t=Object.keys(this.map),r=0;r<t.length;r++)e.push(this.map[t[r]].value);return n(e)},i.forEach=function(e,t){for(var n,r=Object.keys(this.map),i=0;i<r.length;i++)e.call(t,(n=this.map[r[i]]).value,n.key,this)},i.set=function(e,t){var n=this.keyElem.verifyValue(e),r=this.valueElem.verifyValue(t);return this.map[this.keyElem.valueToString(n)]={key:n,value:r},this},i.get=function(e){var t=this.keyElem.valueToString(this.keyElem.verifyValue(e));if(t in this.map)return this.map[t].value},i.has=function(e){var t=this.keyElem.valueToString(this.keyElem.verifyValue(e));return t in this.map},r}(i,i.Reflect),i.loadProto=function(e,t,n){return("string"==typeof t||t&&"string"==typeof t.file&&"string"==typeof t.root)&&(n=t,t=void 0),i.loadJson(i.DotProto.Parser.parse(e),t,n)},i.protoFromString=i.loadProto,i.loadProtoFile=function(e,t,n){if(t&&"object"==typeof t?(n=t,t=null):t&&"function"==typeof t||(t=null),t)return i.Util.fetch("string"==typeof e?e:e.root+"/"+e.file,function(r){if(null===r)return void t(Error("Failed to fetch file"));try{t(null,i.loadProto(r,n,e))}catch(s){t(s)}});var r=i.Util.fetch("object"==typeof e?e.root+"/"+e.file:e);return null===r?null:i.loadProto(r,n,e)},i.protoFromFile=i.loadProtoFile,i.newBuilder=function(e){return e=e||{},"undefined"==typeof e.convertFieldsToCamelCase&&(e.convertFieldsToCamelCase=i.convertFieldsToCamelCase),"undefined"==typeof e.populateAccessors&&(e.populateAccessors=i.populateAccessors),new i.Builder(e)},i.loadJson=function(e,t,n){return("string"==typeof t||t&&"string"==typeof t.file&&"string"==typeof t.root)&&(n=t,t=null),t&&"object"==typeof t||(t=i.newBuilder()),"string"==typeof e&&(e=JSON.parse(e)),t.import(e,n),t.resolveAll(),t},i.loadJsonFile=function(e,t,n){if(t&&"object"==typeof t?(n=t,t=null):t&&"function"==typeof t||(t=null),t)return i.Util.fetch("string"==typeof e?e:e.root+"/"+e.file,function(r){if(null===r)return void t(Error("Failed to fetch file"));try{t(null,i.loadJson(JSON.parse(r),n,e))}catch(s){t(s)}});var r=i.Util.fetch("object"==typeof e?e.root+"/"+e.file:e);return null===r?null:i.loadJson(JSON.parse(r),n,e)},i})}).call(t,n(114),n(106)(e))},,,function(e,t,n){var r,i,s;(function(e){!function(o,a){n(115).amd?(i=[n(117)],r=a,s="function"==typeof r?r.apply(t,i):r,!(void 0!==s&&(e.exports=s))):"object"==typeof e&&e&&e.exports?e.exports=function(){var e;try{e=n(117)}catch(t){}return a(e)}():(o.dcodeIO=o.dcodeIO||{}).ByteBuffer=a(o.dcodeIO.Long)}(this,function(e){"use strict";function t(e){var t=0;return function(){return t<e.length?e.charCodeAt(t++):null}}function n(){var e=[],t=[];return function(){return 0===arguments.length?t.join("")+f.apply(String,e):(e.length+arguments.length>1024&&(t.push(f.apply(String,e)),e.length=0),void Array.prototype.push.apply(e,arguments))}}function r(e,t,n,r,i){var s,o,a=8*i-r-1,f=(1<<a)-1,h=f>>1,c=-7,l=n?i-1:0,u=n?-1:1,p=e[t+l];for(l+=u,s=p&(1<<-c)-1,p>>=-c,c+=a;c>0;s=256*s+e[t+l],l+=u,c-=8);for(o=s&(1<<-c)-1,s>>=-c,c+=r;c>0;o=256*o+e[t+l],l+=u,c-=8);if(0===s)s=1-h;else{if(s===f)return o?NaN:(p?-1:1)*(1/0);o+=Math.pow(2,r),s-=h}return(p?-1:1)*o*Math.pow(2,s-r)}function i(e,t,n,r,i,s){var o,a,f,h=8*s-i-1,c=(1<<h)-1,l=c>>1,u=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:s-1,d=r?1:-1,g=0>t||0===t&&0>1/t?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,o=c):(o=Math.floor(Math.log(t)/Math.LN2),t*(f=Math.pow(2,-o))<1&&(o--,f*=2),t+=o+l>=1?u/f:u*Math.pow(2,1-l),t*f>=2&&(o++,f/=2),o+l>=c?(a=0,o=c):o+l>=1?(a=(t*f-1)*Math.pow(2,i),o+=l):(a=t*Math.pow(2,l-1)*Math.pow(2,i),o=0));i>=8;e[n+p]=255&a,p+=d,a/=256,i-=8);for(o=o<<i|a,h+=i;h>0;e[n+p]=255&o,p+=d,o/=256,h-=8);e[n+p-d]|=128*g}var s=function(e,t,n){if("undefined"==typeof e&&(e=s.DEFAULT_CAPACITY),"undefined"==typeof t&&(t=s.DEFAULT_ENDIAN),"undefined"==typeof n&&(n=s.DEFAULT_NOASSERT),!n){if(e=0|e,0>e)throw RangeError("Illegal capacity");t=!!t,n=!!n}this.buffer=0===e?a:new ArrayBuffer(e),this.view=0===e?null:new Uint8Array(this.buffer),this.offset=0,this.markedOffset=-1,this.limit=e,this.littleEndian=t,this.noAssert=n};s.VERSION="5.0.1",s.LITTLE_ENDIAN=!0,s.BIG_ENDIAN=!1,s.DEFAULT_CAPACITY=16,s.DEFAULT_ENDIAN=s.BIG_ENDIAN,s.DEFAULT_NOASSERT=!1,s.Long=e||null;var o=s.prototype;o.__isByteBuffer__,Object.defineProperty(o,"__isByteBuffer__",{value:!0,enumerable:!1,configurable:!1});var a=new ArrayBuffer(0),f=String.fromCharCode;
s.accessor=function(){return Uint8Array},s.allocate=function(e,t,n){return new s(e,t,n)},s.concat=function(e,t,n,r){"boolean"!=typeof t&&"string"==typeof t||(r=n,n=t,t=void 0);for(var i,o=0,a=0,f=e.length;f>a;++a)s.isByteBuffer(e[a])||(e[a]=s.wrap(e[a],t)),i=e[a].limit-e[a].offset,i>0&&(o+=i);if(0===o)return new s(0,n,r);var h,c=new s(o,n,r);for(a=0;f>a;)h=e[a++],i=h.limit-h.offset,0>=i||(c.view.set(h.view.subarray(h.offset,h.limit),c.offset),c.offset+=i);return c.limit=c.offset,c.offset=0,c},s.isByteBuffer=function(e){return(e&&e.__isByteBuffer__)===!0},s.type=function(){return ArrayBuffer},s.wrap=function(e,t,n,r){if("string"!=typeof t&&(r=n,n=t,t=void 0),"string"==typeof e)switch("undefined"==typeof t&&(t="utf8"),t){case"base64":return s.fromBase64(e,n);case"hex":return s.fromHex(e,n);case"binary":return s.fromBinary(e,n);case"utf8":return s.fromUTF8(e,n);case"debug":return s.fromDebug(e,n);default:throw Error("Unsupported encoding: "+t)}if(null===e||"object"!=typeof e)throw TypeError("Illegal buffer");var i;if(s.isByteBuffer(e))return i=o.clone.call(e),i.markedOffset=-1,i;if(e instanceof Uint8Array)i=new s(0,n,r),e.length>0&&(i.buffer=e.buffer,i.offset=e.byteOffset,i.limit=e.byteOffset+e.byteLength,i.view=new Uint8Array(e.buffer));else if(e instanceof ArrayBuffer)i=new s(0,n,r),e.byteLength>0&&(i.buffer=e,i.offset=0,i.limit=e.byteLength,i.view=e.byteLength>0?new Uint8Array(e):null);else{if("[object Array]"!==Object.prototype.toString.call(e))throw TypeError("Illegal buffer");i=new s(e.length,n,r),i.limit=e.length;for(var a=0;a<e.length;++a)i.view[a]=e[a]}return i},o.writeBitSet=function(e,t){var n="undefined"==typeof t;if(n&&(t=this.offset),!this.noAssert){if(!(e instanceof Array))throw TypeError("Illegal BitSet: Not an array");if("number"!=typeof t||t%1!==0)throw TypeError("Illegal offset: "+t+" (not an integer)");if(t>>>=0,0>t||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}var r,i=t,s=e.length,o=s>>3,a=0;for(t+=this.writeVarint32(s,t);o--;)r=1&!!e[a++]|(1&!!e[a++])<<1|(1&!!e[a++])<<2|(1&!!e[a++])<<3|(1&!!e[a++])<<4|(1&!!e[a++])<<5|(1&!!e[a++])<<6|(1&!!e[a++])<<7,this.writeByte(r,t++);if(s>a){var f=0;for(r=0;s>a;)r|=(1&!!e[a++])<<f++;this.writeByte(r,t++)}return n?(this.offset=t,this):t-i},o.readBitSet=function(e){var t="undefined"==typeof e;t&&(e=this.offset);var n,r=this.readVarint32(e),i=r.value,s=i>>3,o=0,a=[];for(e+=r.length;s--;)n=this.readByte(e++),a[o++]=!!(1&n),a[o++]=!!(2&n),a[o++]=!!(4&n),a[o++]=!!(8&n),a[o++]=!!(16&n),a[o++]=!!(32&n),a[o++]=!!(64&n),a[o++]=!!(128&n);if(i>o){var f=0;for(n=this.readByte(e++);i>o;)a[o++]=!!(n>>f++&1)}return t&&(this.offset=e),a},o.readBytes=function(e,t){var n="undefined"==typeof t;if(n&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!==0)throw TypeError("Illegal offset: "+t+" (not an integer)");if(t>>>=0,0>t||t+e>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+"+e+") <= "+this.buffer.byteLength)}var r=this.slice(t,t+e);return n&&(this.offset+=e),r},o.writeBytes=o.append,o.writeInt8=function(e,t){var n="undefined"==typeof t;if(n&&(t=this.offset),!this.noAssert){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e|=0,"number"!=typeof t||t%1!==0)throw TypeError("Illegal offset: "+t+" (not an integer)");if(t>>>=0,0>t||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=1;var r=this.buffer.byteLength;return t>r&&this.resize((r*=2)>t?r:t),t-=1,this.view[t]=e,n&&(this.offset+=1),this},o.writeByte=o.writeInt8,o.readInt8=function(e){var t="undefined"==typeof e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,0>e||e+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+1) <= "+this.buffer.byteLength)}var n=this.view[e];return 128===(128&n)&&(n=-(255-n+1)),t&&(this.offset+=1),n},o.readByte=o.readInt8,o.writeUint8=function(e,t){var n="undefined"==typeof t;if(n&&(t=this.offset),!this.noAssert){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e>>>=0,"number"!=typeof t||t%1!==0)throw TypeError("Illegal offset: "+t+" (not an integer)");if(t>>>=0,0>t||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=1;var r=this.buffer.byteLength;return t>r&&this.resize((r*=2)>t?r:t),t-=1,this.view[t]=e,n&&(this.offset+=1),this},o.writeUInt8=o.writeUint8,o.readUint8=function(e){var t="undefined"==typeof e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,0>e||e+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+1) <= "+this.buffer.byteLength)}var n=this.view[e];return t&&(this.offset+=1),n},o.readUInt8=o.readUint8,o.writeInt16=function(e,t){var n="undefined"==typeof t;if(n&&(t=this.offset),!this.noAssert){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e|=0,"number"!=typeof t||t%1!==0)throw TypeError("Illegal offset: "+t+" (not an integer)");if(t>>>=0,0>t||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=2;var r=this.buffer.byteLength;return t>r&&this.resize((r*=2)>t?r:t),t-=2,this.littleEndian?(this.view[t+1]=(65280&e)>>>8,this.view[t]=255&e):(this.view[t]=(65280&e)>>>8,this.view[t+1]=255&e),n&&(this.offset+=2),this},o.writeShort=o.writeInt16,o.readInt16=function(e){var t="undefined"==typeof e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,0>e||e+2>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+2) <= "+this.buffer.byteLength)}var n=0;return this.littleEndian?(n=this.view[e],n|=this.view[e+1]<<8):(n=this.view[e]<<8,n|=this.view[e+1]),32768===(32768&n)&&(n=-(65535-n+1)),t&&(this.offset+=2),n},o.readShort=o.readInt16,o.writeUint16=function(e,t){var n="undefined"==typeof t;if(n&&(t=this.offset),!this.noAssert){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e>>>=0,"number"!=typeof t||t%1!==0)throw TypeError("Illegal offset: "+t+" (not an integer)");if(t>>>=0,0>t||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=2;var r=this.buffer.byteLength;return t>r&&this.resize((r*=2)>t?r:t),t-=2,this.littleEndian?(this.view[t+1]=(65280&e)>>>8,this.view[t]=255&e):(this.view[t]=(65280&e)>>>8,this.view[t+1]=255&e),n&&(this.offset+=2),this},o.writeUInt16=o.writeUint16,o.readUint16=function(e){var t="undefined"==typeof e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,0>e||e+2>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+2) <= "+this.buffer.byteLength)}var n=0;return this.littleEndian?(n=this.view[e],n|=this.view[e+1]<<8):(n=this.view[e]<<8,n|=this.view[e+1]),t&&(this.offset+=2),n},o.readUInt16=o.readUint16,o.writeInt32=function(e,t){var n="undefined"==typeof t;if(n&&(t=this.offset),!this.noAssert){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e|=0,"number"!=typeof t||t%1!==0)throw TypeError("Illegal offset: "+t+" (not an integer)");if(t>>>=0,0>t||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=4;var r=this.buffer.byteLength;return t>r&&this.resize((r*=2)>t?r:t),t-=4,this.littleEndian?(this.view[t+3]=e>>>24&255,this.view[t+2]=e>>>16&255,this.view[t+1]=e>>>8&255,this.view[t]=255&e):(this.view[t]=e>>>24&255,this.view[t+1]=e>>>16&255,this.view[t+2]=e>>>8&255,this.view[t+3]=255&e),n&&(this.offset+=4),this},o.writeInt=o.writeInt32,o.readInt32=function(e){var t="undefined"==typeof e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,0>e||e+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+4) <= "+this.buffer.byteLength)}var n=0;return this.littleEndian?(n=this.view[e+2]<<16,n|=this.view[e+1]<<8,n|=this.view[e],n+=this.view[e+3]<<24>>>0):(n=this.view[e+1]<<16,n|=this.view[e+2]<<8,n|=this.view[e+3],n+=this.view[e]<<24>>>0),n|=0,t&&(this.offset+=4),n},o.readInt=o.readInt32,o.writeUint32=function(e,t){var n="undefined"==typeof t;if(n&&(t=this.offset),!this.noAssert){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e>>>=0,"number"!=typeof t||t%1!==0)throw TypeError("Illegal offset: "+t+" (not an integer)");if(t>>>=0,0>t||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=4;var r=this.buffer.byteLength;return t>r&&this.resize((r*=2)>t?r:t),t-=4,this.littleEndian?(this.view[t+3]=e>>>24&255,this.view[t+2]=e>>>16&255,this.view[t+1]=e>>>8&255,this.view[t]=255&e):(this.view[t]=e>>>24&255,this.view[t+1]=e>>>16&255,this.view[t+2]=e>>>8&255,this.view[t+3]=255&e),n&&(this.offset+=4),this},o.writeUInt32=o.writeUint32,o.readUint32=function(e){var t="undefined"==typeof e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,0>e||e+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+4) <= "+this.buffer.byteLength)}var n=0;return this.littleEndian?(n=this.view[e+2]<<16,n|=this.view[e+1]<<8,n|=this.view[e],n+=this.view[e+3]<<24>>>0):(n=this.view[e+1]<<16,n|=this.view[e+2]<<8,n|=this.view[e+3],n+=this.view[e]<<24>>>0),t&&(this.offset+=4),n},o.readUInt32=o.readUint32,e&&(o.writeInt64=function(t,n){var r="undefined"==typeof n;if(r&&(n=this.offset),!this.noAssert){if("number"==typeof t)t=e.fromNumber(t);else if("string"==typeof t)t=e.fromString(t);else if(!(t&&t instanceof e))throw TypeError("Illegal value: "+t+" (not an integer or Long)");if("number"!=typeof n||n%1!==0)throw TypeError("Illegal offset: "+n+" (not an integer)");if(n>>>=0,0>n||n+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+n+" (+0) <= "+this.buffer.byteLength)}"number"==typeof t?t=e.fromNumber(t):"string"==typeof t&&(t=e.fromString(t)),n+=8;var i=this.buffer.byteLength;n>i&&this.resize((i*=2)>n?i:n),n-=8;var s=t.low,o=t.high;return this.littleEndian?(this.view[n+3]=s>>>24&255,this.view[n+2]=s>>>16&255,this.view[n+1]=s>>>8&255,this.view[n]=255&s,n+=4,this.view[n+3]=o>>>24&255,this.view[n+2]=o>>>16&255,this.view[n+1]=o>>>8&255,this.view[n]=255&o):(this.view[n]=o>>>24&255,this.view[n+1]=o>>>16&255,this.view[n+2]=o>>>8&255,this.view[n+3]=255&o,n+=4,this.view[n]=s>>>24&255,this.view[n+1]=s>>>16&255,this.view[n+2]=s>>>8&255,this.view[n+3]=255&s),r&&(this.offset+=8),this},o.writeLong=o.writeInt64,o.readInt64=function(t){var n="undefined"==typeof t;if(n&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!==0)throw TypeError("Illegal offset: "+t+" (not an integer)");if(t>>>=0,0>t||t+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+8) <= "+this.buffer.byteLength)}var r=0,i=0;this.littleEndian?(r=this.view[t+2]<<16,r|=this.view[t+1]<<8,r|=this.view[t],r+=this.view[t+3]<<24>>>0,t+=4,i=this.view[t+2]<<16,i|=this.view[t+1]<<8,i|=this.view[t],i+=this.view[t+3]<<24>>>0):(i=this.view[t+1]<<16,i|=this.view[t+2]<<8,i|=this.view[t+3],i+=this.view[t]<<24>>>0,t+=4,r=this.view[t+1]<<16,r|=this.view[t+2]<<8,r|=this.view[t+3],r+=this.view[t]<<24>>>0);var s=new e(r,i,!1);return n&&(this.offset+=8),s},o.readLong=o.readInt64,o.writeUint64=function(t,n){var r="undefined"==typeof n;if(r&&(n=this.offset),!this.noAssert){if("number"==typeof t)t=e.fromNumber(t);else if("string"==typeof t)t=e.fromString(t);else if(!(t&&t instanceof e))throw TypeError("Illegal value: "+t+" (not an integer or Long)");if("number"!=typeof n||n%1!==0)throw TypeError("Illegal offset: "+n+" (not an integer)");if(n>>>=0,0>n||n+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+n+" (+0) <= "+this.buffer.byteLength)}"number"==typeof t?t=e.fromNumber(t):"string"==typeof t&&(t=e.fromString(t)),n+=8;var i=this.buffer.byteLength;n>i&&this.resize((i*=2)>n?i:n),n-=8;var s=t.low,o=t.high;return this.littleEndian?(this.view[n+3]=s>>>24&255,this.view[n+2]=s>>>16&255,this.view[n+1]=s>>>8&255,this.view[n]=255&s,n+=4,this.view[n+3]=o>>>24&255,this.view[n+2]=o>>>16&255,this.view[n+1]=o>>>8&255,this.view[n]=255&o):(this.view[n]=o>>>24&255,this.view[n+1]=o>>>16&255,this.view[n+2]=o>>>8&255,this.view[n+3]=255&o,n+=4,this.view[n]=s>>>24&255,this.view[n+1]=s>>>16&255,this.view[n+2]=s>>>8&255,this.view[n+3]=255&s),r&&(this.offset+=8),this},o.writeUInt64=o.writeUint64,o.readUint64=function(t){var n="undefined"==typeof t;if(n&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!==0)throw TypeError("Illegal offset: "+t+" (not an integer)");if(t>>>=0,0>t||t+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+8) <= "+this.buffer.byteLength)}var r=0,i=0;this.littleEndian?(r=this.view[t+2]<<16,r|=this.view[t+1]<<8,r|=this.view[t],r+=this.view[t+3]<<24>>>0,t+=4,i=this.view[t+2]<<16,i|=this.view[t+1]<<8,i|=this.view[t],i+=this.view[t+3]<<24>>>0):(i=this.view[t+1]<<16,i|=this.view[t+2]<<8,i|=this.view[t+3],i+=this.view[t]<<24>>>0,t+=4,r=this.view[t+1]<<16,r|=this.view[t+2]<<8,r|=this.view[t+3],r+=this.view[t]<<24>>>0);var s=new e(r,i,!0);return n&&(this.offset+=8),s},o.readUInt64=o.readUint64),o.writeFloat32=function(e,t){var n="undefined"==typeof t;if(n&&(t=this.offset),!this.noAssert){if("number"!=typeof e)throw TypeError("Illegal value: "+e+" (not a number)");if("number"!=typeof t||t%1!==0)throw TypeError("Illegal offset: "+t+" (not an integer)");if(t>>>=0,0>t||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=4;var r=this.buffer.byteLength;return t>r&&this.resize((r*=2)>t?r:t),t-=4,i(this.view,e,t,this.littleEndian,23,4),n&&(this.offset+=4),this},o.writeFloat=o.writeFloat32,o.readFloat32=function(e){var t="undefined"==typeof e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,0>e||e+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+4) <= "+this.buffer.byteLength)}var n=r(this.view,e,this.littleEndian,23,4);return t&&(this.offset+=4),n},o.readFloat=o.readFloat32,o.writeFloat64=function(e,t){var n="undefined"==typeof t;if(n&&(t=this.offset),!this.noAssert){if("number"!=typeof e)throw TypeError("Illegal value: "+e+" (not a number)");if("number"!=typeof t||t%1!==0)throw TypeError("Illegal offset: "+t+" (not an integer)");if(t>>>=0,0>t||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=8;var r=this.buffer.byteLength;return t>r&&this.resize((r*=2)>t?r:t),t-=8,i(this.view,e,t,this.littleEndian,52,8),n&&(this.offset+=8),this},o.writeDouble=o.writeFloat64,o.readFloat64=function(e){var t="undefined"==typeof e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,0>e||e+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+8) <= "+this.buffer.byteLength)}var n=r(this.view,e,this.littleEndian,52,8);return t&&(this.offset+=8),n},o.readDouble=o.readFloat64,s.MAX_VARINT32_BYTES=5,s.calculateVarint32=function(e){return e>>>=0,128>e?1:16384>e?2:1<<21>e?3:1<<28>e?4:5},s.zigZagEncode32=function(e){return((e|=0)<<1^e>>31)>>>0},s.zigZagDecode32=function(e){return e>>>1^-(1&e)|0},o.writeVarint32=function(e,t){var n="undefined"==typeof t;if(n&&(t=this.offset),!this.noAssert){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e|=0,"number"!=typeof t||t%1!==0)throw TypeError("Illegal offset: "+t+" (not an integer)");if(t>>>=0,0>t||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}var r,i=s.calculateVarint32(e);t+=i;var o=this.buffer.byteLength;for(t>o&&this.resize((o*=2)>t?o:t),t-=i,e>>>=0;e>=128;)r=127&e|128,this.view[t++]=r,e>>>=7;return this.view[t++]=e,n?(this.offset=t,this):i},o.writeVarint32ZigZag=function(e,t){return this.writeVarint32(s.zigZagEncode32(e),t)},o.readVarint32=function(e){var t="undefined"==typeof e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,0>e||e+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+1) <= "+this.buffer.byteLength)}var n,r=0,i=0;do{if(!this.noAssert&&e>this.limit){var s=Error("Truncated");throw s.truncated=!0,s}n=this.view[e++],5>r&&(i|=(127&n)<<7*r),++r}while(0!==(128&n));return i|=0,t?(this.offset=e,i):{value:i,length:r}},o.readVarint32ZigZag=function(e){var t=this.readVarint32(e);return"object"==typeof t?t.value=s.zigZagDecode32(t.value):t=s.zigZagDecode32(t),t},e&&(s.MAX_VARINT64_BYTES=10,s.calculateVarint64=function(t){"number"==typeof t?t=e.fromNumber(t):"string"==typeof t&&(t=e.fromString(t));var n=t.toInt()>>>0,r=t.shiftRightUnsigned(28).toInt()>>>0,i=t.shiftRightUnsigned(56).toInt()>>>0;return 0==i?0==r?16384>n?128>n?1:2:1<<21>n?3:4:16384>r?128>r?5:6:1<<21>r?7:8:128>i?9:10},s.zigZagEncode64=function(t){return"number"==typeof t?t=e.fromNumber(t,!1):"string"==typeof t?t=e.fromString(t,!1):t.unsigned!==!1&&(t=t.toSigned()),t.shiftLeft(1).xor(t.shiftRight(63)).toUnsigned()},s.zigZagDecode64=function(t){return"number"==typeof t?t=e.fromNumber(t,!1):"string"==typeof t?t=e.fromString(t,!1):t.unsigned!==!1&&(t=t.toSigned()),t.shiftRightUnsigned(1).xor(t.and(e.ONE).toSigned().negate()).toSigned()},o.writeVarint64=function(t,n){var r="undefined"==typeof n;if(r&&(n=this.offset),!this.noAssert){if("number"==typeof t)t=e.fromNumber(t);else if("string"==typeof t)t=e.fromString(t);else if(!(t&&t instanceof e))throw TypeError("Illegal value: "+t+" (not an integer or Long)");if("number"!=typeof n||n%1!==0)throw TypeError("Illegal offset: "+n+" (not an integer)");if(n>>>=0,0>n||n+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+n+" (+0) <= "+this.buffer.byteLength)}"number"==typeof t?t=e.fromNumber(t,!1):"string"==typeof t?t=e.fromString(t,!1):t.unsigned!==!1&&(t=t.toSigned());var i=s.calculateVarint64(t),o=t.toInt()>>>0,a=t.shiftRightUnsigned(28).toInt()>>>0,f=t.shiftRightUnsigned(56).toInt()>>>0;n+=i;var h=this.buffer.byteLength;switch(n>h&&this.resize((h*=2)>n?h:n),n-=i,i){case 10:this.view[n+9]=f>>>7&1;case 9:this.view[n+8]=9!==i?128|f:127&f;case 8:this.view[n+7]=8!==i?a>>>21|128:a>>>21&127;case 7:this.view[n+6]=7!==i?a>>>14|128:a>>>14&127;case 6:this.view[n+5]=6!==i?a>>>7|128:a>>>7&127;case 5:this.view[n+4]=5!==i?128|a:127&a;case 4:this.view[n+3]=4!==i?o>>>21|128:o>>>21&127;case 3:this.view[n+2]=3!==i?o>>>14|128:o>>>14&127;case 2:this.view[n+1]=2!==i?o>>>7|128:o>>>7&127;case 1:this.view[n]=1!==i?128|o:127&o}return r?(this.offset+=i,this):i},o.writeVarint64ZigZag=function(e,t){return this.writeVarint64(s.zigZagEncode64(e),t)},o.readVarint64=function(t){var n="undefined"==typeof t;if(n&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!==0)throw TypeError("Illegal offset: "+t+" (not an integer)");if(t>>>=0,0>t||t+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+1) <= "+this.buffer.byteLength)}var r=t,i=0,s=0,o=0,a=0;if(a=this.view[t++],i=127&a,128&a&&(a=this.view[t++],i|=(127&a)<<7,(128&a||this.noAssert&&"undefined"==typeof a)&&(a=this.view[t++],i|=(127&a)<<14,(128&a||this.noAssert&&"undefined"==typeof a)&&(a=this.view[t++],i|=(127&a)<<21,(128&a||this.noAssert&&"undefined"==typeof a)&&(a=this.view[t++],s=127&a,(128&a||this.noAssert&&"undefined"==typeof a)&&(a=this.view[t++],s|=(127&a)<<7,(128&a||this.noAssert&&"undefined"==typeof a)&&(a=this.view[t++],s|=(127&a)<<14,(128&a||this.noAssert&&"undefined"==typeof a)&&(a=this.view[t++],s|=(127&a)<<21,(128&a||this.noAssert&&"undefined"==typeof a)&&(a=this.view[t++],o=127&a,(128&a||this.noAssert&&"undefined"==typeof a)&&(a=this.view[t++],o|=(127&a)<<7,128&a||this.noAssert&&"undefined"==typeof a))))))))))throw Error("Buffer overrun");var f=e.fromBits(i|s<<28,s>>>4|o<<24,!1);return n?(this.offset=t,f):{value:f,length:t-r}},o.readVarint64ZigZag=function(t){var n=this.readVarint64(t);return n&&n.value instanceof e?n.value=s.zigZagDecode64(n.value):n=s.zigZagDecode64(n),n}),o.writeCString=function(e,n){var r="undefined"==typeof n;r&&(n=this.offset);var i,s=e.length;if(!this.noAssert){if("string"!=typeof e)throw TypeError("Illegal str: Not a string");for(i=0;s>i;++i)if(0===e.charCodeAt(i))throw RangeError("Illegal str: Contains NULL-characters");if("number"!=typeof n||n%1!==0)throw TypeError("Illegal offset: "+n+" (not an integer)");if(n>>>=0,0>n||n+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+n+" (+0) <= "+this.buffer.byteLength)}s=c.calculateUTF16asUTF8(t(e))[1],n+=s+1;var o=this.buffer.byteLength;return n>o&&this.resize((o*=2)>n?o:n),n-=s+1,c.encodeUTF16toUTF8(t(e),function(e){this.view[n++]=e}.bind(this)),this.view[n++]=0,r?(this.offset=n,this):s},o.readCString=function(e){var t="undefined"==typeof e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,0>e||e+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+1) <= "+this.buffer.byteLength)}var r,i=e,s=-1;return c.decodeUTF8toUTF16(function(){if(0===s)return null;if(e>=this.limit)throw RangeError("Illegal range: Truncated data, "+e+" < "+this.limit);return s=this.view[e++],0===s?null:s}.bind(this),r=n(),!0),t?(this.offset=e,r()):{string:r(),length:e-i}},o.writeIString=function(e,n){var r="undefined"==typeof n;if(r&&(n=this.offset),!this.noAssert){if("string"!=typeof e)throw TypeError("Illegal str: Not a string");if("number"!=typeof n||n%1!==0)throw TypeError("Illegal offset: "+n+" (not an integer)");if(n>>>=0,0>n||n+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+n+" (+0) <= "+this.buffer.byteLength)}var i,s=n;i=c.calculateUTF16asUTF8(t(e),this.noAssert)[1],n+=4+i;var o=this.buffer.byteLength;if(n>o&&this.resize((o*=2)>n?o:n),n-=4+i,this.littleEndian?(this.view[n+3]=i>>>24&255,this.view[n+2]=i>>>16&255,this.view[n+1]=i>>>8&255,this.view[n]=255&i):(this.view[n]=i>>>24&255,this.view[n+1]=i>>>16&255,this.view[n+2]=i>>>8&255,this.view[n+3]=255&i),n+=4,c.encodeUTF16toUTF8(t(e),function(e){this.view[n++]=e}.bind(this)),n!==s+4+i)throw RangeError("Illegal range: Truncated data, "+n+" == "+(n+4+i));return r?(this.offset=n,this):n-s},o.readIString=function(e){var t="undefined"==typeof e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,0>e||e+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+4) <= "+this.buffer.byteLength)}var n=e,r=this.readUint32(e),i=this.readUTF8String(r,s.METRICS_BYTES,e+=4);return e+=i.length,t?(this.offset=e,i.string):{string:i.string,length:e-n}},s.METRICS_CHARS="c",s.METRICS_BYTES="b",o.writeUTF8String=function(e,n){var r="undefined"==typeof n;if(r&&(n=this.offset),!this.noAssert){if("number"!=typeof n||n%1!==0)throw TypeError("Illegal offset: "+n+" (not an integer)");if(n>>>=0,0>n||n+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+n+" (+0) <= "+this.buffer.byteLength)}var i,s=n;i=c.calculateUTF16asUTF8(t(e))[1],n+=i;var o=this.buffer.byteLength;return n>o&&this.resize((o*=2)>n?o:n),n-=i,c.encodeUTF16toUTF8(t(e),function(e){this.view[n++]=e}.bind(this)),r?(this.offset=n,this):n-s},o.writeString=o.writeUTF8String,s.calculateUTF8Chars=function(e){return c.calculateUTF16asUTF8(t(e))[0]},s.calculateUTF8Bytes=function(e){return c.calculateUTF16asUTF8(t(e))[1]},s.calculateString=s.calculateUTF8Bytes,o.readUTF8String=function(e,t,r){"number"==typeof t&&(r=t,t=void 0);var i="undefined"==typeof r;if(i&&(r=this.offset),"undefined"==typeof t&&(t=s.METRICS_CHARS),!this.noAssert){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal length: "+e+" (not an integer)");if(e|=0,"number"!=typeof r||r%1!==0)throw TypeError("Illegal offset: "+r+" (not an integer)");if(r>>>=0,0>r||r+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+r+" (+0) <= "+this.buffer.byteLength)}var o,a=0,f=r;if(t===s.METRICS_CHARS){if(o=n(),c.decodeUTF8(function(){return e>a&&r<this.limit?this.view[r++]:null}.bind(this),function(e){++a,c.UTF8toUTF16(e,o)}),a!==e)throw RangeError("Illegal range: Truncated data, "+a+" == "+e);return i?(this.offset=r,o()):{string:o(),length:r-f}}if(t===s.METRICS_BYTES){if(!this.noAssert){if("number"!=typeof r||r%1!==0)throw TypeError("Illegal offset: "+r+" (not an integer)");if(r>>>=0,0>r||r+e>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+r+" (+"+e+") <= "+this.buffer.byteLength)}var h=r+e;if(c.decodeUTF8toUTF16(function(){return h>r?this.view[r++]:null}.bind(this),o=n(),this.noAssert),r!==h)throw RangeError("Illegal range: Truncated data, "+r+" == "+h);return i?(this.offset=r,o()):{string:o(),length:r-f}}throw TypeError("Unsupported metrics: "+t)},o.readString=o.readUTF8String,o.writeVString=function(e,n){var r="undefined"==typeof n;if(r&&(n=this.offset),!this.noAssert){if("string"!=typeof e)throw TypeError("Illegal str: Not a string");if("number"!=typeof n||n%1!==0)throw TypeError("Illegal offset: "+n+" (not an integer)");if(n>>>=0,0>n||n+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+n+" (+0) <= "+this.buffer.byteLength)}var i,o,a=n;i=c.calculateUTF16asUTF8(t(e),this.noAssert)[1],o=s.calculateVarint32(i),n+=o+i;var f=this.buffer.byteLength;if(n>f&&this.resize((f*=2)>n?f:n),n-=o+i,n+=this.writeVarint32(i,n),c.encodeUTF16toUTF8(t(e),function(e){this.view[n++]=e}.bind(this)),n!==a+i+o)throw RangeError("Illegal range: Truncated data, "+n+" == "+(n+i+o));return r?(this.offset=n,this):n-a},o.readVString=function(e){var t="undefined"==typeof e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,0>e||e+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+1) <= "+this.buffer.byteLength)}var n=e,r=this.readVarint32(e),i=this.readUTF8String(r.value,s.METRICS_BYTES,e+=r.length);return e+=i.length,t?(this.offset=e,i.string):{string:i.string,length:e-n}},o.append=function(e,t,n){"number"!=typeof t&&"string"==typeof t||(n=t,t=void 0);var r="undefined"==typeof n;if(r&&(n=this.offset),!this.noAssert){if("number"!=typeof n||n%1!==0)throw TypeError("Illegal offset: "+n+" (not an integer)");if(n>>>=0,0>n||n+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+n+" (+0) <= "+this.buffer.byteLength)}e instanceof s||(e=s.wrap(e,t));var i=e.limit-e.offset;if(0>=i)return this;n+=i;var o=this.buffer.byteLength;return n>o&&this.resize((o*=2)>n?o:n),n-=i,this.view.set(e.view.subarray(e.offset,e.limit),n),e.offset+=i,r&&(this.offset+=i),this},o.appendTo=function(e,t){return e.append(this,t),this},o.assert=function(e){return this.noAssert=!e,this},o.capacity=function(){return this.buffer.byteLength},o.clear=function(){return this.offset=0,this.limit=this.buffer.byteLength,this.markedOffset=-1,this},o.clone=function(e){var t=new s(0,this.littleEndian,this.noAssert);return e?(t.buffer=new ArrayBuffer(this.buffer.byteLength),t.view=new Uint8Array(t.buffer)):(t.buffer=this.buffer,t.view=this.view),t.offset=this.offset,t.markedOffset=this.markedOffset,t.limit=this.limit,t},o.compact=function(e,t){if("undefined"==typeof e&&(e=this.offset),"undefined"==typeof t&&(t=this.limit),!this.noAssert){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||t%1!==0)throw TypeError("Illegal end: Not an integer");if(t>>>=0,0>e||e>t||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}if(0===e&&t===this.buffer.byteLength)return this;var n=t-e;if(0===n)return this.buffer=a,this.view=null,this.markedOffset>=0&&(this.markedOffset-=e),this.offset=0,this.limit=0,this;var r=new ArrayBuffer(n),i=new Uint8Array(r);return i.set(this.view.subarray(e,t)),this.buffer=r,this.view=i,this.markedOffset>=0&&(this.markedOffset-=e),this.offset=0,this.limit=n,this},o.copy=function(e,t){if("undefined"==typeof e&&(e=this.offset),"undefined"==typeof t&&(t=this.limit),!this.noAssert){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||t%1!==0)throw TypeError("Illegal end: Not an integer");if(t>>>=0,0>e||e>t||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}if(e===t)return new s(0,this.littleEndian,this.noAssert);var n=t-e,r=new s(n,this.littleEndian,this.noAssert);return r.offset=0,r.limit=n,r.markedOffset>=0&&(r.markedOffset-=e),this.copyTo(r,0,e,t),r},o.copyTo=function(e,t,n,r){var i,o;if(!this.noAssert&&!s.isByteBuffer(e))throw TypeError("Illegal target: Not a ByteBuffer");if(t=(o="undefined"==typeof t)?e.offset:0|t,n=(i="undefined"==typeof n)?this.offset:0|n,r="undefined"==typeof r?this.limit:0|r,0>t||t>e.buffer.byteLength)throw RangeError("Illegal target range: 0 <= "+t+" <= "+e.buffer.byteLength);if(0>n||r>this.buffer.byteLength)throw RangeError("Illegal source range: 0 <= "+n+" <= "+this.buffer.byteLength);var a=r-n;return 0===a?e:(e.ensureCapacity(t+a),e.view.set(this.view.subarray(n,r),t),i&&(this.offset+=a),o&&(e.offset+=a),this)},o.ensureCapacity=function(e){var t=this.buffer.byteLength;return e>t?this.resize((t*=2)>e?t:e):this},o.fill=function(e,t,n){var r="undefined"==typeof t;if(r&&(t=this.offset),"string"==typeof e&&e.length>0&&(e=e.charCodeAt(0)),"undefined"==typeof t&&(t=this.offset),"undefined"==typeof n&&(n=this.limit),!this.noAssert){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e|=0,"number"!=typeof t||t%1!==0)throw TypeError("Illegal begin: Not an integer");if(t>>>=0,"number"!=typeof n||n%1!==0)throw TypeError("Illegal end: Not an integer");if(n>>>=0,0>t||t>n||n>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+n+" <= "+this.buffer.byteLength)}if(t>=n)return this;for(;n>t;)this.view[t++]=e;return r&&(this.offset=t),this},o.flip=function(){return this.limit=this.offset,this.offset=0,this},o.mark=function(e){if(e="undefined"==typeof e?this.offset:e,!this.noAssert){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,0>e||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}return this.markedOffset=e,this},o.order=function(e){if(!this.noAssert&&"boolean"!=typeof e)throw TypeError("Illegal littleEndian: Not a boolean");return this.littleEndian=!!e,this},o.LE=function(e){return this.littleEndian="undefined"!=typeof e?!!e:!0,this},o.BE=function(e){return this.littleEndian="undefined"!=typeof e?!e:!1,this},o.prepend=function(e,t,n){"number"!=typeof t&&"string"==typeof t||(n=t,t=void 0);var r="undefined"==typeof n;if(r&&(n=this.offset),!this.noAssert){if("number"!=typeof n||n%1!==0)throw TypeError("Illegal offset: "+n+" (not an integer)");if(n>>>=0,0>n||n+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+n+" (+0) <= "+this.buffer.byteLength)}e instanceof s||(e=s.wrap(e,t));var i=e.limit-e.offset;if(0>=i)return this;var o=i-n;if(o>0){var a=new ArrayBuffer(this.buffer.byteLength+o),f=new Uint8Array(a);f.set(this.view.subarray(n,this.buffer.byteLength),i),this.buffer=a,this.view=f,this.offset+=o,this.markedOffset>=0&&(this.markedOffset+=o),this.limit+=o,n+=o}else{new Uint8Array(this.buffer)}return this.view.set(e.view.subarray(e.offset,e.limit),n-i),e.offset=e.limit,r&&(this.offset-=i),this},o.prependTo=function(e,t){return e.prepend(this,t),this},o.printDebug=function(e){"function"!=typeof e&&(e=console.log.bind(console)),e(this.toString()+"\n-------------------------------------------------------------------\n"+this.toDebug(!0));
},o.remaining=function(){return this.limit-this.offset},o.reset=function(){return this.markedOffset>=0?(this.offset=this.markedOffset,this.markedOffset=-1):this.offset=0,this},o.resize=function(e){if(!this.noAssert){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal capacity: "+e+" (not an integer)");if(e|=0,0>e)throw RangeError("Illegal capacity: 0 <= "+e)}if(this.buffer.byteLength<e){var t=new ArrayBuffer(e),n=new Uint8Array(t);n.set(this.view),this.buffer=t,this.view=n}return this},o.reverse=function(e,t){if("undefined"==typeof e&&(e=this.offset),"undefined"==typeof t&&(t=this.limit),!this.noAssert){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||t%1!==0)throw TypeError("Illegal end: Not an integer");if(t>>>=0,0>e||e>t||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}return e===t?this:(Array.prototype.reverse.call(this.view.subarray(e,t)),this)},o.skip=function(e){if(!this.noAssert){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal length: "+e+" (not an integer)");e|=0}var t=this.offset+e;if(!this.noAssert&&(0>t||t>this.buffer.byteLength))throw RangeError("Illegal length: 0 <= "+this.offset+" + "+e+" <= "+this.buffer.byteLength);return this.offset=t,this},o.slice=function(e,t){if("undefined"==typeof e&&(e=this.offset),"undefined"==typeof t&&(t=this.limit),!this.noAssert){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||t%1!==0)throw TypeError("Illegal end: Not an integer");if(t>>>=0,0>e||e>t||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}var n=this.clone();return n.offset=e,n.limit=t,n},o.toBuffer=function(e){var t=this.offset,n=this.limit;if(!this.noAssert){if("number"!=typeof t||t%1!==0)throw TypeError("Illegal offset: Not an integer");if(t>>>=0,"number"!=typeof n||n%1!==0)throw TypeError("Illegal limit: Not an integer");if(n>>>=0,0>t||t>n||n>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+n+" <= "+this.buffer.byteLength)}if(!e&&0===t&&n===this.buffer.byteLength)return this.buffer;if(t===n)return a;var r=new ArrayBuffer(n-t);return new Uint8Array(r).set(new Uint8Array(this.buffer).subarray(t,n),0),r},o.toArrayBuffer=o.toBuffer,o.toString=function(e,t,n){if("undefined"==typeof e)return"ByteBufferAB(offset="+this.offset+",markedOffset="+this.markedOffset+",limit="+this.limit+",capacity="+this.capacity()+")";switch("number"==typeof e&&(e="utf8",t=e,n=t),e){case"utf8":return this.toUTF8(t,n);case"base64":return this.toBase64(t,n);case"hex":return this.toHex(t,n);case"binary":return this.toBinary(t,n);case"debug":return this.toDebug();case"columns":return this.toColumns();default:throw Error("Unsupported encoding: "+e)}};var h=function(){for(var e={},t=[65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,48,49,50,51,52,53,54,55,56,57,43,47],n=[],r=0,i=t.length;i>r;++r)n[t[r]]=r;return e.encode=function(e,n){for(var r,i;null!==(r=e());)n(t[r>>2&63]),i=(3&r)<<4,null!==(r=e())?(i|=r>>4&15,n(t[63&(i|r>>4&15)]),i=(15&r)<<2,null!==(r=e())?(n(t[63&(i|r>>6&3)]),n(t[63&r])):(n(t[63&i]),n(61))):(n(t[63&i]),n(61),n(61))},e.decode=function(e,t){function r(e){throw Error("Illegal character code: "+e)}for(var i,s,o;null!==(i=e());)if(s=n[i],"undefined"==typeof s&&r(i),null!==(i=e())&&(o=n[i],"undefined"==typeof o&&r(i),t(s<<2>>>0|(48&o)>>4),null!==(i=e()))){if(s=n[i],"undefined"==typeof s){if(61===i)break;r(i)}if(t((15&o)<<4>>>0|(60&s)>>2),null!==(i=e())){if(o=n[i],"undefined"==typeof o){if(61===i)break;r(i)}t((3&s)<<6>>>0|o)}}},e.test=function(e){return/^(?:[A-Za-z0-9+\/]{4})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/.test(e)},e}();o.toBase64=function(e,t){if("undefined"==typeof e&&(e=this.offset),"undefined"==typeof t&&(t=this.limit),e=0|e,t=0|t,0>e||t>this.capacity||e>t)throw RangeError("begin, end");var r;return h.encode(function(){return t>e?this.view[e++]:null}.bind(this),r=n()),r()},s.fromBase64=function(e,n){if("string"!=typeof e)throw TypeError("str");var r=new s(e.length/4*3,n),i=0;return h.decode(t(e),function(e){r.view[i++]=e}),r.limit=i,r},s.btoa=function(e){return s.fromBinary(e).toBase64()},s.atob=function(e){return s.fromBase64(e).toBinary()},o.toBinary=function(e,t){if("undefined"==typeof e&&(e=this.offset),"undefined"==typeof t&&(t=this.limit),e|=0,t|=0,0>e||t>this.capacity()||e>t)throw RangeError("begin, end");if(e===t)return"";for(var n=[],r=[];t>e;)n.push(this.view[e++]),n.length>=1024&&(r.push(String.fromCharCode.apply(String,n)),n=[]);return r.join("")+String.fromCharCode.apply(String,n)},s.fromBinary=function(e,t){if("string"!=typeof e)throw TypeError("str");for(var n,r=0,i=e.length,o=new s(i,t);i>r;){if(n=e.charCodeAt(r),n>255)throw RangeError("illegal char code: "+n);o.view[r++]=n}return o.limit=i,o},o.toDebug=function(e){for(var t,n=-1,r=this.buffer.byteLength,i="",s="",o="";r>n;){if(-1!==n&&(t=this.view[n],i+=16>t?"0"+t.toString(16).toUpperCase():t.toString(16).toUpperCase(),e&&(s+=t>32&&127>t?String.fromCharCode(t):".")),++n,e&&n>0&&n%16===0&&n!==r){for(;i.length<51;)i+=" ";o+=i+s+"\n",i=s=""}i+=n===this.offset&&n===this.limit?n===this.markedOffset?"!":"|":n===this.offset?n===this.markedOffset?"[":"<":n===this.limit?n===this.markedOffset?"]":">":n===this.markedOffset?"'":e||0!==n&&n!==r?" ":""}if(e&&" "!==i){for(;i.length<51;)i+=" ";o+=i+s+"\n"}return e?o:i},s.fromDebug=function(e,t,n){for(var r,i,o=e.length,a=new s((o+1)/3|0,t,n),f=0,h=0,c=!1,l=!1,u=!1,p=!1,d=!1;o>f;){switch(r=e.charAt(f++)){case"!":if(!n){if(l||u||p){d=!0;break}l=u=p=!0}a.offset=a.markedOffset=a.limit=h,c=!1;break;case"|":if(!n){if(l||p){d=!0;break}l=p=!0}a.offset=a.limit=h,c=!1;break;case"[":if(!n){if(l||u){d=!0;break}l=u=!0}a.offset=a.markedOffset=h,c=!1;break;case"<":if(!n){if(l){d=!0;break}l=!0}a.offset=h,c=!1;break;case"]":if(!n){if(p||u){d=!0;break}p=u=!0}a.limit=a.markedOffset=h,c=!1;break;case">":if(!n){if(p){d=!0;break}p=!0}a.limit=h,c=!1;break;case"'":if(!n){if(u){d=!0;break}u=!0}a.markedOffset=h,c=!1;break;case" ":c=!1;break;default:if(!n&&c){d=!0;break}if(i=parseInt(r+e.charAt(f++),16),!n&&(isNaN(i)||0>i||i>255))throw TypeError("Illegal str: Not a debug encoded string");a.view[h++]=i,c=!0}if(d)throw TypeError("Illegal str: Invalid symbol at "+f)}if(!n){if(!l||!p)throw TypeError("Illegal str: Missing offset or limit");if(h<a.buffer.byteLength)throw TypeError("Illegal str: Not a debug encoded string (is it hex?) "+h+" < "+o)}return a},o.toHex=function(e,t){if(e="undefined"==typeof e?this.offset:e,t="undefined"==typeof t?this.limit:t,!this.noAssert){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||t%1!==0)throw TypeError("Illegal end: Not an integer");if(t>>>=0,0>e||e>t||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}for(var n,r=new Array(t-e);t>e;)n=this.view[e++],16>n?r.push("0",n.toString(16)):r.push(n.toString(16));return r.join("")},s.fromHex=function(e,t,n){if(!n){if("string"!=typeof e)throw TypeError("Illegal str: Not a string");if(e.length%2!==0)throw TypeError("Illegal str: Length not a multiple of 2")}for(var r,i=e.length,o=new s(i/2|0,t),a=0,f=0;i>a;a+=2){if(r=parseInt(e.substring(a,a+2),16),!n&&(!isFinite(r)||0>r||r>255))throw TypeError("Illegal str: Contains non-hex characters");o.view[f++]=r}return o.limit=f,o};var c=function(){var e={};return e.MAX_CODEPOINT=1114111,e.encodeUTF8=function(e,t){var n=null;for("number"==typeof e&&(n=e,e=function(){return null});null!==n||null!==(n=e());)128>n?t(127&n):2048>n?(t(n>>6&31|192),t(63&n|128)):65536>n?(t(n>>12&15|224),t(n>>6&63|128),t(63&n|128)):(t(n>>18&7|240),t(n>>12&63|128),t(n>>6&63|128),t(63&n|128)),n=null},e.decodeUTF8=function(e,t){for(var n,r,i,s,o=function(e){e=e.slice(0,e.indexOf(null));var t=Error(e.toString());throw t.name="TruncatedError",t.bytes=e,t};null!==(n=e());)if(0===(128&n))t(n);else if(192===(224&n))null===(r=e())&&o([n,r]),t((31&n)<<6|63&r);else if(224===(240&n))(null===(r=e())||null===(i=e()))&&o([n,r,i]),t((15&n)<<12|(63&r)<<6|63&i);else{if(240!==(248&n))throw RangeError("Illegal starting byte: "+n);(null===(r=e())||null===(i=e())||null===(s=e()))&&o([n,r,i,s]),t((7&n)<<18|(63&r)<<12|(63&i)<<6|63&s)}},e.UTF16toUTF8=function(e,t){for(var n,r=null;;){if(null===(n=null!==r?r:e()))break;n>=55296&&57343>=n&&null!==(r=e())&&r>=56320&&57343>=r?(t(1024*(n-55296)+r-56320+65536),r=null):t(n)}null!==r&&t(r)},e.UTF8toUTF16=function(e,t){var n=null;for("number"==typeof e&&(n=e,e=function(){return null});null!==n||null!==(n=e());)65535>=n?t(n):(n-=65536,t((n>>10)+55296),t(n%1024+56320)),n=null},e.encodeUTF16toUTF8=function(t,n){e.UTF16toUTF8(t,function(t){e.encodeUTF8(t,n)})},e.decodeUTF8toUTF16=function(t,n){e.decodeUTF8(t,function(t){e.UTF8toUTF16(t,n)})},e.calculateCodePoint=function(e){return 128>e?1:2048>e?2:65536>e?3:4},e.calculateUTF8=function(e){for(var t,n=0;null!==(t=e());)n+=128>t?1:2048>t?2:65536>t?3:4;return n},e.calculateUTF16asUTF8=function(t){var n=0,r=0;return e.UTF16toUTF8(t,function(e){++n,r+=128>e?1:2048>e?2:65536>e?3:4}),[n,r]},e}();return o.toUTF8=function(e,t){if("undefined"==typeof e&&(e=this.offset),"undefined"==typeof t&&(t=this.limit),!this.noAssert){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||t%1!==0)throw TypeError("Illegal end: Not an integer");if(t>>>=0,0>e||e>t||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}var r;try{c.decodeUTF8toUTF16(function(){return t>e?this.view[e++]:null}.bind(this),r=n())}catch(i){if(e!==t)throw RangeError("Illegal range: Truncated data, "+e+" != "+t)}return r()},s.fromUTF8=function(e,n,r){if(!r&&"string"!=typeof e)throw TypeError("Illegal str: Not a string");var i=new s(c.calculateUTF16asUTF8(t(e),!0)[1],n,r),o=0;return c.encodeUTF16toUTF8(t(e),function(e){i.view[o++]=e}),i.limit=o,i},s})}).call(t,n(106)(e))},function(e,t,n){var r,i,s;(function(e){!function(o,a){n(115).amd?(i=[],r=a,s="function"==typeof r?r.apply(t,i):r,!(void 0!==s&&(e.exports=s))):"object"==typeof e&&e&&e.exports?e.exports=a():(o.dcodeIO=o.dcodeIO||{}).Long=a()}(this,function(){"use strict";function e(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function t(e){return(e&&e.__isLong__)===!0}function n(e,t){var n,r,s;return t?(e>>>=0,(s=e>=0&&256>e)&&(r=f[e])?r:(n=i(e,0>(0|e)?-1:0,!0),s&&(f[e]=n),n)):(e|=0,(s=e>=-128&&128>e)&&(r=a[e])?r:(n=i(e,0>e?-1:0,!1),s&&(a[e]=n),n))}function r(e,t){if(isNaN(e)||!isFinite(e))return t?y:g;if(t){if(0>e)return y;if(e>=u)return m}else{if(-p>=e)return b;if(e+1>=p)return _}return 0>e?r(-e,t).neg():i(e%l|0,e/l|0,t)}function i(t,n,r){return new e(t,n,r)}function s(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return g;if("number"==typeof t?(n=t,t=!1):t=!!t,n=n||10,2>n||n>36)throw RangeError("radix");var i;if((i=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===i)return s(e.substring(1),t,n).neg();for(var o=r(h(n,8)),a=g,f=0;f<e.length;f+=8){var c=Math.min(8,e.length-f),l=parseInt(e.substring(f,f+c),n);if(8>c){var u=r(h(n,c));a=a.mul(u).add(r(l))}else a=a.mul(o),a=a.add(r(l))}return a.unsigned=t,a}function o(t){return t instanceof e?t:"number"==typeof t?r(t):"string"==typeof t?s(t):i(t.low,t.high,t.unsigned)}e.__isLong__,Object.defineProperty(e.prototype,"__isLong__",{value:!0,enumerable:!1,configurable:!1}),e.isLong=t;var a={},f={};e.fromInt=n,e.fromNumber=r,e.fromBits=i;var h=Math.pow;e.fromString=s,e.fromValue=o;var c=1<<24,l=4294967296,u=0x10000000000000000,p=u/2,d=n(c),g=n(0);e.ZERO=g;var y=n(0,!0);e.UZERO=y;var j=n(1);e.ONE=j;var v=n(1,!0);e.UONE=v;var w=n(-1);e.NEG_ONE=w;var _=i(-1,2147483647,!1);e.MAX_VALUE=_;var m=i(-1,-1,!0);e.MAX_UNSIGNED_VALUE=m;var b=i(0,-2147483648,!1);e.MIN_VALUE=b;var E=e.prototype;return E.toInt=function(){return this.unsigned?this.low>>>0:this.low},E.toNumber=function(){return this.unsigned?(this.high>>>0)*l+(this.low>>>0):this.high*l+(this.low>>>0)},E.toString=function(e){if(e=e||10,2>e||e>36)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(b)){var t=r(e),n=this.div(t),i=n.mul(t).sub(this);return n.toString(e)+i.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var s=r(h(e,6),this.unsigned),o=this,a="";;){var f=o.div(s),c=o.sub(f.mul(s)).toInt()>>>0,l=c.toString(e);if(o=f,o.isZero())return l+a;for(;l.length<6;)l="0"+l;a=""+l+a}},E.getHighBits=function(){return this.high},E.getHighBitsUnsigned=function(){return this.high>>>0},E.getLowBits=function(){return this.low},E.getLowBitsUnsigned=function(){return this.low>>>0},E.getNumBitsAbs=function(){if(this.isNegative())return this.eq(b)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},E.isZero=function(){return 0===this.high&&0===this.low},E.isNegative=function(){return!this.unsigned&&this.high<0},E.isPositive=function(){return this.unsigned||this.high>=0},E.isOdd=function(){return 1===(1&this.low)},E.isEven=function(){return 0===(1&this.low)},E.equals=function(e){return t(e)||(e=o(e)),this.unsigned!==e.unsigned&&this.high>>>31===1&&e.high>>>31===1?!1:this.high===e.high&&this.low===e.low},E.eq=E.equals,E.notEquals=function(e){return!this.eq(e)},E.neq=E.notEquals,E.lessThan=function(e){return this.comp(e)<0},E.lt=E.lessThan,E.lessThanOrEqual=function(e){return this.comp(e)<=0},E.lte=E.lessThanOrEqual,E.greaterThan=function(e){return this.comp(e)>0},E.gt=E.greaterThan,E.greaterThanOrEqual=function(e){return this.comp(e)>=0},E.gte=E.greaterThanOrEqual,E.compare=function(e){if(t(e)||(e=o(e)),this.eq(e))return 0;var n=this.isNegative(),r=e.isNegative();return n&&!r?-1:!n&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},E.comp=E.compare,E.negate=function(){return!this.unsigned&&this.eq(b)?b:this.not().add(j)},E.neg=E.negate,E.add=function(e){t(e)||(e=o(e));var n=this.high>>>16,r=65535&this.high,s=this.low>>>16,a=65535&this.low,f=e.high>>>16,h=65535&e.high,c=e.low>>>16,l=65535&e.low,u=0,p=0,d=0,g=0;return g+=a+l,d+=g>>>16,g&=65535,d+=s+c,p+=d>>>16,d&=65535,p+=r+h,u+=p>>>16,p&=65535,u+=n+f,u&=65535,i(d<<16|g,u<<16|p,this.unsigned)},E.subtract=function(e){return t(e)||(e=o(e)),this.add(e.neg())},E.sub=E.subtract,E.multiply=function(e){if(this.isZero())return g;if(t(e)||(e=o(e)),e.isZero())return g;if(this.eq(b))return e.isOdd()?b:g;if(e.eq(b))return this.isOdd()?b:g;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(d)&&e.lt(d))return r(this.toNumber()*e.toNumber(),this.unsigned);var n=this.high>>>16,s=65535&this.high,a=this.low>>>16,f=65535&this.low,h=e.high>>>16,c=65535&e.high,l=e.low>>>16,u=65535&e.low,p=0,y=0,j=0,v=0;return v+=f*u,j+=v>>>16,v&=65535,j+=a*u,y+=j>>>16,j&=65535,j+=f*l,y+=j>>>16,j&=65535,y+=s*u,p+=y>>>16,y&=65535,y+=a*l,p+=y>>>16,y&=65535,y+=f*c,p+=y>>>16,y&=65535,p+=n*u+s*l+a*c+f*h,p&=65535,i(j<<16|v,p<<16|y,this.unsigned)},E.mul=E.multiply,E.divide=function(e){if(t(e)||(e=o(e)),e.isZero())throw Error("division by zero");if(this.isZero())return this.unsigned?y:g;var n,i,s;if(this.unsigned)e.unsigned||(e=e.toUnsigned());else{if(this.eq(b)){if(e.eq(j)||e.eq(w))return b;if(e.eq(b))return j;var a=this.shr(1);return n=a.div(e).shl(1),n.eq(g)?e.isNegative()?j:w:(i=this.sub(e.mul(n)),s=n.add(i.div(e)))}if(e.eq(b))return this.unsigned?y:g;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg()}if(this.unsigned){if(e.gt(this))return y;if(e.gt(this.shru(1)))return v;s=y}else s=g;for(i=this;i.gte(e);){n=Math.max(1,Math.floor(i.toNumber()/e.toNumber()));for(var f=Math.ceil(Math.log(n)/Math.LN2),c=48>=f?1:h(2,f-48),l=r(n),u=l.mul(e);u.isNegative()||u.gt(i);)n-=c,l=r(n,this.unsigned),u=l.mul(e);l.isZero()&&(l=j),s=s.add(l),i=i.sub(u)}return s},E.div=E.divide,E.modulo=function(e){return t(e)||(e=o(e)),this.sub(this.div(e).mul(e))},E.mod=E.modulo,E.not=function(){return i(~this.low,~this.high,this.unsigned)},E.and=function(e){return t(e)||(e=o(e)),i(this.low&e.low,this.high&e.high,this.unsigned)},E.or=function(e){return t(e)||(e=o(e)),i(this.low|e.low,this.high|e.high,this.unsigned)},E.xor=function(e){return t(e)||(e=o(e)),i(this.low^e.low,this.high^e.high,this.unsigned)},E.shiftLeft=function(e){return t(e)&&(e=e.toInt()),0===(e&=63)?this:32>e?i(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):i(0,this.low<<e-32,this.unsigned)},E.shl=E.shiftLeft,E.shiftRight=function(e){return t(e)&&(e=e.toInt()),0===(e&=63)?this:32>e?i(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):i(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},E.shr=E.shiftRight,E.shiftRightUnsigned=function(e){if(t(e)&&(e=e.toInt()),e&=63,0===e)return this;var n=this.high;if(32>e){var r=this.low;return i(r>>>e|n<<32-e,n>>>e,this.unsigned)}return 32===e?i(n,0,this.unsigned):i(n>>>e-32,0,this.unsigned)},E.shru=E.shiftRightUnsigned,E.toSigned=function(){return this.unsigned?i(this.low,this.high,!1):this},E.toUnsigned=function(){return this.unsigned?this:i(this.low,this.high,!0)},e})}).call(t,n(106)(e))},function(e,t){},function(e,t){},function(module,exports,__webpack_require__){(function(Buffer){var nclass=__webpack_require__(73),rpc=__webpack_require__(78),BufferedStream=__webpack_require__(121);module.exports.createCustomWebHandler=function(e){if(e||(e={}),!e.rpcProto)throw new Error('You must specify rpcProto option for "createCustomWebHandler"');if(!e.serviceConstructors)throw new Error('You must specify serviceConstructors option for "createCustomWebHandler"');var t=e.rpcProto,n=e.serviceConstructors;return function(e,r,i){var s=new rpc.vsock.socket;s.on("send",function(t){e.write(t.message)}),s.on("close",function(){e.destroy()}),e.setNoDelay(!0),e.on("data",function(e){s.OnMessage(e)}),e.on("close",function(){s.OnRelease()});var o=["HTTP/1.1 101 GnssSocket Protocol Handshake","Upgrade: GnssSocket","Connection: Upgrade","Server: NetGear-Server","",""];e.write(o.join("\r\n")),new RpcChannel(t,s,n)}};var RpcChannel=nclass.extend({options:{timeout:6e4},initialize:function(e,t,n){this.socket=t,this.serviceConstructors=n,this.defaultServiceName=Object.keys(n)[0],this.services={};for(var r in this.serviceConstructors)this.services[r]=new this.serviceConstructors[r](this);this.seqid=0,this.rpcNotifiers={},this.closed=!1,this.stream=new BufferedStream,this.FrameType=e.FrameType,this.CallFrameType=e.CallFrameType,this.FaultExceptionType=e.FaultExceptionType;var i=this;this.socket.on("release",function(){i.onClose()}),this.socket.on("message",function(e){i.stream.Push(e.message)}),this.reading()},Close:function(){this.closed||this.socket.Close()},onClose:function(){if(!this.closed)for(var e in this.services){var t=this.services[e];try{t.onDisconnect()}catch(n){}}this.closed=!0},reading:function(){var njf1=njs.njen(this,arguments);e:for(;;)switch(njf1.cp){case 0:case 1:njf1.cp=this.closed?3:2;break;case 2:njf1.pc(4,this.stream,"ReadBytes",[4]);case 4:with(njf1)if((rv4=f.apply(c,a))==njs.NJSUS)return fh;njf1._lenBytes=njf1.rv4,njf1._len=njf1._lenBytes.readUInt32BE(0),njf1.pc(5,this.stream,"ReadBytes",[njf1._len]);case 5:with(njf1)if((rv5=f.apply(c,a))==njs.NJSUS)return fh;njf1._dataBytes=njf1.rv5,njf1._frame=this.FrameType.decode(njf1._dataBytes),1==njf1._frame.type&&(njf1._callFrame=this.CallFrameType.decode(njf1._frame.body),this.incomingCallFrame(njf1._callFrame)),njf1.cp=1;break;case 3:break e}},incomingCallFrame:function(e){var t=this;if(1==e.type){var n=e.srvName||this.defaultServiceName,r=this.services[n];if(!r)return void this.replyErrorMethod(e.seqId,"Service not found");if(!r[e.name])return void this.replyErrorMethod(e.seqId,"Method not found");r[e.name](e.body,function(n,r){n?t.replyErrorMethod(e.seqId,r):t.replyMethod(e.seqId,r)})}else if(2==e.type)this.onReply(e.seqId,{result:e.body});else if(3==e.type){var i=this.FaultExceptionType.decode(e.body);this.onReply(e.seqId,{err:!0,message:i.message,stackTrace:i.stackTrace})}},CallMethod:function(service,method,data){var njf1=njs.njen(this,arguments,"service","method","data");e:for(;;)try{switch(njf1.cp){case 0:njf1.ecp=1,njf1._seqid=this.regNotifier(),this.callMethod(njf1._seqid,njf1._service,njf1._method,njf1._data),njf1.pc(3,this,"waitResult",[njf1._seqid]);case 3:with(njf1)if((rv3=f.apply(c,a))==njs.NJSUS)return fh;return njf1.rv3;case 1:throw njf1.ecp=null,njf1.thr=!1,njf1._e=njf1.ex,rpc.util.exception(njf1._e,"RpcChannel.callMethod");case 2:break e}}catch(ex){njf1.doex(ex)}},sendCallFrame:function(e){var t=new this.FrameType({body:e.toBuffer(),type:1}),n=new Buffer(t.toBuffer()),r=new Buffer(4);r.writeUInt32BE(n.length,0);var n=Buffer.concat([r,n]);this.socket.Send(n)},callMethod:function(e,t,n,r){var i=new this.CallFrameType({seqId:e,name:n,srvName:t,type:1,body:r.toBuffer()});this.sendCallFrame(i)},replyMethod:function(e,t){var n=new this.CallFrameType({seqId:e,type:2,body:t.toBuffer()});this.sendCallFrame(n)},replyErrorMethod:function(e,t){var n=new this.FaultExceptionType({message:t}),r=new this.CallFrameType({seqId:e,type:3,body:n.toBuffer()});this.sendCallFrame(r)},onReply:function(e,t){var n=this.getNotifier(e);n&&n.fulfill(t)},regNotifier:function(){var e=new njs.ResultNotifier,t=this.seqid++;return this.rpcNotifiers[t]=e,t},getNotifier:function(e){var t=this.rpcNotifiers[e];return delete this.rpcNotifiers[e],t},waitResult:function(seqid){var njf1=njs.njen(this,arguments,"seqid");e:for(;;)switch(njf1.cp){case 0:njf1.pc(1,this,"waitNotifier",[njf1._seqid]);case 1:with(njf1)if((rv1=f.apply(c,a))==njs.NJSUS)return fh;if(njf1._e=njf1.rv1,njf1._e.timeout)throw this.getNotifier(njf1._seqid),rpc.util.exception("Service call timeout","Service did not responce with time "+this.options.timeout+" ms");if(njf1._e.err)throw rpc.util.exception(njf1._e.message,njf1._e.stackTrace);return njf1._e.result}},waitNotifier:function(seqid){var njf1=njs.njen(this,arguments,"seqid");e:for(;;)try{switch(njf1.cp){case 0:njf1._notifier=this.rpcNotifiers[njf1._seqid],njf1._timeout=!1,njf1._result,njf1.ecp=1,njf1.pc(3,njf1._notifier,"value",[this.options.timeout]);case 3:with(njf1)if((rv3=f.apply(c,a))==njs.NJSUS)return fh;njf1._result=njf1.rv3,njf1.cp=2;break;case 1:njf1.ecp=null,njf1.thr=!1,njf1._ex=njf1.ex,njf1._timeout=!0,njf1.cp=2;break;case 2:return njf1._timeout?{timeout:!0}:njf1._result}}catch(ex){njf1.doex(ex)}}});module.exports.RpcChannel=RpcChannel}).call(exports,__webpack_require__(88).Buffer)},function(module,exports,__webpack_require__){(function(Buffer){var nclass=__webpack_require__(73);module.exports=nclass.extend({includes:__webpack_require__(82),initialize:function(){this.buffers=[],this.notifier=null},Push:function(e){this.buffers.push(e),this.notifier&&this.notifier()},wait:function(timeout){var njf1=njs.njen(this,arguments,"timeout");e:for(;;)try{switch(njf1.cp){case 0:this.waiting=!0,this.notifier=new njs.EventNotifier,njf1._error=!1,njf1.ecp=1,njf1.pc(3,this.notifier,"wait",[njf1._timeout]);case 3:with(njf1)if((rv3=f.apply(c,a))==njs.NJSUS)return fh;njf1.cp=2;break;case 1:njf1.ecp=null,njf1.thr=!1,njf1._ex=njf1.ex,njf1._error=!0,njf1.cp=2;break;case 2:return this.waiting=!1,njf1._error}}catch(ex){njf1.doex(ex)}},length:function(){for(var e=0,t=0;t<this.buffers.length;t++)e+=this.buffers[t].length;return e},readFromBuffers:function(e){for(var t="collecting",n=0,r=[],i=[],s=this.buffers,o=0;o<s.length;o++){var a=s[o];switch(t){case"collecting":if(e<n+a.length){var f=e-n+1;f>0&&r.push(a.slice(0,f)),a.length-f>0&&i.push(a.slice(f)),t="finishing"}else n+=a.length,r.push(a);break;case"finishing":i.push(a)}}return this.buffers=i,Buffer.concat(r)},Clear:function(){return this.readFromBuffers(this.length()-1)},ClearStream:function(options){var njf1=njs.njen(this,arguments,"options");e:for(;;)switch(njf1.cp){case 0:njf1._options||(njf1._options={}),njf1._options.timeout||(njf1._options.timeout=500),njf1._options.clearTimeout||(njf1._options.clearTimeout=100),njf1._started=Date.now(),njf1._clearStarted=Date.now(),njf1._data=[];case 1:njf1.cp=2;break;case 2:njf1.pc(4,njs,"sleep",[10]);case 4:with(njf1)if((rv4=f.apply(c,a))==njs.NJSUS)return fh;if(njf1._clearedData=this.Clear(),njf1._clearedData.length>0&&(njf1._data.push(njf1._clearedData),njf1._clearStarted=Date.now()),Date.now()-njf1._started>njf1._options.timeout||Date.now()-njf1._clearStarted>njf1._options.clearTimeout){njf1.cp=3;break}njf1.cp=1;break;case 3:return Buffer.concat(njf1._data)}},ReadAnyBytes:function(timeout){var njf1=njs.njen(this,arguments,"timeout");e:for(;;)switch(njf1.cp){case 0:case 1:njf1.cp=2;break;case 2:if(njf1._len=this.length(),njf1._len>0)return this.readFromBuffers(njf1._len-1);njf1.pc(4,this,"wait",[njf1._timeout]);case 4:with(njf1)if((rv4=f.apply(c,a))==njs.NJSUS)return fh;if(njf1._err=njf1.rv4,njf1._err)return null;njf1.cp=1;break;case 3:break e}},ReadBytes:function(numBytes,timeout){var njf1=njs.njen(this,arguments,"numBytes","timeout");e:for(;;)switch(njf1.cp){case 0:njf1._started=Date.now(),njf1._curTimeout=njf1._timeout;case 1:njf1.cp=2;break;case 2:if(this.length()>=njf1._numBytes)return this.readFromBuffers(njf1._numBytes-1);njf1._timeout&&(njf1._curTimeout=njf1._timeout-(Date.now()-njf1._started),njf1._curTimeout<1&&(njf1._curTimeout=1)),njf1.pc(4,this,"wait",[njf1._curTimeout]);case 4:with(njf1)if((rv4=f.apply(c,a))==njs.NJSUS)return fh;if(njf1._err=njf1.rv4,njf1._err)return null;njf1.cp=1;break;case 3:break e}},scanByte:function(e){for(var t=0,n=0;n<this.buffers.length;n++){var r=this.buffers[n];if(!(e>t+r.length-1))return r[e-t];t+=r.length}return null},ReadUntil:function(delimiters,timeout){var njf1=njs.njen(this,arguments,"delimiters","timeout");e:for(;;)switch(njf1.cp){case 0:for(njf1._lines=[],njf1._i=0;njf1._i<njf1._delimiters.length;njf1._i++)njf1._lines.push({pos:0,buffer:new Buffer(njf1._delimiters[njf1._i])});njf1._scanPos=0,njf1._started=Date.now(),njf1._curTimeout=njf1._timeout;case 1:njf1.cp=2;break;case 2:njf1._value=this.scanByte(njf1._scanPos),njf1.cp=njf1._value?4:5;break;case 4:njf1._i=0;case 7:njf1.cp=njf1._i<njf1._lines.length?8:9;break;case 8:njf1._line=njf1._lines[njf1._i],njf1._curValue=njf1._line.buffer[njf1._line.pos],njf1._value!=njf1._curValue&&njf1._line.pos>0&&(njf1._line.pos=0,njf1._curValue=njf1._line.buffer[njf1._line.pos]),njf1.cp=njf1._value==njf1._curValue?10:11;break;case 10:njf1._line.pos++,njf1.cp=njf1._line.pos==njf1._line.buffer.length?12:13;break;case 12:njf1.pc(14,this,"ReadBytes",[njf1._scanPos+1]);case 14:with(njf1)if((rv14=f.apply(c,a))==njs.NJSUS)return fh;return njf1._result=njf1.rv14,njf1._result;case 13:njf1.cp=11;break;case 11:case 6:njf1._i++,njf1.cp=7;break;case 9:njf1._scanPos++,njf1.cp=1;break;case 5:njf1._timeout&&(njf1._curTimeout=njf1._timeout-(Date.now()-njf1._started),njf1._curTimeout<1&&(njf1._curTimeout=1)),njf1.pc(15,this,"wait",[njf1._curTimeout]);case 15:with(njf1)if((rv15=f.apply(c,a))==njs.NJSUS)return fh;if(njf1._err=njf1.rv15,njf1._err)return null;njf1.cp=1;break;case 3:break e}}})}).call(exports,__webpack_require__(88).Buffer)},function(module,exports,__webpack_require__){var nclass=__webpack_require__(73),util=__webpack_require__(74);module.exports=nclass.extend({controller:null,initialize:function(e,t,n){this.channel=t,this.onInitializedCallback=n,this.onInitializedCallbackCalled=!1,this.StringType=e.build("javad.pb.StringType"),this.VoidType=e.build("javad.pb.VoidType"),this.CommandResultType=e.build("javad.pb.ns.CommandResult"),this.NsDeviceInfoType=e.build("javad.pb.ns.NsDeviceInfo"),this.NsLedsStatusType=e.build("javad.pb.ns.NsLedsStatus"),this.NsScreenRequestType=e.build("javad.pb.ns.NsScreenRequest"),this.NsScreenResponseType=e.build("javad.pb.ns.NsScreenResponse"),this.NsFilePathRequest=e.build("javad.pb.ns.NsFilePathRequest"),this.NsListFilesResponse=e.build("javad.pb.ns.NsListFilesResponse"),this.NsExchangeFileRequest=e.build("javad.pb.ns.NsExchangeFileRequest"),this.info={},this.leds=[],this.onLed=null,this.onClose=null},GetInfo:function(e){return this.info},GetLeds:function(e){this.onLed=e.onLed;var t=this.leds;return this.leds=[],t},Init:function(e){this.onClose=e.onClose},Close:function(){this.channel.Close()},onDisconnect:function(){this.onClose&&this.onClose.fire()},Echo:function(){var njf1=njs.njen(this,arguments);e:for(;;)switch(njf1.cp){case 0:njf1._request=new this.StringType({body:"echo"}),njf1.pc(1,this.channel,"CallMethod",["NsServiceClient","Echo",njf1._request]);case 1:with(njf1)if((rv1=f.apply(c,a))==njs.NJSUS)return fh;return njf1._responceData=njf1.rv1,njf1._result=this.StringType.decode(njf1._responceData),njf1._result.body}},Execute:function(command){var njf1=njs.njen(this,arguments,"command");e:for(;;)switch(njf1.cp){case 0:njf1._request=new this.StringType({body:njf1._command}),njf1.pc(1,this.channel,"CallMethod",["NsServiceClient","Execute",njf1._request]);case 1:with(njf1)if((rv1=f.apply(c,a))==njs.NJSUS)return fh;if(njf1._responceData=njf1.rv1,njf1._result=this.CommandResultType.decode(njf1._responceData),0===njf1._result.errorCode)return njf1._result.result;throw new Error("TS Device returned error: "+njf1._result.result)}},GetScreen:function(){var njf1=njs.njen(this,arguments);e:for(;;)switch(njf1.cp){case 0:njf1._request=new this.NsScreenRequestType({quality:100,type:1}),njf1.pc(1,this.channel,"CallMethod",["NsServiceClient","GetScreen",njf1._request]);case 1:with(njf1)if((rv1=f.apply(c,a))==njs.NJSUS)return fh;return njf1._responceData=njf1.rv1,njf1._result=this.NsScreenResponseType.decode(njf1._responceData),njf1._result}},BrowserListFiles:function(data){var njf1=njs.njen(this,arguments,"data");e:for(;;)switch(njf1.cp){case 0:njf1._request=new this.NsFilePathRequest({path:njf1._data.path}),njf1.pc(1,this.channel,"CallMethod",["NsServiceBrowserClient","ListFiles",njf1._request]);case 1:with(njf1)if((rv1=f.apply(c,a))==njs.NJSUS)return fh;return njf1._responceData=njf1.rv1,njf1._result=this.NsListFilesResponse.decode(njf1._responceData),njf1._result}},BrowserDownloadFile:function(data){var njf1=njs.njen(this,arguments,"data");e:for(;;)switch(njf1.cp){case 0:njf1._request=new this.NsExchangeFileRequest({path:njf1._data.path,link:njf1._data.link}),njf1.pc(1,this.channel,"CallMethod",["NsServiceBrowserClient","DownloadFile",njf1._request]);case 1:with(njf1)if((rv1=f.apply(c,a))==njs.NJSUS)return fh;if(njf1._responceData=njf1.rv1,njf1._result=this.CommandResultType.decode(njf1._responceData),0===njf1._result.errorCode)return njf1._result.result;throw new Error("TS Device returned error: "+njf1._result.result)}},BrowserUploadFile:function(data){var njf1=njs.njen(this,arguments,"data");e:for(;;)switch(njf1.cp){case 0:njf1._request=new this.NsExchangeFileRequest({path:njf1._data.path,link:njf1._data.link}),njf1.pc(1,this.channel,"CallMethod",["NsServiceBrowserClient","UploadFile",njf1._request]);case 1:with(njf1)if((rv1=f.apply(c,a))==njs.NJSUS)return fh;if(njf1._responceData=njf1.rv1,njf1._result=this.CommandResultType.decode(njf1._responceData),0===njf1._result.errorCode)return njf1._result.result;throw new Error("TS Device returned error: "+njf1._result.result)}},BrowserDeleteFile:function(data){var njf1=njs.njen(this,arguments,"data");e:for(;;)switch(njf1.cp){case 0:njf1._request=new this.NsFilePathRequest({path:njf1._data.path}),njf1.pc(1,this.channel,"CallMethod",["NsServiceBrowserClient","DeleteFile",njf1._request]);case 1:with(njf1)if((rv1=f.apply(c,a))==njs.NJSUS)return fh;if(njf1._responceData=njf1.rv1,njf1._result=this.CommandResultType.decode(njf1._responceData),0===njf1._result.errorCode)return njf1._result.result;throw new Error("TS Device returned error: "+njf1._result.result);
}},BrowserCreateFolder:function(data){var njf1=njs.njen(this,arguments,"data");e:for(;;)switch(njf1.cp){case 0:njf1._request=new this.NsFilePathRequest({path:njf1._data.path}),njf1.pc(1,this.channel,"CallMethod",["NsServiceBrowserClient","CreateFolder",njf1._request]);case 1:with(njf1)if((rv1=f.apply(c,a))==njs.NJSUS)return fh;if(njf1._responceData=njf1.rv1,njf1._result=this.CommandResultType.decode(njf1._responceData),0===njf1._result.errorCode)return njf1._result.result;throw new Error("TS Device returned error: "+njf1._result.result)}},SetInfo:function(e,t){var n=this.NsDeviceInfoType.decode(e);this.info=util.extend({},n),this.onInitializedCallbackCalled||(this.onInitializedCallbackCalled=!0,this.onInitializedCallback()),t(!1,new this.VoidType)},SetLedsStatus:function(e,t){var n=this.NsLedsStatusType.decode(e);this.onLed?this.onLed.fire(n):this.leds.push(n),t(!1,new this.VoidType)}})},function(module,exports,__webpack_require__){var nclass=__webpack_require__(73),ServiceInterface=__webpack_require__(124),ConnectionsManager=__webpack_require__(125);module.exports=nclass.extend({includes:__webpack_require__(82),initialize:function(e,t){t||(t={}),console.log("Initializing RAMS Service..."),this.transportConstructor=e,this.options=t,this.liveMode=t.live,this.start()},start:function(){var njf1=njs.njen(this,arguments);e:for(;;)switch(njf1.cp){case 0:this.connectionsManager=new ConnectionsManager,njf1._that=this,njf1.pc(1,this,"transportConstructor",[]);case 1:with(njf1)if((rv1=f.apply(c,a))==njs.NJSUS)return fh;njf1._transport=njf1.rv1,njf1._transport.SetupService({"javad.ns.service":{description:"JAVAD RAMS Public Service",construct:function(){return new ServiceInterface(njf1._that)}}});break e}},HandleIncoming:function(connection){var njf1=njs.njen(this,arguments,"connection");e:for(;;)switch(njf1.cp){case 0:njf1.pc(1,njs,"sleep",[0]);case 1:with(njf1)if((rv1=f.apply(c,a))==njs.NJSUS)return fh;this.connectionsManager.Add(njf1._connection);break e}}})},function(module,exports,__webpack_require__){var rpc=__webpack_require__(78);module.exports=rpc.serviceObject.extend({initialize:function(e){var t=this;this.service=e,this.onReceiversUpdates=null,this.onReceiversUpdatesHandler=function(e){t.onReceiversUpdates.fire(e.data)}},Receivers:function(data){var njf1=njs.njen(this,arguments,"data");e:for(;;)switch(njf1.cp){case 0:njf1._data||(njf1._data={}),!this.onReceiversUpdates&&njf1._data.onReceiversUpdates&&(this.onReceiversUpdates=njf1._data.onReceiversUpdates,this.service.connectionsManager.on("update-tracker-info",this.onReceiversUpdatesHandler)),njf1.pc(1,this.service.connectionsManager,"List",[]);case 1:with(njf1)if((rv1=f.apply(c,a))==njs.NJSUS)return fh;return njf1.rv1}},GetDevice:function(e){return this.service.connectionsManager.GetDevice(e)},onDestroy:function(e){this.onReceiversUpdates&&(this.service.connectionsManager.off("update-tracker-info",this.onReceiversUpdatesHandler),this.onReceiversUpdates=null)}})},function(module,exports,__webpack_require__){var nclass=__webpack_require__(73),ConnectionTracker=__webpack_require__(126),DeviceInterface=__webpack_require__(127);module.exports=nclass.extend({includes:__webpack_require__(82),initialize:function(){this.id_inc=0,this.trackers={}},UpdateTrackerInfo:function(e,t){if(this.fire("update-tracker-info",{data:{type:"update",id:e,data:t}}),!t.status.connected&&0===t.status.viewers){var n=this.trackers["id"+e];delete this.trackers["id"+e],n.OnDestroy(),this.fire("update-tracker-info",{data:{type:"remove",id:e}})}},SetReceiver:function(e){this.fire("update-receiver",{receiver:e})},GetDevice:function(e){var t=e.id,n=e.password;if(!this.trackers["id"+t])throw new Error("Unknown ID");var r=this.trackers["id"+t];if(n=r.password,!r.CheckPassword(n))throw new Error("Wrong password");var i=new DeviceInterface(r,n);return i},GetTrackerById:function(e){return this.trackers["id"+e]},List:function(){var e=[];for(var t in this.trackers){var n=this.trackers[t];e.push(n.GetInfo())}return e},Add:function(connection){var njf1=njs.njen(this,arguments,"connection");e:for(;;)switch(njf1.cp){case 0:njf1.pc(1,njf1._connection,"GetInfo",[{}]);case 1:with(njf1)if((rv1=f.apply(c,a))==njs.NJSUS)return fh;njf1._info=njf1.rv1,njf1._tracker=this.search(njf1._info.id),njf1._tracker?njf1._tracker.SetConnection(njf1._info,njf1._connection):(njf1._id=this.id_inc++,njf1._tracker=this.add(njf1._id),njf1._tracker.SetConnection(njf1._info,njf1._connection),this.fire("update-tracker-info",{data:{type:"add",id:njf1._id,data:njf1._tracker.GetInfo()}}));break e}},add:function(e){var t=new ConnectionTracker(e,this);return this.trackers["id"+e]=t,t},search:function(e){for(var t in this.trackers){var n=this.trackers[t],r=n.GetInfo();if(r.deviceInfo.id==e)return n}return null}})},function(module,exports,__webpack_require__){var nclass=__webpack_require__(73),rpc=__webpack_require__(78),util=__webpack_require__(74);module.exports=nclass.extend({includes:__webpack_require__(82),initialize:function(e,t){this.id=e,this.manager=t,this.info={},this.ledLocations={1:"LEFT_TOP",2:"RIGHT_TOP",3:"RIGHT_BOTTOM",4:"LEFT_BOTTOM"},this.leds={LEFT_TOP:{color:{green:!1,red:!1},mode:1},RIGHT_TOP:{color:{green:!1,red:!1},mode:1},RIGHT_BOTTOM:{color:{green:!1,red:!1},mode:1},LEFT_BOTTOM:{color:{green:!1,red:!1},mode:1}},this.viewersCounter=0,this.destroyed=!1,this.connected=!1,this.notifier=null,this.lastImg=null,this.screenshotForcing=!1,this.continuousScreenshots=!0,this.lastScreenShot=0,this.screenShotPeriod=500,this.hasPassword=!0,this.echoSupport=!1,this.fileAccessSupport=!1,this.password="secret*/-+password",this.loop(),this.pingLoop()},CheckPassword:function(e){return this.hasPassword?this.password===e:!0},SetConnection:function(info,connection){var njf1=njs.njen(this,arguments,"info","connection");e:for(;;)try{switch(njf1.cp){case 0:njf1._that=this,njf1.cp=this.connected?1:2;break;case 1:try{this.connection.Close()}catch(e){}njf1.pc(3,njs,"sleep",[3e3]);case 3:with(njf1)if((rv3=f.apply(c,a))==njs.NJSUS)return fh;njf1.cp=2;break;case 2:this.password=njf1._info.password,this.hasPassword=null!=this.password&&""!=this.password,njf1._info.password=void 0,this.info=njf1._info,njf1._protoVersion=njf1._info.protoVersion||1,this.echoSupport=njf1._protoVersion>=2,this.fileAccessSupport=njf1._protoVersion>=2,njf1.pc(4,njs,"sleep",[0]);case 4:with(njf1)if((rv4=f.apply(c,a))==njs.NJSUS)return fh;njf1.pc(5,njf1._connection,"Init",[{onClose:rpc.callback(function(){njf1._that.onClose()})}]);case 5:with(njf1)if((rv5=f.apply(c,a))==njs.NJSUS)return fh;njf1.pc(6,njf1._connection,"GetLeds",[{onLed:rpc.callback(function(e){njf1._that.onLed(e)})}]);case 6:with(njf1)if((rv6=f.apply(c,a))==njs.NJSUS)return fh;for(njf1._leds=njf1.rv6,njf1._i=0;njf1._i<njf1._leds.length;njf1._i++)njf1._led=njf1._leds[njf1._i],this.onLed(njf1._led);this.connection=njf1._connection,this.connected=!0,this.fire("update-password"),this.updateStatus();break e}}catch(ex){njf1.doex(ex)}},loop:function(){var njf1=njs.njen(this,arguments);e:for(;;)switch(njf1.cp){case 0:case 1:njf1.cp=2;break;case 2:if(this.destroyed){njf1.cp=3;break}njf1.cp=this.screenshotForcing?5:4;break;case 4:njf1._delay=1e3,this.connected&&this.continuousScreenshots&&(njf1._time=Date.now(),njf1._diff=njf1._time-this.lastScreenShot,njf1._delay=this.screenShotPeriod-njf1._diff,njf1._delay=Math.max(njf1._delay,1)),njf1.pc(6,this,"screenShotDelay",[njf1._delay]);case 6:with(njf1)if((rv6=f.apply(c,a))==njs.NJSUS)return fh;njf1._err=njf1.rv6,njf1.cp=njf1._err?8:7;break;case 7:njf1.pc(9,njs,"sleep",[20]);case 9:with(njf1)if((rv9=f.apply(c,a))==njs.NJSUS)return fh;njf1.cp=8;break;case 8:njf1.cp=5;break;case 5:njf1.cp=this.screenshotForcing&&this.connected||this.continuousScreenshots&&this.viewersCounter>0&&this.connected?10:11;break;case 10:this.screenshotForcing=!1,njf1.pc(13,this,"getScreenshot",[]);case 13:with(njf1)if((rv13=f.apply(c,a))==njs.NJSUS)return fh;njf1.cp=12;break;case 11:this.screenshotForcing=!1,njf1.cp=12;break;case 12:njf1.cp=1;break;case 3:break e}},getScreenshot:function(){var njf1=njs.njen(this,arguments);e:for(;;)try{switch(njf1.cp){case 0:njf1.ecp=1,this.lastScreenShot=Date.now(),njf1.pc(3,this.connection,"GetScreen",[]);case 3:with(njf1)if((rv3=f.apply(c,a))==njs.NJSUS)return fh;njf1._imgResult=njf1.rv3,njf1._img=njf1._imgResult.data.toBuffer(),this.lastImg=njf1._img,this.fire("screenshot"),this.fire("update-event",{data:{type:"screen",data:njf1._img}}),njf1.cp=2;break;case 1:njf1.ecp=null,njf1.thr=!1,njf1._e=njf1.ex,console.log("screenshot exception",njf1._e.message),this.connected&&this.connection.Close(),njf1.cp=2;break;case 2:break e}}catch(ex){njf1.doex(ex)}},onLed:function(e){for(var t=0;t<e.leds.length;t++){var n=e.leds[t],r=this.ledLocations[n.location];r&&(this.leds[r].mode=n.mode,this.leds[r].color=n.color)}e.leds.length>0&&this.sendRtInfo()},screenShotDelay:function(timeout){var njf1=njs.njen(this,arguments,"timeout");e:for(;;)try{switch(njf1.cp){case 0:this.notifier=new njs.EventNotifier,njf1._error=!1,njf1.ecp=1,njf1.pc(3,this.notifier,"wait",[njf1._timeout]);case 3:with(njf1)if((rv3=f.apply(c,a))==njs.NJSUS)return fh;njf1.cp=2;break;case 1:njf1.ecp=null,njf1.thr=!1,njf1._ex=njf1.ex,njf1._error=!0,njf1.cp=2;break;case 2:return this.notifier=null,njf1._error}}catch(ex){njf1.doex(ex)}},pingLoop:function(){var njf1=njs.njen(this,arguments);e:for(;;)switch(njf1.cp){case 0:case 1:njf1.cp=2;break;case 2:if(this.destroyed){njf1.cp=3;break}njf1.cp=this.connected?4:5;break;case 4:njf1.pc(6,this,"ping",[]);case 6:with(njf1)if((rv6=f.apply(c,a))==njs.NJSUS)return fh;njf1.cp=5;break;case 5:njf1.pc(7,njs,"sleep",[5e3]);case 7:with(njf1)if((rv7=f.apply(c,a))==njs.NJSUS)return fh;njf1.cp=1;break;case 3:break e}},ping:function(){var njf1=njs.njen(this,arguments);e:for(;;)try{switch(njf1.cp){case 0:njf1.pc(1,njs,"sleep",[0]);case 1:with(njf1)if((rv1=f.apply(c,a))==njs.NJSUS)return fh;njf1.ecp=2,njf1.pc(4,this.connection,"Echo",[]);case 4:with(njf1)if((rv4=f.apply(c,a))==njs.NJSUS)return fh;njf1._res=njf1.rv4,njf1.cp=3;break;case 2:njf1.ecp=null,njf1.thr=!1,njf1._e=njf1.ex,this.echoSupport&&this.connected&&this.connection.Close(),njf1.cp=3;break;case 3:break e}}catch(ex){njf1.doex(ex)}},updateStatus:function(){this.manager.UpdateTrackerInfo(this.id,this.GetInfo())},GetInfo:function(){return{id:this.id,deviceInfo:this.info,status:{connected:this.connected,viewers:this.viewersCounter,hasPassword:this.hasPassword}}},On:function(e){this.on("update-event",e),this.viewersCounter++,this.updateStatus(),this.sendRtInfo(e),this.lastImg&&e({data:{type:"screen",data:this.lastImg}}),1==this.viewersCounter&&this.forceScreenshot()},sendRtInfo:function(e){var t={data:{type:"rt-info",data:{continuousScreenshots:this.continuousScreenshots,leds:this.leds}}};e?e(t):this.fire("update-event",t)},forceScreenshot:function(e){this.screenshotForcing=!0,this.notifier&&this.notifier()},Off:function(e){this.off("update-event",e),this.viewersCounter--,this.updateStatus()},execute:function(command,noScreenshot){var njf1=njs.njen(this,arguments,"command","noScreenshot");e:for(;;)try{switch(njf1.cp){case 0:njf1.cp=this.connected?1:2;break;case 1:njf1._noScreenshot||this.forceScreenshot(),njf1.ecp=3,njf1.pc(5,this.connection,"Execute",[njf1._command]);case 5:with(njf1)if((rv5=f.apply(c,a))==njs.NJSUS)return fh;return njf1._result=njf1.rv5,njf1._result;case 3:njf1.ecp=null,njf1.thr=!1,njf1._e=njf1.ex,console.log("execute exception",njf1._e.message),njf1.cp=4;break;case 4:njf1.cp=2;break;case 2:break e}}catch(ex){njf1.doex(ex)}},Execute:function(data){var njf1=njs.njen(this,arguments,"data");e:for(;;)switch(njf1.cp){case 0:if(!this.connected)throw new Error("Receiver disconnected");njf1.pc(1,this.connection,"Execute",[njf1._data]);case 1:with(njf1)if((rv1=f.apply(c,a))==njs.NJSUS)return fh;return njf1.rv1}},GetScreen:function(data){var njf1=njs.njen(this,arguments,"data");e:for(;;)switch(njf1.cp){case 0:if(!this.connected)return;njf1.pc(1,this.connection,"GetScreen",[]);case 1:with(njf1)if((rv1=f.apply(c,a))==njs.NJSUS)return fh;return njf1._result=njf1.rv1,njf1._result.data.toBuffer()}},ClickScreen:function(data){var njf1=njs.njen(this,arguments,"data");e:for(;;)switch(njf1.cp){case 0:if(!this.connected)return;njf1._event={x:njf1._data.x,y:njf1._data.y},this.fire("update-event",{data:{type:"click",data:njf1._event}}),njf1._command=util.template('"CurrentScreen".ClickAtPos("{x}", "{y}")',njf1._event),njf1.pc(1,this,"execute",[njf1._command]);case 1:with(njf1)if((rv1=f.apply(c,a))==njs.NJSUS)return fh;break e}},LongClickScreen:function(data){var njf1=njs.njen(this,arguments,"data");e:for(;;)switch(njf1.cp){case 0:if(!this.connected)return;njf1._event={x:njf1._data.x,y:njf1._data.y},this.fire("update-event",{data:{type:"click",data:njf1._event}}),njf1._command=util.template('"CurrentScreen".LongClickAtPos("{x}", "{y}")',njf1._event),njf1.pc(1,this,"execute",[njf1._command]);case 1:with(njf1)if((rv1=f.apply(c,a))==njs.NJSUS)return fh;break e}},DragScreen:function(data){var njf1=njs.njen(this,arguments,"data");e:for(;;)switch(njf1.cp){case 0:if(!this.connected)return;njf1._event={x1:njf1._data.x1,y1:njf1._data.y1,x2:njf1._data.x2,y2:njf1._data.y2},njf1._command=util.template('"CurrentScreen".ClickAndDragAt("{x1}", "{y1}", "{x2}", "{y2}")',njf1._event),njf1.pc(1,this,"execute",[njf1._command,!0]);case 1:with(njf1)if((rv1=f.apply(c,a))==njs.NJSUS)return fh;break e}},PressKey:function(name){var njf1=njs.njen(this,arguments,"name");e:for(;;)switch(njf1.cp){case 0:if(!this.connected)return;this.fire("update-event",{data:{type:"pressKey",data:njf1._name}}),njf1._command='PressHardwareKey("'+njf1._name+'")',njf1.pc(1,this,"execute",[njf1._command]);case 1:with(njf1)if((rv1=f.apply(c,a))==njs.NJSUS)return fh;break e}},KeyboardEnter:function(text){var njf1=njs.njen(this,arguments,"text");e:for(;;)switch(njf1.cp){case 0:if(!this.connected)return;njf1._command='"CurrentScreen".EnterString("'+njf1._text+'")',njf1.pc(1,this,"execute",[njf1._command]);case 1:with(njf1)if((rv1=f.apply(c,a))==njs.NJSUS)return fh;break e}},SwitchContinuousScreenshotsMode:function(){this.continuousScreenshots=!this.continuousScreenshots,this.sendRtInfo(),this.continuousScreenshots&&this.forceScreenshot()},SetContinuousScreenshotsMode:function(e){this.continuousScreenshots=e,this.sendRtInfo(),this.continuousScreenshots&&this.forceScreenshot()},UpdateScreenshot:function(){this.forceScreenshot()},BrowserListFiles:function(data){var njf1=njs.njen(this,arguments,"data");e:for(;;)switch(njf1.cp){case 0:if(!this.fileAccessSupport)throw new Error("Not supported");njf1.pc(1,this.connection,"BrowserListFiles",[njf1._data]);case 1:with(njf1)if((rv1=f.apply(c,a))==njs.NJSUS)return fh;return njf1.rv1}},BrowserUploadFile:function(data){var njf1=njs.njen(this,arguments,"data");e:for(;;)switch(njf1.cp){case 0:if(!this.fileAccessSupport)throw new Error("Not supported");njf1.pc(1,this.connection,"BrowserUploadFile",[njf1._data]);case 1:with(njf1)if((rv1=f.apply(c,a))==njs.NJSUS)return fh;return njf1.rv1}},BrowserDownloadFile:function(data){var njf1=njs.njen(this,arguments,"data");e:for(;;)switch(njf1.cp){case 0:if(!this.fileAccessSupport)throw new Error("Not supported");njf1.pc(1,this.connection,"BrowserDownloadFile",[njf1._data]);case 1:with(njf1)if((rv1=f.apply(c,a))==njs.NJSUS)return fh;return njf1.rv1}},BrowserDeleteFile:function(data){var njf1=njs.njen(this,arguments,"data");e:for(;;)switch(njf1.cp){case 0:if(!this.fileAccessSupport)throw new Error("Not supported");njf1.pc(1,this.connection,"BrowserDeleteFile",[njf1._data]);case 1:with(njf1)if((rv1=f.apply(c,a))==njs.NJSUS)return fh;return njf1.rv1}},BrowserCreateFolder:function(data){var njf1=njs.njen(this,arguments,"data");e:for(;;)switch(njf1.cp){case 0:if(!this.fileAccessSupport)throw new Error("Not supported");njf1.pc(1,this.connection,"BrowserCreateFolder",[njf1._data]);case 1:with(njf1)if((rv1=f.apply(c,a))==njs.NJSUS)return fh;return njf1.rv1}},onClose:function(){this.connected=!1,this.connection=null,this.updateStatus()},OnDestroy:function(){this.fire("destroy"),this.destroyed=!0}})},function(module,exports,__webpack_require__){var rpc=(__webpack_require__(73),__webpack_require__(78));module.exports=rpc.serviceObject.extend({includes:__webpack_require__(82),initialize:function(e,t){this.tracker=e,this.password=t;var n=this;this.denied=!1,this.screensInProgress=0,this.lastScreenEvent=null,this.onUpdatesEvent=null,this.onUpdatesEventHandler=function(e){n.onUpdatesEventSender(e)},this.onPasswordUpdateEventHandler=function(e){n.passwordUpdate()},this.tracker.on("update-password",this.onPasswordUpdateEventHandler),this.subscribers=[]},onUpdatesEventSender:function(e){var njf1=njs.njen(this,arguments,"e");e:for(;;)switch(njf1.cp){case 0:njf1.cp=this.onUpdatesEvent&&!this.denied?1:2;break;case 1:njf1._data=njf1._e.data,njf1.cp="screen"==njf1._data.type?3:4;break;case 3:if(this.screensInProgress>=2)return void(this.lastScreenEvent=njf1._e);this.screensInProgress++,njf1.pc(6,njs.async,"Task",[this.onUpdatesEvent,this.onUpdatesEvent.fire,njf1._data]);case 6:with(njf1)if((rv6=f.apply(c,a))==njs.NJSUS)return fh;this.screensInProgress--,this.lastScreenEvent&&(njf1._ev=this.lastScreenEvent,this.lastScreenEvent=null,this.onUpdatesEventSender(njf1._ev)),njf1.cp=5;break;case 4:this.onUpdatesEvent.fire(njf1._e.data),njf1.cp=5;break;case 5:njf1.cp=2;break;case 2:break e}},Subscribe:function(e){e||(e={}),!this.onUpdatesEvent&&e.onUpdatesEvent&&(this.onUpdatesEvent=e.onUpdatesEvent,this.tracker.On(this.onUpdatesEventHandler))},passwordUpdate:function(){this.tracker.CheckPassword(this.password)||(this.denied=!0,this.onUpdatesEvent&&this.onUpdatesEvent.fire({type:"password-outdated"}))},checkAccess:function(){if(this.denied)throw new Error("Access denied")},BrowserListFiles:function(data){var njf1=njs.njen(this,arguments,"data");e:for(;;)switch(njf1.cp){case 0:this.checkAccess(),njf1.pc(1,this.tracker,"BrowserListFiles",[njf1._data]);case 1:with(njf1)if((rv1=f.apply(c,a))==njs.NJSUS)return fh;return njf1.rv1}},BrowserUploadFile:function(data){var njf1=njs.njen(this,arguments,"data");e:for(;;)switch(njf1.cp){case 0:this.checkAccess(),njf1.pc(1,this.tracker,"BrowserUploadFile",[njf1._data]);case 1:with(njf1)if((rv1=f.apply(c,a))==njs.NJSUS)return fh;return njf1.rv1}},BrowserDownloadFile:function(data){var njf1=njs.njen(this,arguments,"data");e:for(;;)switch(njf1.cp){case 0:this.checkAccess(),njf1.pc(1,this.tracker,"BrowserDownloadFile",[njf1._data]);case 1:with(njf1)if((rv1=f.apply(c,a))==njs.NJSUS)return fh;return njf1.rv1}},BrowserDeleteFile:function(data){var njf1=njs.njen(this,arguments,"data");e:for(;;)switch(njf1.cp){case 0:this.checkAccess(),njf1.pc(1,this.tracker,"BrowserDeleteFile",[njf1._data]);case 1:with(njf1)if((rv1=f.apply(c,a))==njs.NJSUS)return fh;return njf1.rv1}},BrowserCreateFolder:function(data){var njf1=njs.njen(this,arguments,"data");e:for(;;)switch(njf1.cp){case 0:this.checkAccess(),njf1.pc(1,this.tracker,"BrowserCreateFolder",[njf1._data]);case 1:with(njf1)if((rv1=f.apply(c,a))==njs.NJSUS)return fh;return njf1.rv1}},Execute:function(data){var njf1=njs.njen(this,arguments,"data");e:for(;;)switch(njf1.cp){case 0:this.checkAccess(),njf1.pc(1,this.tracker,"Execute",[njf1._data]);case 1:with(njf1)if((rv1=f.apply(c,a))==njs.NJSUS)return fh;return njf1.rv1}},GetScreen:function(data){var njf1=njs.njen(this,arguments,"data");e:for(;;)switch(njf1.cp){case 0:this.checkAccess(),njf1.pc(1,this.tracker,"GetScreen",[njf1._data]);case 1:with(njf1)if((rv1=f.apply(c,a))==njs.NJSUS)return fh;return njf1.rv1}},ClickScreen:function(e){this.checkAccess(),this.tracker.ClickScreen(e)},LongClickScreen:function(e){this.checkAccess(),this.tracker.LongClickScreen(e)},DragScreen:function(e){this.checkAccess(),this.tracker.DragScreen(e)},PressKey:function(e){this.checkAccess(),this.tracker.PressKey(e)},KeyboardEnter:function(e){this.checkAccess(),this.tracker.KeyboardEnter(e)},SwitchContinuousScreenshotsMode:function(){this.checkAccess(),this.tracker.SwitchContinuousScreenshotsMode()},UpdateScreenshot:function(){this.checkAccess(),this.tracker.UpdateScreenshot()},onDestroy:function(e){this.tracker.off("update-password",this.onPasswordUpdateEventHandler),this.onUpdatesEvent&&(this.tracker.Off(this.onUpdatesEventHandler),this.onUpdatesEvent=null)}})},function(e,t,n){e.exports=function(e){e.Util.fetch=function(e,t){var r={"RpcTypes.proto":n(129),"NsService.proto":n(130),"CommonTypes.proto":n(131)},i=null;for(var s in r)e.indexOf(s)>=0&&(i=r[s]);return t&&"function"!=typeof t&&t(i),i};var t=e.newBuilder({convertFieldsToCamelCase:!0});e.loadProtoFile("./proto/RpcTypes.proto",t),e.loadProtoFile("./proto/NsService.proto",t);var r={FrameType:t.build("javad.pb.rpc.Frame"),CallFrameType:t.build("javad.pb.rpc.CallFrame"),FaultExceptionType:t.build("javad.pb.rpc.FaultException")};return{builder:t,rpcMessages:r}}},function(e,t){e.exports="package javad.pb.rpc;\n\nmessage Frame {\n	enum FrameType {\n    CALL = 1;\n    MESSAGE = 2;\n  }\n  required FrameType type = 1;\n  optional bytes body = 2;\n}\n\nmessage CallFrame {\n	enum CallType {\n    CALL = 1;\n    REPLY = 2;\n    EXCEPTION = 3;\n    ONEWAY = 4;\n  }\n  required CallType type = 1;               // \n  optional string name = 2;                 // method name\n  optional int32 seqId = 3;                 // sequence counter (Frame ID)\n  optional bytes body = 4;                  // \n  optional string srvName = 5;              // service index  \n}\n\nmessage FaultException {\n  required string message = 1;\n  optional string stackTrace = 2;\n}\n\n\n\n"},function(e,t){e.exports='package javad.pb.ns;\r\nimport "javad/pb/CommonTypes.proto";\r\n\r\noption py_generic_services = true;\r\noption cc_generic_services = true;\r\n\r\nservice NsServiceListener {\r\n		rpc SetInfo (NsDeviceInfo) returns (VoidType);\r\n		rpc SetLedsStatus (NsLedsStatus) returns (VoidType);\r\n}\r\n\r\nservice NsServiceClient {\r\n		rpc Execute (StringType) returns (CommandResult);\r\n		rpc GetScreen (NsScreenRequest) returns (NsScreenResponse);\r\n		rpc Echo (StringType) returns (StringType);\r\n		rpc Disconnect (VoidType) returns (VoidType);\r\n}\r\n\r\nservice NsServiceBrowserClient {\r\n		rpc ListFiles (NsFilePathRequest) returns (NsListFilesResponse);\r\n		rpc UploadFile (NsExchangeFileRequest) returns (CommandResult);    \r\n		rpc DownloadFile (NsExchangeFileRequest) returns (CommandResult);  \r\n		rpc DeleteFile (NsFilePathRequest) returns (CommandResult);        \r\n		rpc CreateFolder (NsFilePathRequest) returns (CommandResult);        \r\n}\r\n\r\nmessage NsDeviceInfo {\r\n		optional string id = 1;\r\n		optional string serial_number = 2;\r\n		optional string model = 3;\r\n		optional string name = 4;\r\n		optional string password = 5;\r\n		optional string organization = 6;\r\n		optional string division = 7;\r\n		optional string operator = 8;\r\n		optional int32 proto_version = 9;    \r\n}\r\n\r\n\r\nmessage CommandResult {\r\n		required string result = 1;\r\n		required int32 error_code = 2;\r\n}\r\n\r\nmessage NsScreenRequest {\r\n		optional int32 quality = 1;\r\n		optional NsScreenType type = 2;\r\n		optional bool nonBlocking = 3 [default = false];\r\n}\r\n\r\nmessage NsScreenResponse {\r\n		optional int32 quality = 1;\r\n		optional NsScreenType type = 2;\r\n		optional bool is_partial = 3 [default = false];\r\n		optional bytes data = 4;\r\n}\r\n\r\nenum NsScreenType {\r\n    PNG = 1;\r\n    JPG = 2;\r\n    BMP = 3;\r\n}\r\n\r\nmessage NsFilePathRequest {\r\n		required string path = 1;\r\n}\r\n\r\nmessage NsListFilesResponse {\r\n		repeated NsFileItem list = 1;\r\n}\r\n\r\nmessage NsFileItem {\r\n		required string name = 1;\r\n		required string path = 2;\r\n		optional bool is_dir = 3 [default = false];\r\n		optional uint64 size = 4 [default = 0];    \r\n}\r\n\r\nmessage NsExchangeFileRequest {\r\n		required string path = 1;\r\n		optional string link = 2;\r\n}\r\n\r\nmessage NsLedsStatus {\r\n		repeated NsLedInfo leds = 1;\r\n}\r\n\r\nmessage NsLedInfo {\r\n	  enum LedLocation {\r\n	    LEFT_TOP = 1;\r\n	    RIGHT_TOP = 2;\r\n	    RIGHT_BOTTOM = 3;\r\n	    LEFT_BOTTOM = 4;\r\n	  }\r\n	  enum LedMode {\r\n	    NORMAL = 1;\r\n	    BLINKING = 2;\r\n	  }\r\n		optional LedLocation location = 1;\r\n		optional NsLedColor color = 2;\r\n		optional LedMode mode = 3;\r\n}\r\n\r\nmessage NsLedColor {\r\n		optional bool red = 1;\r\n		optional bool green = 2;	\r\n}\r\n\r\n'},function(e,t){e.exports="package javad.pb;\r\n\r\nmessage VoidType {\r\n}\r\n\r\nmessage StringType {\r\n	required string body = 1;\r\n}\r\n\r\nmessage BlobType {\r\n	required bytes body = 1;\r\n}\r\n\r\n\r\nmessage Guid {\r\n		required uint32 a = 1 [default = 0]; // 4 bytes of the guid\r\n	  required uint32  b = 2 [default = 0]; // 2 bytes of the guid\r\n	  required uint32  c = 3 [default = 0]; // 2 bytes of the guid\r\n	  required bytes  d = 4 ;// array of bytes (must be of 8 bytes size)\r\n}\r\n\r\n\r\n"},function(module,exports,__webpack_require__){var nclass=__webpack_require__(73),util=__webpack_require__(74),ChromeTcpDataManager=__webpack_require__(133),Socket=__webpack_require__(134),Request=__webpack_require__(135),Response=__webpack_require__(136),CRLF="\r\n";module.exports=nclass.extend({includes:__webpack_require__(82),initialize:function(e){this.port=e.port,e.handlers||(e.handlers={}),this.handlers=e.handlers,this.listenSocketId=null},Initialize:function(){var njf1=njs.njen(this,arguments);e:for(;;)switch(njf1.cp){case 0:njf1._that=this,njf1.pc(1,njs.async,"Task",[chrome.sockets.tcpServer,chrome.sockets.tcpServer.create]);case 1:with(njf1)if((rv1=f.apply(c,a))==njs.NJSUS)return fh;njf1._createInfo=njf1.rv1,this.listenSocketId=njf1._createInfo.socketId,ChromeTcpDataManager.SetAcceptHandler(this.listenSocketId,function(e,t){e||njf1._that.accept(t)}),njf1.pc(2,njs.async,"Task",[chrome.sockets.tcpServer,chrome.sockets.tcpServer.listen,this.listenSocketId,"0.0.0.0",this.port]);case 2:with(njf1)if((rv2=f.apply(c,a))==njs.NJSUS)return fh;return njf1.rv2}},Close:function(){var njf1=njs.njen(this,arguments);e:for(;;)switch(njf1.cp){case 0:njf1.pc(1,njs.async,"Task",[chrome.sockets.tcpServer,chrome.sockets.tcpServer.getSockets]);case 1:with(njf1)if((rv1=f.apply(c,a))==njs.NJSUS)return fh;njf1._listenSockets=njf1.rv1,njf1._i=0;case 3:njf1.cp=njf1._i<njf1._listenSockets.length?4:5;break;case 4:njf1._listenSocket=njf1._listenSockets[njf1._i],njf1.pc(6,njs.async,"Task",[chrome.sockets.tcpServer,chrome.sockets.tcpServer.close,njf1._listenSocket.socketId]);case 6:with(njf1)if((rv6=f.apply(c,a))==njs.NJSUS)return fh;case 2:njf1._i++,njf1.cp=3;break;case 5:njf1.pc(7,njs.async,"Task",[chrome.sockets.tcp,chrome.sockets.tcp.getSockets]);case 7:with(njf1)if((rv7=f.apply(c,a))==njs.NJSUS)return fh;njf1._tcpSockets=njf1.rv7,njf1._i=0;case 9:njf1.cp=njf1._i<njf1._tcpSockets.length?10:11;break;case 10:njf1._tcpSocket=njf1._tcpSockets[njf1._i],njf1.pc(12,njs.async,"Task",[chrome.sockets.tcp,chrome.sockets.tcp.close,njf1._tcpSocket.socketId]);case 12:with(njf1)if((rv12=f.apply(c,a))==njs.NJSUS)return fh;case 8:njf1._i++,njf1.cp=9;break;case 11:break e}},accept:function(e){var t=new Socket(e.clientSocketId);this.readHeaders(t)},readHeaders:function(socket){var njf1=njs.njen(this,arguments,"socket");e:for(;;)switch(njf1.cp){case 0:njf1.pc(1,njs,"sleep",[0]);case 1:with(njf1)if((rv1=f.apply(c,a))==njs.NJSUS)return fh;njf1.pc(2,njf1._socket.stream,"ReadUntil",[CRLF+CRLF,5e3]);case 2:with(njf1)if((rv2=f.apply(c,a))==njs.NJSUS)return fh;njf1._headerBuffer=njf1.rv2,njf1.cp=njf1._socket.closed?4:3;break;case 3:if(!njf1._headerBuffer)return void njf1._socket.close();for(njf1._headerText=njf1._headerBuffer.toString(),njf1._headerLines=njf1._headerText.split(CRLF),njf1._requestData={},njf1._requestDataParts=njf1._headerLines[0].split(" "),njf1._requestData.method=njf1._requestDataParts[0].toUpperCase(),njf1._requestData.resource=njf1._requestDataParts[1]||"",njf1._requestData.httpVersion=njf1._requestDataParts[2]||"",njf1._requestData.headers={},njf1._i=1;njf1._i<njf1._headerLines.length;njf1._i++)njf1._line=njf1._headerLines[njf1._i],njf1._splitPoint=njf1._line.indexOf(":"),njf1._splitPoint>=0&&(njf1._key=util.trim(njf1._line.substring(0,njf1._splitPoint).toLowerCase()),njf1._requestData.headers[njf1._key]=util.trim(njf1._line.substring(njf1._splitPoint+1)));njf1._request=new Request({socket:njf1._socket,requestData:njf1._requestData}),njf1._responce=new Response({request:njf1._request}),njf1._handler=this.handlers[njf1._request.path],njf1.cp=njf1._handler?5:6;break;case 5:njf1._socket.setDataEventMode(),njf1._handler(njf1._socket,njf1._request,njf1._responce),njf1.cp=7;break;case 6:njf1.pc(8,njf1._responce,"send",[404,"Not Found"]);case 8:with(njf1)if((rv8=f.apply(c,a))==njs.NJSUS)return fh;njf1.cp=7;break;case 7:njf1.cp=4;break;case 4:break e}}})},function(e,t,n){var r=n(73),i=r.extend({initialize:function(){if(this.dataHandlers={},this.acceptHandlers={},chrome&&chrome.sockets){var e=this;chrome.sockets.tcp&&(chrome.sockets.tcp.onReceive.addListener(function(t){var n=e.dataHandlers[t.socketId];n&&n(!1,t.data)}),chrome.sockets.tcp.onReceiveError.addListener(function(t){var n=e.dataHandlers[t.socketId];n&&n(!0)})),chrome.sockets.tcpServer&&chrome.sockets.tcpServer.onAccept.addListener(function(t){var n=e.acceptHandlers[t.socketId];n&&n(!1,t)})}},SetReceiveHandler:function(e,t){this.dataHandlers[e]=t},CancelReceiveHandler:function(e){delete this.dataHandlers[e]},SetAcceptHandler:function(e,t){this.acceptHandlers[e]=t},CancelAcceptHandler:function(e){delete this.acceptHandlers[e]}});e.exports=new i},function(module,exports,__webpack_require__){(function(Buffer){var nclass=__webpack_require__(73),ChromeTcpDataManager=__webpack_require__(133),BufferedStream=__webpack_require__(121);module.exports=nclass.extend({initialize:function(e){this.socketId=e,chrome.sockets.tcp.update(this.socketId,{bufferSize:204800}),chrome.sockets.tcp.setPaused(this.socketId,!1);var t=this;ChromeTcpDataManager.SetReceiveHandler(this.socketId,function(e,n){e?t.onClose():t.onData(n)}),this.closed=!1,this.stream=new BufferedStream,this.internalBuffer=!0,this.dataHandler=null,this.closeHandler=null},on:function(e,t){switch(e){case"data":this.dataHandler=t;break;case"close":this.closeHandler=t}},setDataEventMode:function(){this.internalBuffer=!1},onData:function(e){var t=new Buffer(e);this.internalBuffer?this.stream.Push(t):this.dataHandler&&this.dataHandler(t)},onClose:function(){this.close()},setNoDelay:function(e){chrome.sockets.tcp.setNoDelay(this.socketId,e,function(){})},write:function(data){var njf1=njs.njen(this,arguments,"data");e:for(;;)switch(njf1.cp){case 0:njf1._buffer=new Buffer(njf1._data),njf1.pc(1,njf1._buffer,"toArrayBuffer",[]);case 1:with(njf1)if((rv1=f.apply(c,a))==njs.NJSUS)return fh;njf1.pc(2,njs.async,"Task",[chrome.sockets.tcp,chrome.sockets.tcp.send,this.socketId,njf1.rv1]);case 2:with(njf1)if((rv2=f.apply(c,a))==njs.NJSUS)return fh;break e}},close:function(){this.closed||(this.closed=!0,this.closeHandler&&this.closeHandler(),chrome.sockets.tcp.disconnect(this.socketId),chrome.sockets.tcp.close(this.socketId))},destroy:function(){this.close()}})}).call(exports,__webpack_require__(88).Buffer)},function(e,t,n){var r=n(73);e.exports=r.extend({includes:n(82),initialize:function(e){this.socket=e.socket,this.requestData=e.requestData,this.method=this.requestData.method,this.headers=this.requestData.headers;var t=this.headers.host||"localhost",n=/\?.*/.exec(this.requestData.resource);this.url="http://"+t+this.requestData.resource,this.path=this.requestData.resource.replace(/\?.*/,""),this.query=n?n[0]:""},getQueryParam:function(e){var t=new RegExp("[\\?&]"+e+"=([^&#]*)"),n=t.exec(this.query);return n&&decodeURIComponent(n[1])}})},function(module,exports,__webpack_require__){var nclass=__webpack_require__(73),CRLF="\r\n";module.exports=nclass.extend({includes:__webpack_require__(82),initialize:function(e){this.socket=e.request.socket,this.request=e.request,this.headers={},this.headers.Connection="close";
},send:function(status,message,contentType){var njf1=njs.njen(this,arguments,"status","message","contentType");e:for(;;)switch(njf1.cp){case 0:this.headers["Content-Type"]=njf1._contentType||"text/html",njf1._message||(njf1._message=""),this.headers["Content-Length"]=njf1._message.length,njf1.pc(1,this,"startResponse",[njf1._status]);case 1:with(njf1)if((rv1=f.apply(c,a))==njs.NJSUS)return fh;njf1.pc(2,this.socket,"write",[njf1._message]);case 2:with(njf1)if((rv2=f.apply(c,a))==njs.NJSUS)return fh;this.socket.close();break e}},startResponse:function(status){var njf1=njs.njen(this,arguments,"status");e:for(;;)switch(njf1.cp){case 0:njf1._headers=this.headers,njf1._statusMsg=404===njf1._status?"Not Found":405===njf1._status?"Method Not Allowed":400===njf1._status?"Bad Request":200===njf1._status?"OK":"",njf1._lines=["HTTP/1.1 "+njf1._status+" "+njf1._statusMsg],Object.keys(njf1._headers).forEach(function(e){njf1._lines.push(e+": "+njf1._headers[e])}),njf1._lines.push("",""),njf1.pc(1,njf1._lines,"join",[CRLF]);case 1:with(njf1)if((rv1=f.apply(c,a))==njs.NJSUS)return fh;njf1.pc(2,this.socket,"write",[njf1.rv1]);case 2:with(njf1)if((rv2=f.apply(c,a))==njs.NJSUS)return fh;break e}}})}]);